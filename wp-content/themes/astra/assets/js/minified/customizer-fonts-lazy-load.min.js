(i=>{let t={isLoading:!1,init:function(){let t=this;setTimeout(function(){t.loadAllFonts()},2e3)},loadAllFonts:function(){let o=this;this.isLoading||(this.isLoading=!0,i.ajax({url:ajaxurl,type:"POST",data:{action:"astra_load_all_fonts",nonce:"undefined"!=typeof AstraBuilderCustomizerData?AstraBuilderCustomizerData.customizer_nonce:wp.customize.settings.nonce.save},success:function(t){t.success&&(o.updateFontControls(t.data),o.updateGlobalFontString(t.data))},complete:function(){o.isLoading=!1}}))},updateFontControls:function(n){i(".customize-control-ast-font select, .ast-font-family").each(function(){var t=i(this),o=t.val();let e=t.find('optgroup[label*="Google"]');e.length&&(e.empty(),i.each(n,function(t,o){o=o[1]||"sans-serif",o=i('<option value="'+("'"+t+"', "+o)+'">'+t+"</option>");e.append(o)}),t.val(o),t.hasClass("select2-hidden-accessible"))&&t.select2("destroy").select2()})},updateGlobalFontString:function(t){if("undefined"!=typeof astra&&astra.customizer&&astra.customizer.settings){let e="";e=e+'<option value="inherit">Default System Font</option>'+'<optgroup label="Other System Fonts">',["Helvetica","Verdana","Arial","Times","Georgia","Courier"].forEach(function(t){e+='<option value="'+t+'">'+t+"</option>"}),e=e+"</optgroup>"+'<optgroup label="Google">',i.each(t,function(t,o){o="'"+t+"', "+(o[1]||"sans-serif");e+='<option value="'+o+'">'+t+"</option>"}),e+="</optgroup>",astra.customizer.settings.google_fonts=e}}};"undefined"!=typeof wp&&wp.customize&&wp.customize.bind("ready",function(){t.init()})})(jQuery);