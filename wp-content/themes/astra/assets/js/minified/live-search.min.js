!function(){function o(e){let a="";return Object.entries(e).map(([e,t])=>{a+=`<label class="ast-search--posttype-heading"> ${e}s </label>`,t.map(e=>{t=e.title.rendered;var t=(new DOMParser).parseFromString(t,"text/html").documentElement.textContent;a+=`<a class="ast-search-item" role="option" target="_self" href="${e.link}"> <span> ${t} </span> </a>`})}),a}window.addEventListener("load",function(e){document.querySelectorAll(".search-field").forEach(e=>{e.addEventListener("input",async t=>{var a=e.closest("form.search-form"),t=t.target.value.trim(),s=astra_search.search_post_types;const r=document.querySelectorAll(".ast-live-search-results");r&&r.forEach(function(e){e.parentNode.removeChild(e)});try{var l=`${astra_search.rest_api_url}wp/v2/posts${-1<astra_search.rest_api_url.indexOf("?")?"&":"?"}_embed=1&post_type=ast_queried:${s.join(":")}&per_page=${astra_search.search_posts_per_page}&search=`+t+(astra_search.search_language?"&lang="+astra_search.search_language:""),c=await(await fetch(l)).json();let e="";if(0<c.length){let t={};c.map(e=>{e.type in t?t[e.type].push(e):t[e.type]=[e]});var n=o(t);e=`
							<div
								class="ast-live-search-results"
								role="listbox"
								aria-label="Search results"
								style="top: ${parseInt(a.offsetHeight)+10}px;"
							>
								${n}
							</div>
						`}else e=`
							<div
								class="ast-live-search-results"
								role="listbox"
								aria-label="Search results"
								style="top: ${parseInt(a.offsetHeight)+10}px;"
							>
								<label class="ast-search--no-results-heading"> ${astra_search.no_live_results_found} </label>
							</div>
						`;const r=document.querySelectorAll(".ast-live-search-results");r&&r.forEach(function(e){e.parentNode.removeChild(e)}),a.insertAdjacentHTML("beforeend",e)}catch(e){console.error("Error while fetching data:",e)}})})}),document.addEventListener("click",function(e){var e=e.target.closest("form.search-form");null!==e?e.querySelector(".ast-live-search-results")&&(e.querySelector(".ast-live-search-results").style.display="block"):(e=document.querySelectorAll(".ast-live-search-results"))&&e.forEach(function(e){e.style.display="none"})})}();