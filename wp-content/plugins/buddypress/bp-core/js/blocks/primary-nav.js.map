{"version":3,"sources":["bp-core/js/blocks/primary-nav/edit.js","bp-core/js/blocks/primary-nav/transforms.js","bp-core/js/blocks/primary-nav.js"],"names":["blockEditor","InspectorControls","components","Disabled","Notice","PanelBody","ToggleControl","element","Fragment","createElement","i18n","__","serverSideRender","ServerSideRender","wp","blockData","getCurrentWidgetsSidebar","bp","editPrimaryNavBlock","attributes","setAttributes","clientId","displayTitle","currentSidebar","id","indexOf","blocks","createBlock","transforms","from","type","isMatch","idBase","instance","raw","transform","bp_nouveau_widget_title","registerBlockType","title","description","icon","background","foreground","src","category","default","edit"],"mappings":";AAmEkC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAhElC,MACCA,aAAa,kBACZC,GAEDC,YAAY,SACXC,EAAQ,OACRC,EAAM,UACNC,EAAS,cACTC,GAEDC,SAAS,SACRC,EAAQ,cACRC,GAEDC,MAAM,GACLC,GAEDC,iBAAkBC,GACfC,IAMHC,WAAW,yBACVC,IAEEC,GAEEC,EAAsB,IAA+C,IAA7C,WAAEC,EAAU,cAAEC,EAAa,SAAEC,GAAU,EACpE,MAAM,aAAEC,GAAiBH,EACnBI,EAAiBP,EAA0BK,GAGjD,OAAKE,GAAkBA,EAAeC,KAAO,IAFpB,CAAC,6BAA8B,6BAEYC,QAASF,EAAeC,IAE1F,EAAC,EAAM,CAAC,OAAO,QAAQ,eAAgB,GACtC,EACGb,IAAAA,KAAAA,EAAI,qGAAuG,gBAOhH,EAAC,EACA,KAAA,EAAC,EACA,KAAA,EAAC,EAAS,CAAC,MAAQA,EAAI,WAAY,cAAiB,aAAc,GACjE,EAAC,EAAa,CACb,MAAQA,EAAI,2BAA4B,cACxC,UAAaW,EACb,SAAW,KACVF,EAAe,CAAEE,cAAgBA,SAKrC,EAAC,EACA,KAAA,EAAC,EAAgB,CAAC,MAAM,iBAAiB,WAAaH,OAIxD,IAEaD,EAAAA,EAAmB,QAAA,QAAA;;AChCT,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAhCxB,MACAQ,QAAQ,YACPC,IAEEb,GAOEc,EAAa,CAClBC,KAAM,CACL,CACCC,KAAM,QACNJ,OAAQ,CAAE,sBACVK,QAAS,IAA4B,IAA1B,OAAEC,EAAM,SAAEC,GAAU,EAC9B,SAAOA,IAAcA,EAASC,MAIZ,yCAAXF,GAERG,UAAW,IAAoB,IAAlB,SAAEF,GAAU,EACxB,OAAON,EAAa,iBAAkB,CACrCL,aAAcW,EAASC,IAAIE,8BAK9B,IAEaR,EAAAA,EAAU,QAAA,QAAA;;ACAtB,aApBH,IAAA,EAAA,EAAA,QAAA,uBACA,EAAA,EAAA,QAAA,6BAAkD,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAblD,MACCF,QAAQ,kBACPW,GAED3B,MAAM,GACLC,IAEEG,GAQJuB,EAAmB,iBAAkB,CACpCC,MAAO3B,EAAI,qBAAsB,cACjC4B,YAAa5B,EAAI,qIAAsI,cACvJ6B,KAAM,CACLC,WAAY,OACZC,WAAY,UACZC,IAAK,uBAENC,SAAU,aACVzB,WAAY,CACXG,aAAc,CACbQ,KAAM,UACNe,SAAS,IAGXC,KAAM5B,EAAmB,QACzBU,WAAYA,EAAAA","file":"primary-nav.js","sourceRoot":"../src/js","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tInspectorControls,\n\t},\n\tcomponents: {\n\t\tDisabled,\n\t\tNotice,\n\t\tPanelBody,\n\t\tToggleControl,\n\t},\n\telement: {\n\t\tFragment,\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n\tserverSideRender: ServerSideRender,\n} = wp;\n\n/**\n * BuddyPress dependencies.\n */\nconst {\n\tblockData: {\n\t\tgetCurrentWidgetsSidebar,\n\t}\n} = bp;\n\nconst editPrimaryNavBlock = ( { attributes, setAttributes, clientId } ) => {\n\tconst { displayTitle } = attributes;\n\tconst currentSidebar = getCurrentWidgetsSidebar( clientId );\n\tconst disabledSidebars = ['sidebar-buddypress-members', 'sidebar-buddypress-groups'];\n\n\tif ( currentSidebar && currentSidebar.id && -1 !== disabledSidebars.indexOf( currentSidebar.id ) ) {\n\t\treturn (\n\t\t\t<Notice status=\"error\" isDismissible={ false }>\n\t\t\t\t<p>\n\t\t\t\t\t{ __( 'The BuddyPress Primary Navigation block shouldn\\'t be used into this widget area. Please remove it.', 'buddypress' ) }\n\t\t\t\t</p>\n\t\t\t</Notice>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Include navigation title', 'buddypress' ) }\n\t\t\t\t\t\tchecked={ !! displayTitle }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( { displayTitle: ! displayTitle } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/primary-nav\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nexport default editPrimaryNavBlock;\n","/**\n * WordPress dependencies.\n */\n const {\n\tblocks: {\n\t\tcreateBlock,\n\t},\n} = wp;\n\n/**\n * Transforms Legacy Widget to Primary Nav Block.\n *\n * @type {Object}\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/legacy-widget' ],\n\t\t\tisMatch: ( { idBase, instance } ) => {\n\t\t\t\tif ( ! instance ||Â ! instance.raw ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn idBase === 'bp_nouveau_sidebar_object_nav_widget';\n\t\t\t},\n\t\t\ttransform: ( { instance } ) => {\n\t\t\t\treturn createBlock( 'bp/primary-nav', {\n\t\t\t\t\tdisplayTitle: instance.raw.bp_nouveau_widget_title,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport editPrimaryNavBlock from './primary-nav/edit';\nimport transforms from './primary-nav/transforms';\n\nregisterBlockType( 'bp/primary-nav', {\n\ttitle: __( 'Primary navigation', 'buddypress' ),\n\tdescription: __( 'Displays BuddyPress primary nav in the sidebar of your site. Make sure to use it as the first widget of the sidebar and only once.', 'buddypress' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'buddicons-community',\n\t},\n\tcategory: 'buddypress',\n\tattributes: {\n\t\tdisplayTitle: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tedit: editPrimaryNavBlock,\n\ttransforms: transforms,\n} );\n"]}