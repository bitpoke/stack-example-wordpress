{"version":3,"sources":["bp-groups/js/blocks/dynamic-groups/constants.js","bp-groups/js/blocks/dynamic-groups/edit.js","bp-groups/js/blocks/dynamic-groups/transforms.js","bp-groups/js/blocks/dynamic-groups.js"],"names":["i18n","__","wp","TYPES","label","value","blockEditor","InspectorControls","components","Disabled","PanelBody","RangeControl","SelectControl","TextControl","ToggleControl","element","Fragment","createElement","serverSideRender","ServerSideRender","editDynamicGroupsBlock","attributes","setAttributes","title","maxGroups","groupDefault","linkTitle","text","option","blocks","createBlock","transforms","from","type","isMatch","idBase","instance","raw","transform","max_groups","group_default","link_title","registerBlockType","description","icon","background","foreground","src","category","default","edit"],"mappings":"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","file":"dynamic-groups.js","sourceRoot":"../src/js","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Groups ordering types.\n *\n * @type {Array}\n */\nexport const TYPES = [\n\t{\n\t\tlabel: __( 'Newest', 'buddypress' ),\n\t\tvalue: 'newest',\n\t},\n\t{\n\t\tlabel: __( 'Active', 'buddypress' ),\n\t\tvalue: 'active',\n\t},\n\t{\n\t\tlabel: __( 'Popular', 'buddypress' ),\n\t\tvalue: 'popular',\n\t},\n\t{\n\t\tlabel: __('Alphabetical', 'buddypress' ),\n\t\tvalue: 'alphabetical',\n\t},\n];\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblockEditor: {\n\t\tInspectorControls,\n\t},\n\tcomponents: {\n\t\tDisabled,\n\t\tPanelBody,\n\t\tRangeControl,\n\t\tSelectControl,\n\t\tTextControl,\n\t\tToggleControl,\n\t},\n\telement: {\n\t\tFragment,\n\t\tcreateElement,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n\tserverSideRender: ServerSideRender,\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport { TYPES } from './constants';\n\nconst editDynamicGroupsBlock = ( { attributes, setAttributes } ) => {\n\tconst { title, maxGroups, groupDefault, linkTitle } = attributes;\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Title', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ ( text ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: text } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Max groups to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ maxGroups }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { maxGroups: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 10 }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Default groups to show', 'buddypress' ) }\n\t\t\t\t\t\tvalue={ groupDefault }\n\t\t\t\t\t\toptions={ TYPES }\n\t\t\t\t\t\tonChange={ ( option ) => {\n\t\t\t\t\t\t\tsetAttributes( { groupDefault: option } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Link block title to Groups directory', 'buddypress' ) }\n\t\t\t\t\t\tchecked={ !! linkTitle }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( { linkTitle: ! linkTitle } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/dynamic-groups\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nexport default editDynamicGroupsBlock;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tcreateBlock,\n\t},\n} = wp;\n\n/**\n * Transforms Legacy Widget to Dynamic Groups Block.\n *\n * @type {Object}\n */\nconst transforms = {\n\tfrom: [\n\t\t{\n\t\t\ttype: 'block',\n\t\t\tblocks: [ 'core/legacy-widget' ],\n\t\t\tisMatch: ( { idBase, instance } ) => {\n\t\t\t\tif ( ! instance ||Â ! instance.raw ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn idBase === 'bp_groups_widget';\n\t\t\t},\n\t\t\ttransform: ( { instance } ) => {\n\t\t\t\treturn createBlock( 'bp/dynamic-groups', {\n\t\t\t\t\ttitle: instance.raw.title,\n\t\t\t\t\tmaxGroups: instance.raw.max_groups,\n\t\t\t\t\tgroupDefault: instance.raw.group_default,\n\t\t\t\t\tlinkTitle: instance.raw.link_title,\n\t\t\t\t} );\n\t\t\t},\n\t\t},\n\t],\n};\n\nexport default transforms;\n","/**\n * WordPress dependencies.\n */\nconst {\n\tblocks: {\n\t\tregisterBlockType,\n\t},\n\ti18n: {\n\t\t__,\n\t},\n} = wp;\n\n/**\n * Internal dependencies.\n */\nimport editDynamicGroupsBlock from './dynamic-groups/edit';\nimport transforms from './dynamic-groups/transforms';\n\nregisterBlockType( 'bp/dynamic-groups', {\n\ttitle: __( 'Dynamic Groups List', 'buddypress' ),\n\tdescription: __( 'A dynamic list of recently active, popular, newest, or alphabetical groups.', 'buddypress' ),\n\ticon: {\n\t\tbackground: '#fff',\n\t\tforeground: '#d84800',\n\t\tsrc: 'buddicons-groups',\n\t},\n\tcategory: 'buddypress',\n\tattributes: {\n\t\ttitle: {\n\t\t\ttype: 'string',\n\t\t\tdefault: __( 'Groups', 'buddypress' ),\n\t\t},\n\t\tmaxGroups: {\n\t\t\ttype: 'number',\n\t\t\tdefault: 5\n\t\t},\n\t\tgroupDefault: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'active',\n\t\t},\n\t\tlinkTitle: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tedit: editDynamicGroupsBlock,\n\ttransforms: transforms,\n} );\n"]}