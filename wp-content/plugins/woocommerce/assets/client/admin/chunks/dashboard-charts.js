"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[2397],{47478:(e,o,t)=>{t.d(o,{Z:()=>g});var r=t(69307),a=t(65736),c=t(94333),l=t(69771),s=t(9818),n=t(92819),i=t(7862),m=t.n(i),d=t(86020),u=t(67221),p=t(81921),_=t(17844),h=t(15152),y=t(10431);function w(e,o,t={}){if(!e||0===e.length)return null;const r=e.slice(0),a=r.pop();if(a.showFilters(o,t)){const e=(0,y.flattenFilters)(a.filters),t=o[a.param]||a.defaultValue||"all";return(0,n.find)(e,{value:t})}return w(r,o,t)}function b(e){return o=>(0,l.format)(e,o)}function f(e){if(e?.data?.intervals?.length>1){const o=e.data.intervals[0].date_start,t=e.data.intervals[e.data.intervals.length-1].date_end;if((0,p.containsLeapYear)(o,t))return!0}return!1}class v extends r.Component{shouldComponentUpdate(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!(0,n.isEqual)(e.query,this.props.query)}getItemChartData(){const{primaryData:e,selectedChart:o}=this.props;return e.data.intervals.map((function(e){const t={};return e.subtotals.segments.forEach((function(e){if(e.segment_label){const r=t[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label;t[e.segment_id]={label:r,value:e.subtotals[o.key]||0}}})),{date:(0,l.format)("Y-m-d\\TH:i:s",e.date_start),...t}}))}getTimeChartData(){const{query:e,primaryData:o,secondaryData:t,selectedChart:r,defaultDateRange:a}=this.props,c=(0,p.getIntervalForQuery)(e,a),{primary:s,secondary:n}=(0,p.getCurrentDates)(e,a);return function(e,o,t,r,a,c,s){const n=f(e),i=f(o),m=[...e.data.intervals],d=[...o.data.intervals],u=[];for(let e=0;e<m.length;e++){const o=m[e],_=(0,l.format)("Y-m-d\\TH:i:s",o.date_start),h=`${t.label} (${t.range})`,y=o.date_start,w=o.subtotals[c]||0,b=d[e],f=`${r.label} (${r.range})`;let v=(0,p.getPreviousDate)(o.date_start,t.after,r.after,a,s).format("YYYY-MM-DD HH:mm:ss"),g=b&&b.subtotals[c]||0;if("day"===s&&n&&!i&&d?.[e]){const t=new Date(o.date_start),r=new Date(d[e].date_start);(0,p.isLeapYear)(t.getFullYear())&&1===t.getMonth()&&29===t.getDate()&&2===r.getMonth()&&1===r.getDate()&&(v="-",g=0,d.splice(e,0,d[e]))}u.push({date:_,primary:{label:h,labelDate:y,value:w},secondary:{label:f,labelDate:v,value:g}})}return u}(o,t,s,n,e.compare,r.key,c)}getTimeChartTotals(){const{primaryData:e,secondaryData:o,selectedChart:t}=this.props;return{primary:(0,n.get)(e,["data","totals",t.key],null),secondary:(0,n.get)(o,["data","totals",t.key],null)}}renderChart(e,o,t,c){const{emptySearchResults:l,filterParam:s,interactiveLegend:n,itemsLabel:i,legendPosition:m,path:_,query:h,selectedChart:y,showHeaderControls:w,primaryData:f,defaultDateRange:v}=this.props,g=(0,p.getIntervalForQuery)(h,v),C=(0,p.getAllowedIntervalsForQuery)(h,v),x=(0,p.getDateFormatsForInterval)(g,f.data.intervals.length,{type:"php"}),S=l?(0,a.__)("No data for the current search","woocommerce"):(0,a.__)("No data for the selected date range","woocommerce"),{formatAmount:k,getCurrencyConfig:T}=this.context;return(0,r.createElement)(d.Chart,{allowedIntervals:C,data:t,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:S,filterParam:s,interactiveLegend:n,interval:g,isRequesting:o,itemsLabel:i,legendPosition:m,legendTotals:c,mode:e,path:_,query:h,screenReaderFormat:b(x.screenReaderFormat),showHeaderControls:w,title:y.label,tooltipLabelFormat:b(x.tooltipLabelFormat),tooltipTitle:"time-comparison"===e&&y.label||null,tooltipValueFormat:(0,u.getTooltipValueFormat)(y.type,k),chartType:(0,p.getChartTypeForQuery)(h),valueType:y.type,xFormat:b(x.xFormat),x2Format:b(x.x2Format),currency:T()})}renderItemComparison(){const{isRequesting:e,primaryData:o}=this.props;if(o.isError)return(0,r.createElement)(h.Z,null);const t=e||o.isRequesting,a=this.getItemChartData();return this.renderChart("item-comparison",t,a)}renderTimeComparison(){const{isRequesting:e,primaryData:o,secondaryData:t}=this.props;if(!o||o.isError||t.isError)return(0,r.createElement)(h.Z,null);const a=e||o.isRequesting||t.isRequesting,c=this.getTimeChartData(),l=this.getTimeChartTotals();return this.renderChart("time-comparison",a,c,l)}render(){const{mode:e}=this.props;return"item-comparison"===e?this.renderItemComparison():this.renderTimeComparison()}}v.contextType=_.CurrencyContext,v.propTypes={filters:m().array,isRequesting:m().bool,itemsLabel:m().string,limitProperties:m().array,mode:m().string,path:m().string.isRequired,primaryData:m().object,query:m().object.isRequired,secondaryData:m().object,selectedChart:m().shape({key:m().string.isRequired,label:m().string.isRequired,order:m().oneOf(["asc","desc"]),orderby:m().string,type:m().oneOf(["average","number","currency"]).isRequired}).isRequired},v.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};const g=(0,c.compose)((0,s.withSelect)(((e,o)=>{const{charts:t,endpoint:r,filters:a,isRequesting:c,limitProperties:l,query:s,advancedFilters:i}=o,m=l||[r],d=w(a,s),p=(0,n.get)(d,["settings","param"]),_=o.mode||function(e,o){if(e&&o){const t=(0,n.get)(e,["settings","param"]);if(!t||Object.keys(o).includes(t))return(0,n.get)(e,["chartMode"])}return null}(d,s)||"time-comparison",{woocommerce_default_date_range:h}=e(u.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),y=e(u.REPORTS_STORE_NAME),b={mode:_,filterParam:p,defaultDateRange:h};if(c)return b;const f=m.some((e=>s[e]&&s[e].length));if(s.search&&!f)return{...b,emptySearchResults:!0};const v=t&&t.map((e=>e.key)),g=(0,u.getReportChartData)({endpoint:r,dataType:"primary",query:s,selector:y,limitBy:m,filters:a,advancedFilters:i,defaultDateRange:h,fields:v});if("item-comparison"===_)return{...b,primaryData:g};const C=(0,u.getReportChartData)({endpoint:r,dataType:"secondary",query:s,selector:y,limitBy:m,filters:a,advancedFilters:i,defaultDateRange:h,fields:v});return{...b,primaryData:g,secondaryData:C}})))(v)},15152:(e,o,t)=>{t.d(o,{Z:()=>i});var r=t(69307),a=t(65736),c=t(7862),l=t.n(c),s=t(86020);function n({className:e}){const o=(0,a.__)("There was an error getting your stats. Please try again.","woocommerce"),t=(0,a.__)("Reload","woocommerce");return(0,r.createElement)(s.EmptyContent,{className:e,title:o,actionLabel:t,actionCallback:()=>{window.location.reload()}})}n.propTypes={className:l().string};const i=n},1602:(e,o,t)=>{t.d(o,{O3:()=>i,be:()=>m,u8:()=>u});var r=t(65736),a=t(92694),c=t(9818),l=t(75606),s=t(20513);const{addCesSurveyForAnalytics:n}=(0,c.dispatch)(l.STORE_KEY),i=(0,a.applyFilters)("woocommerce_admin_coupons_report_charts",[{key:"orders_count",label:(0,r.__)("Discounted orders","woocommerce"),order:"desc",orderby:"orders_count",type:"number"},{key:"amount",label:(0,r.__)("Amount","woocommerce"),order:"desc",orderby:"amount",type:"currency"}]),m=(0,a.applyFilters)("woocommerce_admin_coupon_report_advanced_filters",{filters:{},title:(0,r._x)("Coupons match <select/> filters","A sentence describing filters for Coupons. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce")}),d=[{label:(0,r.__)("All coupons","woocommerce"),value:"all"},{label:(0,r.__)("Single coupon","woocommerce"),value:"select_coupon",chartMode:"item-comparison",subFilters:[{component:"Search",value:"single_coupon",chartMode:"item-comparison",path:["select_coupon"],settings:{type:"coupons",param:"coupons",getLabels:s.hQ,labels:{placeholder:(0,r.__)("Type to search for a coupon","woocommerce"),button:(0,r.__)("Single Coupon","woocommerce")}}}]},{label:(0,r.__)("Comparison","woocommerce"),value:"compare-coupons",settings:{type:"coupons",param:"coupons",getLabels:s.hQ,labels:{title:(0,r.__)("Compare Coupon Codes","woocommerce"),update:(0,r.__)("Compare","woocommerce"),helpText:(0,r.__)("Check at least two coupon codes below to compare","woocommerce")},onClick:n}}];Object.keys(m.filters).length&&d.push({label:(0,r.__)("Advanced filters","woocommerce"),value:"advanced"});const u=(0,a.applyFilters)("woocommerce_admin_coupons_report_filters",[{label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:d}])},65925:(e,o,t)=>{t.d(o,{O3:()=>l,be:()=>n,u8:()=>s});var r=t(65736),a=t(92694),c=t(20513);const l=(0,a.applyFilters)("woocommerce_admin_downloads_report_charts",[{key:"download_count",label:(0,r.__)("Downloads","woocommerce"),type:"number"}]),s=(0,a.applyFilters)("woocommerce_admin_downloads_report_filters",[{label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:(0,r.__)("All downloads","woocommerce"),value:"all"},{label:(0,r.__)("Advanced filters","woocommerce"),value:"advanced"}]}]),n=(0,a.applyFilters)("woocommerce_admin_downloads_report_advanced_filters",{title:(0,r._x)("Downloads match <select/> filters","A sentence describing filters for Downloads. See screen shot for context: https://cloudup.com/ccxhyH2mEDg","woocommerce"),filters:{product:{labels:{add:(0,r.__)("Product","woocommerce"),placeholder:(0,r.__)("Search","woocommerce"),remove:(0,r.__)("Remove product filter","woocommerce"),rule:(0,r.__)("Select a product filter match","woocommerce"),title:(0,r.__)("<title>Product</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select product","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","products","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","products","woocommerce")}],input:{component:"Search",type:"products",getLabels:c.oC}},customer:{labels:{add:(0,r.__)("Username","woocommerce"),placeholder:(0,r.__)("Search customer username","woocommerce"),remove:(0,r.__)("Remove customer username filter","woocommerce"),rule:(0,r.__)("Select a customer username filter match","woocommerce"),title:(0,r.__)("<title>Username</title> <rule/> <filter />","woocommerce"),filter:(0,r.__)("Select customer username","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","customer usernames","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","customer usernames","woocommerce")}],input:{component:"Search",type:"usernames",getLabels:c.jk}},order:{labels:{add:(0,r.__)("Order #","woocommerce"),placeholder:(0,r.__)("Search order number","woocommerce"),remove:(0,r.__)("Remove order number filter","woocommerce"),rule:(0,r.__)("Select a order number filter match","woocommerce"),title:(0,r.__)("<title>Order #</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select order number","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","order numbers","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","order numbers","woocommerce")}],input:{component:"Search",type:"orders",getLabels:async e=>{const o=e.split(",");return await o.map((e=>({id:e,label:"#"+e})))}}},ip_address:{labels:{add:(0,r.__)("IP Address","woocommerce"),placeholder:(0,r.__)("Search IP address","woocommerce"),remove:(0,r.__)("Remove IP address filter","woocommerce"),rule:(0,r.__)("Select an IP address filter match","woocommerce"),title:(0,r.__)("<title>IP Address</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select IP address","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","IP addresses","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","IP addresses","woocommerce")}],input:{component:"Search",type:"downloadIps",getLabels:async e=>{const o=e.split(",");return await o.map((e=>({id:e,label:e})))}}}}})},25447:(e,o,t)=>{t.d(o,{O3:()=>s,be:()=>i,u8:()=>n});var r=t(65736),a=t(92694),c=t(20513),l=t(17062);const s=(0,a.applyFilters)("woocommerce_admin_orders_report_charts",[{key:"orders_count",label:(0,r.__)("Orders","woocommerce"),type:"number"},{key:"net_revenue",label:(0,r.__)("Net sales","woocommerce"),order:"desc",orderby:"net_total",type:"currency"},{key:"avg_order_value",label:(0,r.__)("Average order value","woocommerce"),type:"currency"},{key:"avg_items_per_order",label:(0,r.__)("Average items per order","woocommerce"),order:"desc",orderby:"num_items_sold",type:"average"}]),n=(0,a.applyFilters)("woocommerce_admin_orders_report_filters",[{label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:(0,r.__)("All orders","woocommerce"),value:"all"},{label:(0,r.__)("Advanced filters","woocommerce"),value:"advanced"}]}]),i=(0,a.applyFilters)("woocommerce_admin_orders_report_advanced_filters",{title:(0,r._x)("Orders match <select/> filters","A sentence describing filters for Orders. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce"),filters:{status:{labels:{add:(0,r.__)("Order status","woocommerce"),remove:(0,r.__)("Remove order status filter","woocommerce"),rule:(0,r.__)("Select an order status filter match","woocommerce"),title:(0,r.__)("<title>Order status</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select an order status","woocommerce")},rules:[{value:"is",label:(0,r._x)("Is","order status","woocommerce")},{value:"is_not",label:(0,r._x)("Is Not","order status","woocommerce")}],input:{component:"SelectControl",options:Object.keys(l.rq).map((e=>({value:e,label:l.rq[e]})))}},product:{labels:{add:(0,r.__)("Product","woocommerce"),placeholder:(0,r.__)("Search products","woocommerce"),remove:(0,r.__)("Remove product filter","woocommerce"),rule:(0,r.__)("Select a product filter match","woocommerce"),title:(0,r.__)("<title>Product</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select products","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","products","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","products","woocommerce")}],input:{component:"Search",type:"products",getLabels:c.oC}},variation:{labels:{add:(0,r.__)("Product variation","woocommerce"),placeholder:(0,r.__)("Search product variations","woocommerce"),remove:(0,r.__)("Remove product variation filter","woocommerce"),rule:(0,r.__)("Select a product variation filter match","woocommerce"),title:(0,r.__)("<title>Product variation</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select variation","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","variations","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","variations","woocommerce")}],input:{component:"Search",type:"variations",getLabels:c.uC}},coupon:{labels:{add:(0,r.__)("Coupon code","woocommerce"),placeholder:(0,r.__)("Search coupons","woocommerce"),remove:(0,r.__)("Remove coupon filter","woocommerce"),rule:(0,r.__)("Select a coupon filter match","woocommerce"),title:(0,r.__)("<title>Coupon code</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select coupon codes","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","coupon code","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","coupon code","woocommerce")}],input:{component:"Search",type:"coupons",getLabels:c.hQ}},customer_type:{labels:{add:(0,r.__)("Customer type","woocommerce"),remove:(0,r.__)("Remove customer filter","woocommerce"),rule:(0,r.__)("Select a customer filter match","woocommerce"),title:(0,r.__)("<title>Customer is</title> <filter/>","woocommerce"),filter:(0,r.__)("Select a customer type","woocommerce")},input:{component:"SelectControl",options:[{value:"new",label:(0,r.__)("New","woocommerce")},{value:"returning",label:(0,r.__)("Returning","woocommerce")}],defaultOption:"new"}},refunds:{labels:{add:(0,r.__)("Refund","woocommerce"),remove:(0,r.__)("Remove refund filter","woocommerce"),rule:(0,r.__)("Select a refund filter match","woocommerce"),title:(0,r.__)("<title>Refund</title> <filter/>","woocommerce"),filter:(0,r.__)("Select a refund type","woocommerce")},input:{component:"SelectControl",options:[{value:"all",label:(0,r.__)("All","woocommerce")},{value:"partial",label:(0,r.__)("Partially refunded","woocommerce")},{value:"full",label:(0,r.__)("Fully refunded","woocommerce")},{value:"none",label:(0,r.__)("None","woocommerce")}],defaultOption:"all"}},tax_rate:{labels:{add:(0,r.__)("Tax rate","woocommerce"),placeholder:(0,r.__)("Search tax rates","woocommerce"),remove:(0,r.__)("Remove tax rate filter","woocommerce"),rule:(0,r.__)("Select a tax rate filter match","woocommerce"),title:(0,r.__)("<title>Tax Rate</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select tax rates","woocommerce")},rules:[{value:"includes",label:(0,r._x)("Includes","tax rate","woocommerce")},{value:"excludes",label:(0,r._x)("Excludes","tax rate","woocommerce")}],input:{component:"Search",type:"taxes",getLabels:c.FI}},attribute:{allowMultiple:!0,labels:{add:(0,r.__)("Product attribute","woocommerce"),placeholder:(0,r.__)("Search product attributes","woocommerce"),remove:(0,r.__)("Remove product attribute filter","woocommerce"),rule:(0,r.__)("Select a product attribute filter match","woocommerce"),title:(0,r.__)("<title>Product attribute</title> <rule/> <filter/>","woocommerce"),filter:(0,r.__)("Select attributes","woocommerce")},rules:[{value:"is",label:(0,r._x)("Is","product attribute","woocommerce")},{value:"is_not",label:(0,r._x)("Is Not","product attribute","woocommerce")}],input:{component:"ProductAttribute"}}}})},25297:(e,o,t)=>{t.d(o,{O3:()=>i,be:()=>u,u8:()=>p});var r=t(65736),a=t(92694),c=t(9818),l=t(75606),s=t(20513);const{addCesSurveyForAnalytics:n}=(0,c.dispatch)(l.STORE_KEY),i=(0,a.applyFilters)("woocommerce_admin_products_report_charts",[{key:"items_sold",label:(0,r.__)("Items sold","woocommerce"),order:"desc",orderby:"items_sold",type:"number"},{key:"net_revenue",label:(0,r.__)("Net sales","woocommerce"),order:"desc",orderby:"net_revenue",type:"currency"},{key:"orders_count",label:(0,r.__)("Orders","woocommerce"),order:"desc",orderby:"orders_count",type:"number"}]),m={label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:(0,r.__)("All products","woocommerce"),value:"all"},{label:(0,r.__)("Single product","woocommerce"),value:"select_product",chartMode:"item-comparison",subFilters:[{component:"Search",value:"single_product",chartMode:"item-comparison",path:["select_product"],settings:{type:"products",param:"products",getLabels:s.oC,labels:{placeholder:(0,r.__)("Type to search for a product","woocommerce"),button:(0,r.__)("Single product","woocommerce")}}}]},{label:(0,r.__)("Comparison","woocommerce"),value:"compare-products",chartMode:"item-comparison",settings:{type:"products",param:"products",getLabels:s.oC,labels:{helpText:(0,r.__)("Check at least two products below to compare","woocommerce"),placeholder:(0,r.__)("Search for products to compare","woocommerce"),title:(0,r.__)("Compare Products","woocommerce"),update:(0,r.__)("Compare","woocommerce")},onClick:n}}]},d={showFilters:e=>"single_product"===e.filter&&!!e.products&&e["is-variable"],staticParams:["filter","products","chartType","paged","per_page"],param:"filter-variations",filters:[{label:(0,r.__)("All variations","woocommerce"),chartMode:"item-comparison",value:"all"},{label:(0,r.__)("Single variation","woocommerce"),value:"select_variation",subFilters:[{component:"Search",value:"single_variation",path:["select_variation"],settings:{type:"variations",param:"variations",getLabels:s.uC,labels:{placeholder:(0,r.__)("Type to search for a variation","woocommerce"),button:(0,r.__)("Single variation","woocommerce")}}}]},{label:(0,r.__)("Comparison","woocommerce"),chartMode:"item-comparison",value:"compare-variations",settings:{type:"variations",param:"variations",getLabels:s.uC,labels:{helpText:(0,r.__)("Check at least two variations below to compare","woocommerce"),placeholder:(0,r.__)("Search for variations to compare","woocommerce"),title:(0,r.__)("Compare Variations","woocommerce"),update:(0,r.__)("Compare","woocommerce")}}}]},u=(0,a.applyFilters)("woocommerce_admin_products_report_advanced_filters",{filters:{},title:(0,r._x)("Products Match <select/> Filters","A sentence describing filters for Products. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce")});Object.keys(u.filters).length&&(m.filters.push({label:(0,r.__)("Advanced Filters","woocommerce"),value:"advanced"}),d.filters.push({label:(0,r.__)("Advanced Filters","woocommerce"),value:"advanced"}));const p=(0,a.applyFilters)("woocommerce_admin_products_report_filters",[m,d])},74457:(e,o,t)=>{t.d(o,{O3:()=>c,be:()=>l,u8:()=>n});var r=t(65736),a=t(92694);const c=(0,a.applyFilters)("woocommerce_admin_revenue_report_charts",[{key:"gross_sales",label:(0,r.__)("Gross sales","woocommerce"),order:"desc",orderby:"gross_sales",type:"currency",isReverseTrend:!1},{key:"refunds",label:(0,r.__)("Returns","woocommerce"),order:"desc",orderby:"refunds",type:"currency",isReverseTrend:!0},{key:"coupons",label:(0,r.__)("Coupons","woocommerce"),order:"desc",orderby:"coupons",type:"currency",isReverseTrend:!1},{key:"net_revenue",label:(0,r.__)("Net sales","woocommerce"),orderby:"net_revenue",type:"currency",isReverseTrend:!1,labelTooltipText:(0,r.__)("Full refunds are not deducted from tax or net sales totals","woocommerce")},{key:"taxes",label:(0,r.__)("Taxes","woocommerce"),order:"desc",orderby:"taxes",type:"currency",isReverseTrend:!1,labelTooltipText:(0,r.__)("Full refunds are not deducted from tax or net sales totals","woocommerce")},{key:"shipping",label:(0,r.__)("Shipping","woocommerce"),orderby:"shipping",type:"currency",isReverseTrend:!1},{key:"total_sales",label:(0,r.__)("Total sales","woocommerce"),order:"desc",orderby:"total_sales",type:"currency",isReverseTrend:!1}]),l=(0,a.applyFilters)("woocommerce_admin_revenue_report_advanced_filters",{filters:{},title:(0,r._x)("Revenue Matches <select/> Filters","A sentence describing filters for Revenue. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce")}),s=[];Object.keys(l.filters).length&&(s.push({label:(0,r.__)("All Revenue","woocommerce"),value:"all"}),s.push({label:(0,r.__)("Advanced Filters","woocommerce"),value:"advanced"}));const n=(0,a.applyFilters)("woocommerce_admin_revenue_report_filters",[{label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>s.length>0,filters:s}])},56703:(e,o,t)=>{t.d(o,{O3:()=>d,be:()=>u,u8:()=>_});var r=t(65736),a=t(92694),c=t(75606),l=t(67221),s=t(9818),n=t(20513),i=t(86806);const{addCesSurveyForAnalytics:m}=(0,s.dispatch)(c.STORE_KEY),d=(0,a.applyFilters)("woocommerce_admin_taxes_report_charts",[{key:"total_tax",label:(0,r.__)("Total tax","woocommerce"),order:"desc",orderby:"total_tax",type:"currency"},{key:"order_tax",label:(0,r.__)("Order tax","woocommerce"),order:"desc",orderby:"order_tax",type:"currency"},{key:"shipping_tax",label:(0,r.__)("Shipping tax","woocommerce"),order:"desc",orderby:"shipping_tax",type:"currency"},{key:"orders_count",label:(0,r.__)("Orders","woocommerce"),order:"desc",orderby:"orders_count",type:"number"}]),u=(0,a.applyFilters)("woocommerce_admin_taxes_report_advanced_filters",{filters:{},title:(0,r._x)("Taxes match <select/> filters","A sentence describing filters for Taxes. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce")}),p=[{label:(0,r.__)("All taxes","woocommerce"),value:"all"},{label:(0,r.__)("Comparison","woocommerce"),value:"compare-taxes",chartMode:"item-comparison",settings:{type:"taxes",param:"taxes",getLabels:(0,n.qc)(l.NAMESPACE+"/taxes",(e=>({id:e.id,key:e.id,label:(0,i.I)(e)}))),labels:{helpText:(0,r.__)("Check at least two tax codes below to compare","woocommerce"),placeholder:(0,r.__)("Search for tax codes to compare","woocommerce"),title:(0,r.__)("Compare Tax Codes","woocommerce"),update:(0,r.__)("Compare","woocommerce")},onClick:m}}];Object.keys(u.filters).length&&p.push({label:(0,r.__)("Advanced filters","woocommerce"),value:"advanced"});const _=(0,a.applyFilters)("woocommerce_admin_taxes_report_filters",[{label:(0,r.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:p}])},86806:(e,o,t)=>{t.d(o,{I:()=>a});var r=t(65736);function a(e){return[e.country,e.state,e.name||(0,r.__)("TAX","woocommerce"),e.priority].map((e=>e.toString().toUpperCase().trim())).filter(Boolean).join("-")}},21999:(e,o,t)=>{t.r(o),t.d(o,{default:()=>q});var r=t(69307),a=t(65736),c=t(7829),l=t(39389),s=t(22578),n=t(7862),i=t.n(n),m=t(55609),d=t(86020),u=t(67221),p=t(81921),_=t(14599),h=t(37708),y=t(10431),w=t(74617),b=t(14812),f=t(47478);class v extends r.Component{constructor(...e){super(...e),(0,h.Z)(this,"handleChartClick",(()=>{const{selectedChart:e}=this.props;(0,y.getHistory)().push(this.getChartPath(e))}))}getChartPath(e){return(0,y.getNewPath)({chart:e.key},"/analytics/"+e.endpoint,(0,y.getPersistedQuery)())}render(){const{charts:e,endpoint:o,path:t,query:c,selectedChart:l,filters:s}=this.props;return l?(0,r.createElement)("div",{role:"presentation",className:"woocommerce-dashboard__chart-block-wrapper",onClick:this.handleChartClick},(0,r.createElement)(m.Card,{className:"woocommerce-dashboard__chart-block"},(0,r.createElement)(m.CardHeader,null,(0,r.createElement)(b.Text,{as:"h3",size:16,weight:600,color:"#23282d"},l.label)),(0,r.createElement)(m.CardBody,{size:null},(0,r.createElement)("a",{className:"screen-reader-text",href:(0,w.getAdminLink)(this.getChartPath(l))},(0,a.sprintf)((0,a.__)("%s Report","woocommerce"),l.label)),(0,r.createElement)(f.Z,{charts:e,endpoint:o,query:c,interactiveLegend:!1,legendPosition:"bottom",path:t,selectedChart:l,showHeaderControls:!1,filters:s})))):null}}v.propTypes={charts:i().array,endpoint:i().string.isRequired,path:i().string.isRequired,query:i().object.isRequired,selectedChart:i().object.isRequired};const g=v;var C=t(92694),x=t(25447),S=t(25297),k=t(74457),T=t(1602),E=t(56703),R=t(65925);const F={revenue:k.O3,orders:x.O3,products:S.O3,coupons:T.O3,taxes:E.O3,downloads:R.O3},O=[{label:(0,a.__)("Total sales","woocommerce"),report:"revenue",key:"total_sales"},{label:(0,a.__)("Net sales","woocommerce"),report:"revenue",key:"net_revenue"},{label:(0,a.__)("Orders","woocommerce"),report:"orders",key:"orders_count"},{label:(0,a.__)("Average order value","woocommerce"),report:"orders",key:"avg_order_value"},{label:(0,a.__)("Items sold","woocommerce"),report:"products",key:"items_sold"},{label:(0,a.__)("Returns","woocommerce"),report:"revenue",key:"refunds"},{label:(0,a.__)("Discounted orders","woocommerce"),report:"coupons",key:"orders_count"},{label:(0,a.__)("Gross discounted","woocommerce"),report:"coupons",key:"amount"},{label:(0,a.__)("Total tax","woocommerce"),report:"taxes",key:"total_tax"},{label:(0,a.__)("Order tax","woocommerce"),report:"taxes",key:"order_tax"},{label:(0,a.__)("Shipping tax","woocommerce"),report:"taxes",key:"shipping_tax"},{label:(0,a.__)("Shipping","woocommerce"),report:"revenue",key:"shipping"},{label:(0,a.__)("Downloads","woocommerce"),report:"downloads",key:"download_count"}],P=(0,C.applyFilters)("woocommerce_admin_dashboard_charts_filter",O.map((e=>({...F[e.report].find((o=>o.key===e.key)),label:e.label,endpoint:e.report})))),A=e=>{const{controls:o,hiddenBlocks:t,isFirst:n,isLast:i,onMove:h,onRemove:y,onTitleBlur:w,onTitleChange:b,onToggleHiddenBlock:f,path:v,title:C,titleInput:x,filters:S,defaultDateRange:k}=e,{updateUserPreferences:T,...E}=(0,u.useUserPreferences)(),[R,F]=(0,r.useState)(E.dashboard_chart_type||"line"),[O,A]=(0,r.useState)(E.dashboard_chart_interval||"day"),q={...e.query,chartType:R,interval:O},D=e=>()=>{F(e),T({dashboard_chart_type:e}),(0,_.recordEvent)("dash_charts_type_toggle",{chart_type:e})};return(0,r.createElement)("div",{className:"woocommerce-dashboard__dashboard-charts"},(0,r.createElement)(d.SectionHeader,{title:C||(0,a.__)("Charts","woocommerce"),menu:(0,r.createElement)(d.EllipsisMenu,{label:(0,a.__)("Choose which charts to display","woocommerce"),renderContent:({onToggle:e})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(d.MenuTitle,null,(0,a.__)("Charts","woocommerce")),(({hiddenBlocks:e,onToggleHiddenBlock:o})=>P.map((t=>{const a=t.endpoint+"_"+t.key,c=!e.includes(a);return(0,r.createElement)(d.MenuItem,{checked:c,isCheckbox:!0,isClickable:!0,key:t.endpoint+"_"+t.key,onInvoke:()=>{o(a)(),(0,_.recordEvent)("dash_charts_chart_toggle",{status:c?"off":"on",key:a})}},t.label)})))({hiddenBlocks:t,onToggleHiddenBlock:f}),(0,r.createElement)(o,{onToggle:e,onMove:h,onRemove:y,isFirst:n,isLast:i,onTitleBlur:w,onTitleChange:b,titleInput:x}))}),className:"has-interval-select"},(({chartInterval:e,setInterval:o,query:t,defaultDateRange:c})=>{const l=(0,p.getAllowedIntervalsForQuery)(t,c);if(!l||l.length<1)return null;const s={hour:(0,a.__)("By hour","woocommerce"),day:(0,a.__)("By day","woocommerce"),week:(0,a.__)("By week","woocommerce"),month:(0,a.__)("By month","woocommerce"),quarter:(0,a.__)("By quarter","woocommerce"),year:(0,a.__)("By year","woocommerce")};return(0,r.createElement)(m.SelectControl,{className:"woocommerce-chart__interval-select",value:e,options:l.map((e=>({value:e,label:s[e]}))),"aria-label":"Chart period",onChange:o})})({chartInterval:O,setInterval:e=>{A(e),T({dashboard_chart_interval:e}),(0,_.recordEvent)("dash_charts_interval",{interval:e})},query:q,defaultDateRange:k}),(0,r.createElement)(m.NavigableMenu,{className:"woocommerce-chart__types",orientation:"horizontal",role:"menubar"},(0,r.createElement)(m.Button,{className:(0,c.Z)("woocommerce-chart__type-button",{"woocommerce-chart__type-button-selected":!q.chartType||"line"===q.chartType}),title:(0,a.__)("Line chart","woocommerce"),"aria-checked":"line"===q.chartType,role:"menuitemradio",tabIndex:"line"===q.chartType?0:-1,onClick:D("line")},(0,r.createElement)(l.Z,null)),(0,r.createElement)(m.Button,{className:(0,c.Z)("woocommerce-chart__type-button",{"woocommerce-chart__type-button-selected":"bar"===q.chartType}),title:(0,a.__)("Bar chart","woocommerce"),"aria-checked":"bar"===q.chartType,role:"menuitemradio",tabIndex:"bar"===q.chartType?0:-1,onClick:D("bar")},(0,r.createElement)(s.Z,null)))),(({hiddenBlocks:e,path:o,query:t,filters:a})=>{const c=P.reduce(((e,o)=>(void 0===e[o.endpoint]&&(e[o.endpoint]=[]),e[o.endpoint].push(o),e)),{});return(0,r.createElement)("div",{className:"woocommerce-dashboard__columns"},P.map((l=>e.includes(l.endpoint+"_"+l.key)?null:(0,r.createElement)(g,{charts:c[l.endpoint],endpoint:l.endpoint,key:l.endpoint+"_"+l.key,path:o,query:t,selectedChart:l,filters:a}))))})({hiddenBlocks:t,path:v,query:q,filters:S}))};A.propTypes={path:i().string.isRequired,query:i().object.isRequired,defaultDateRange:i().string.isRequired};const q=A},20513:(e,o,t)=>{t.d(o,{FI:()=>w,V1:()=>b,YC:()=>p,hQ:()=>_,jk:()=>h,oC:()=>y,qc:()=>u,uC:()=>f});var r=t(65736),a=t(96483),c=t(86989),l=t.n(c),s=t(92819),n=t(10431),i=t(67221),m=t(86806),d=t(17062);function u(e,o=s.identity){return function(t="",r){const c="function"==typeof e?e(r):e,s=(0,n.getIdsFromQuery)(t);if(s.length<1)return Promise.resolve([]);const i={include:s.join(","),per_page:s.length};return l()({path:(0,a.addQueryArgs)(c,i)}).then((e=>e.map(o)))}}u(i.NAMESPACE+"/products/attributes",(e=>({key:e.id,label:e.name})));const p=u(i.NAMESPACE+"/products/categories",(e=>({key:e.id,label:e.name}))),_=u(i.NAMESPACE+"/coupons",(e=>({key:e.id,label:e.code}))),h=u(i.NAMESPACE+"/customers",(e=>({key:e.id,label:e.name}))),y=u(i.NAMESPACE+"/products",(e=>({key:e.id,label:e.name}))),w=u(i.NAMESPACE+"/taxes",(e=>({key:e.id,label:(0,m.I)(e)})));function b({attributes:e,name:o}){const t=(0,d.O3)("variationTitleAttributesSeparator"," - ");if(o&&o.indexOf(t)>-1)return o;const a=(e||[]).map((({name:e,option:o})=>(o||(e=e.charAt(0).toUpperCase()+e.slice(1),o=(0,r.sprintf)((0,r.__)("Any %s","woocommerce"),e)),o))).join(", ");return a?o+t+a:o}const f=u((({products:e})=>e?i.NAMESPACE+`/products/${e}/variations`:i.NAMESPACE+"/variations"),(e=>({key:e.id,label:b(e)})))},39389:(e,o,t)=>{o.Z=function(e){var o=e.size,t=void 0===o?24:o,r=e.onClick,s=(e.icon,e.className),n=function(e,o){if(null==e)return{};var t,r,a=function(e,o){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],0<=o.indexOf(t)||(a[t]=e[t]);return a}(e,o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],0<=o.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,c),i=["gridicon","gridicons-line-graph",s,!1,!1,!1].filter(Boolean).join(" ");return a.default.createElement("svg",l({className:i,height:t,width:t,onClick:r},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M3 19h18v2H3zm3-3c1.1 0 2-.9 2-2 0-.5-.2-1-.5-1.3L8.8 10H9c.5 0 1-.2 1.3-.5l2.7 1.4v.1c0 1.1.9 2 2 2s2-.9 2-2c0-.5-.2-.9-.5-1.3L17.8 7h.2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2c0 .5.2 1 .5 1.3L15.2 9H15c-.5 0-1 .2-1.3.5L11 8.2V8c0-1.1-.9-2-2-2s-2 .9-2 2c0 .5.2 1 .5 1.3L6.2 12H6c-1.1 0-2 .9-2 2s.9 2 2 2z"})))};var r,a=(r=t(99196))&&r.__esModule?r:{default:r},c=["size","onClick","icon","className"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var o,t=1;t<arguments.length;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},l.apply(this,arguments)}},22578:(e,o,t)=>{o.Z=function(e){var o=e.size,t=void 0===o?24:o,r=e.onClick,s=(e.icon,e.className),n=function(e,o){if(null==e)return{};var t,r,a=function(e,o){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],0<=o.indexOf(t)||(a[t]=e[t]);return a}(e,o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],0<=o.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,c),i=["gridicon","gridicons-stats-alt",s,!1,!1,!!function(e){return 0==e%18}(t)&&"needs-offset-y"].filter(Boolean).join(" ");return a.default.createElement("svg",l({className:i,height:t,width:t,onClick:r},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),a.default.createElement("g",null,a.default.createElement("path",{d:"M21 21H3v-2h18v2zM8 10H4v7h4v-7zm6-7h-4v14h4V3zm6 3h-4v11h4V6z"})))};var r,a=(r=t(99196))&&r.__esModule?r:{default:r},c=["size","onClick","icon","className"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var o,t=1;t<arguments.length;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},l.apply(this,arguments)}}}]);