"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[9669],{73224:(e,t,o)=>{o.d(t,{Z:()=>a});var c=o(69307),r=o(70444);const a=(0,c.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,c.createElement)(r.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))},86241:(e,t,o)=>{o.d(t,{Z:()=>a});var c=o(69307),r=o(70444);const a=(0,c.createElement)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,c.createElement)(r.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}))},84560:(e,t,o)=>{o.d(t,{Z:()=>a});var c=o(69307),r=o(70444);const a=(0,c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(r.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"}))},85797:(e,t,o)=>{o.d(t,{Z:()=>a});var c=o(69307),r=o(70444);const a=(0,c.createElement)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(r.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}))},55652:(e,t,o)=>{o.r(t),o.d(t,{default:()=>kt});var c=o(69307);const r=(0,c.createContext)({isLoading:!1,setIsLoading:()=>{},selectedTab:"",setSelectedTab:()=>{}});function a(e){const[t,o]=(0,c.useState)(!0),[a,n]=(0,c.useState)(""),s={isLoading:t,setIsLoading:o,selectedTab:a,setSelectedTab:n};return(0,c.createElement)(r.Provider,{value:s},e.children)}var n=o(65736);function s(){return(0,c.createElement)("h1",{className:"woocommerce-marketplace__header-title"},(0,n.__)("Extensions","woocommerce"))}var l=o(55609),i=o(70444);const m=(0,c.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(i.Path,{fillRule:"evenodd",d:"M7.25 16.437a6.5 6.5 0 1 1 9.5 0V16A2.75 2.75 0 0 0 14 13.25h-4A2.75 2.75 0 0 0 7.25 16v.437Zm1.5 1.193a6.47 6.47 0 0 0 3.25.87 6.47 6.47 0 0 0 3.25-.87V16c0-.69-.56-1.25-1.25-1.25h-4c-.69 0-1.25.56-1.25 1.25v1.63ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm10-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",clipRule:"evenodd"}));var u=o(23374),p=o(12532);const d=(0,c.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(i.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"}));var _=o(61935);function g(e){const{setIsModalOpen:t,disconnectURL:o}=e,[r,a]=(0,c.useState)(!1),s=()=>t(!1);return(0,c.createElement)(l.Modal,{title:(0,n.__)("Are you sure?","woocommerce"),onRequestClose:s,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay"},(0,c.createElement)("p",{className:"woocommerce-marketplace__header-account-modal-text"},(0,n.__)("Keep your your account connected to manage your subscriptions, get updates and support for your extensions and themes.","woocommerce")),(0,c.createElement)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group"},(0,c.createElement)(l.Button,{variant:"tertiary",href:o,onClick:()=>a(!r),isBusy:r,isDestructive:!0,className:"woocommerce-marketplace__header-account-modal-button"},(0,n.__)("Disconnect account","woocommerce")),(0,c.createElement)(l.Button,{variant:"primary",onClick:s,className:"woocommerce-marketplace__header-account-modal-button"},(0,n.__)("Keep connected","woocommerce"))))}const w="discover",y="https://woo.com",E="/extensions",N="/wp-json/wccom-extensions/1.0/search",M="/wp-json/wccom-extensions/1.0/categories",h=60,b=8,k=y+"/cart/",v=y+"/document/managing-woocommerce-com-subscriptions/#transfer-a-woocommerce-com-subscription",f=_.SX+"/plugins.php";function x(){var e,t,o;const[r,a]=(0,c.useState)(!1),s=()=>a(!0),i=(0,_.O3)("wccomHelper",{}),w=null!==(e=i?.isConnected)&&void 0!==e&&e,E=null!==(t=i?.connectURL)&&void 0!==t?t:"",N=i?.userEmail,M=null!==(o=i?.userAvatar)&&void 0!==o?o:m,h=y+"/my-dashboard/",b=w?h:E,k=w?(0,n.__)("Connected","woocommerce"):(0,n.__)("Not Connected","woocommerce");return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(l.DropdownMenu,{className:"woocommerce-marketplace__user-menu",icon:w?(0,c.createElement)("img",{src:M,alt:"",className:"woocommerce-marketplace__menu-avatar-image"}):m,label:(0,n.__)("User options","woocommerce")},(()=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)(l.MenuGroup,{className:"woocommerce-layout__homescreen-display-options",label:k},(0,c.createElement)(l.MenuItem,{className:"woocommerce-marketplace__menu-item",href:b},w?(0,c.createElement)(c.Fragment,null,(0,c.createElement)(u.Z,{icon:m,size:24,className:"woocommerce-marketplace__menu-icon"}),(0,c.createElement)("span",{className:"woocommerce-marketplace__main-text"},N)):(0,c.createElement)(c.Fragment,null,(0,c.createElement)(u.Z,{icon:m,size:24,className:"woocommerce-marketplace__menu-icon"}),(0,c.createElement)("div",{className:"woocommerce-marketplace__menu-text"},(0,n.__)("Connect account","woocommerce"),(0,c.createElement)("span",{className:"woocommerce-marketplace__sub-text"},(0,n.__)("Manage your subscriptions, get updates and support for your extensions and themes.","woocommerce"))))),(0,c.createElement)(l.MenuItem,{href:h},(0,c.createElement)(u.Z,{icon:p.Z,size:24,className:"woocommerce-marketplace__menu-icon"}),(0,n.__)("Woo.com account","woocommerce"))),w&&(0,c.createElement)(l.MenuGroup,{className:"woocommerce-layout__homescreen-display-options"},(0,c.createElement)(l.MenuItem,{onClick:s},(0,c.createElement)(u.Z,{icon:d,size:24,className:"woocommerce-marketplace__menu-icon"}),(0,n.__)("Disconnect account","woocommerce")))))),r&&(0,c.createElement)(g,{setIsModalOpen:a,disconnectURL:E}))}var D=o(87608),T=o.n(D),I=o(10431);const z={search:{name:"search",title:(0,n.__)("Search results","woocommerce")},discover:{name:"discover",title:(0,n.__)("Discover","woocommerce")},extensions:{name:"extensions",title:(0,n.__)("Browse","woocommerce")},themes:{name:"themes",title:(0,n.__)("Themes","woocommerce")},"my-subscriptions":{name:"my-subscriptions",title:(0,n.__)("My subscriptions","woocommerce")}},C=e=>{if(""===e)return z;const t={...z};return"search"!==e&&delete t.search,t},A=e=>{const{additionalClassNames:t}=e,o=(0,c.useContext)(r),{selectedTab:a,setSelectedTab:n}=o,[s,i]=(0,c.useState)(C("")),m=(0,I.useQuery)();return(0,c.useEffect)((()=>{m?.tab&&z[m.tab]?n(m.tab):Object.keys(m).length>0&&n(w)}),[m,n]),(0,c.useEffect)((()=>{i(C(a))}),[a]),(0,c.createElement)("nav",{className:T()("woocommerce-marketplace__tabs",t||[])},((e,t)=>{const{selectedTab:o,setSelectedTab:r}=e,a=e=>{e!==o&&(r(e),(e=>{(0,I.navigateTo)({url:(0,I.getNewPath)({tab:e===w?void 0:e},E,{})})})(e))},n=[];for(const e in t)n.push(z[e]?.href?(0,c.createElement)("a",{className:T()("woocommerce-marketplace__tab-button","components-button",`woocommerce-marketplace__tab-${e}`),href:z[e]?.href,key:e},z[e]?.title):(0,c.createElement)(l.Button,{className:T()("woocommerce-marketplace__tab-button",`woocommerce-marketplace__tab-${e}`,{"is-active":e===o}),onClick:()=>a(e),key:e},z[e]?.title));return n})(o,s))},j=(0,c.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(i.Path,{d:"M13.5 6C10.5 6 8 8.5 8 11.5c0 1.1.3 2.1.9 3l-3.4 3 1 1.1 3.4-2.9c1 .9 2.2 1.4 3.6 1.4 3 0 5.5-2.5 5.5-5.5C19 8.5 16.5 6 13.5 6zm0 9.5c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z"})),S=(0,n.__)("Search for extensions and themes","woocommerce"),L=function(){const[e,t]=(0,c.useState)(""),o=(0,I.useQuery)();(0,c.useEffect)((()=>{o.term?t(o.term):t("")}),[o.term]),(0,c.useEffect)((()=>{"search"!==o.tab&&t("")}),[o.tab]);const r=()=>{const t=e.trim(),o={};return""!==t&&(o.term=t,o.tab="search"),(0,I.navigateTo)({url:(0,I.getNewPath)(o,E,{})}),[]};return(0,c.createElement)("div",{className:"woocommerce-marketplace__search"},(0,c.createElement)("label",{className:"screen-reader-text",htmlFor:"woocommerce-marketplace-search-query"},S),(0,c.createElement)("input",{id:"woocommerce-marketplace-search-query",value:e,className:"woocommerce-marketplace__search-input",type:"search",name:"woocommerce-marketplace-search-query",placeholder:S,onChange:e=>{t(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&r(),"Escape"===e.key&&t("")}}),(0,c.createElement)("button",{id:"woocommerce-marketplace-search-button",className:"woocommerce-marketplace__search-button","aria-label":(0,n.__)("Search","woocommerce"),onClick:r},(0,c.createElement)(u.Z,{icon:j,size:32})))};function O(){return(0,c.createElement)("header",{className:"woocommerce-marketplace__header"},(0,c.createElement)(s,null),(0,c.createElement)(A,{additionalClassNames:["woocommerce-marketplace__header-tabs"]}),(0,c.createElement)(L,null),(0,c.createElement)("div",{className:"woocommerce-marketplace__header-meta"},(0,c.createElement)(x,null)))}let Q=function(e){return e.theme="theme",e.extension="extension",e}({}),U=function(e){return e.theme="theme",e.extension="extension",e.all="all",e}({});var P=o(14599),Y=o(86989),Z=o.n(Y),R=o(9818);let B=function(e){return e.Success="success",e.Error="error",e}({});const G={notices:{}},V=(0,R.createReduxStore)("woocommerce-admin/subscription-notices",{reducer(e=G,t){switch(t.type){case"ADD_NOTICE":return{...e,notices:{...e.notices,[t.productKey]:{productKey:t.productKey,message:t.message,status:t.status,options:t.options}}};case"REMOVE_NOTICE":const o={...e.notices};return o[t.productKey]&&delete o[t.productKey],{...e,notices:o}}return e},actions:{addNotice:(e,t,o,c)=>({type:"ADD_NOTICE",productKey:e,message:t,status:o,options:c}),removeNotice:e=>({type:"REMOVE_NOTICE",productKey:e})},selectors:{notices:e=>e?Object.values(e.notices):[],getNotice(e,t){if(e)return e.notices[t]}}});(0,R.register)(V);const H=100,F=new Map;function W(){for(;F.size>H;)F.delete(F.keys().next().value)}async function K(e,t){return F.get(e)?new Promise((t=>{t(F.get(e))})):new Promise(((o,c)=>{fetch(e,{signal:t}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((t=>{F.set(e,t),W(),o(t)})).catch((()=>{c()}))}))}async function J(){let e="/wc/v3/marketplace/featured";_.MV.userLocale&&(e=`${e}?locale=${_.MV.userLocale}`);try{return await async function(e){const t=JSON.stringify(e);return F.get(t)?new Promise((e=>{e(F.get(t))})):new Promise(((o,c)=>{Z()(e).then((e=>{F.set(t,e),W(),o(e)})).catch((()=>{c()}))}))}({path:e.toString()})}catch(e){return[]}}function X(e){if(!0===e.active)return Promise.resolve();const t=new URLSearchParams;return t.append("product_key",e.product_key),Z()({path:"/wc/v3/marketplace/subscriptions/connect".toString(),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t})}function q(e,t){return new Promise(((o,c)=>{window.wp.updates?window.wp.updates.ajax(e,{...t,success:e=>{!1===e.success&&c({success:!1,data:{message:e.errorMessage}}),o()},error:e=>{c({success:!1,data:{message:e.errorMessage}})}}):c((0,n.__)("Please reload and try again","woocommerce"))}))}function $(e,t,o,r){o===B.Error?(0,R.dispatch)(V).addNotice(e,t,o,r):(r?.icon||(r={...r,icon:(0,c.createElement)(l.Icon,{icon:"saved"})}),(0,R.dispatch)("core/notices").createSuccessNotice(t,r))}const ee=e=>{(0,R.dispatch)(V).removeNotice(e)},te=e=>({id:e.product_id,title:e.product_name,image:"",type:e.product_type,description:"",vendorName:"",vendorUrl:"",icon:e.product_icon,url:e.product_url,price:-1,averageRating:0,reviewsCount:0}),oe=(e,t)=>{if(!e)return e;const o=new URL(e);return o?(t.forEach((([e,t])=>{o.searchParams.set(e,t)})),o.toString()):e},ce=e=>oe(k,[["renew_product",e.product_id.toString()],["product_key",e.product_key],["order_id",e.order_id.toString()]]),re=e=>oe(k,[["add-to-cart",e.product_id.toString()]]),ae=function(e){var t;const{isLoading:o,type:r}=e,a=(0,I.useQuery)(),s=null!==(t=e.product)&&void 0!==t?t:{title:"",description:"",vendorName:"",vendorUrl:"",icon:"",url:"",price:0,image:""};function i(t,o){const c=e.tracksData;c.position&&(o.position=c.position),c.label&&(o.label=c.label),c.group&&(o.group=c.group),c.searchTerm&&(o.search_term=c.searchTerm),c.category&&(o.category=c.category),(0,P.queueRecordEvent)(t,o)}const m=r===Q.theme;let u=s?.vendorName;s?.vendorName&&s?.vendorUrl&&(u=(0,c.createElement)("a",{href:s.vendorUrl,rel:"noopener noreferrer",onClick:()=>{i("marketplace_product_card_vendor_clicked",{product:s.title,vendor:s.vendorName,product_type:r})}},s.vendorName));const p=T()("woocommerce-marketplace__product-card",`woocommerce-marketplace__product-card--${r}`,{"is-loading":o,"is-small":e.small});return(0,c.createElement)(l.Card,{className:p,"aria-hidden":o},(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__content"},m&&(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__image"},!o&&(0,c.createElement)("img",{className:"woocommerce-marketplace__product-card__image-inner",src:s.image,alt:s.title})),(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__header"},(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__details"},!m&&(0,c.createElement)(c.Fragment,null,o&&(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__icon"}),!o&&s.icon&&(0,c.createElement)("img",{className:"woocommerce-marketplace__product-card__icon",src:s.icon,alt:s.title})),(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__meta"},(0,c.createElement)("h2",{className:"woocommerce-marketplace__product-card__title"},(0,c.createElement)("a",{className:"woocommerce-marketplace__product-card__link",href:a.ref?oe(s.url,[["utm_content",a.ref]]):s.url,rel:"noopener noreferrer",onClick:()=>{i("marketplace_product_card_clicked",{product:s.title,vendor:s.vendorName,product_type:r})}},o?" ":s.title)),o&&(0,c.createElement)("p",{className:"woocommerce-marketplace__product-card__vendor"}),!o&&u&&(0,c.createElement)("p",{className:"woocommerce-marketplace__product-card__vendor"},(0,c.createElement)("span",null,(0,n.__)("By ","woocommerce")),u)))),!m&&(0,c.createElement)("p",{className:"woocommerce-marketplace__product-card__description"},!o&&s.description),(0,c.createElement)("div",{className:"woocommerce-marketplace__product-card__price"},!o&&(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"woocommerce-marketplace__product-card__price-label"},0===s.price?(0,n.__)("Free download","woocommerce"):"$"+s.price),(0,c.createElement)("span",{className:"woocommerce-marketplace__product-card__price-billing"},0===s.price?"":(0,n.__)(" annually","woocommerce"))))))};function ne(e){const t=(0,_.O3)("wccomHelper",{}),o=T()("woocommerce-marketplace__product-list-content",e.className);return(0,c.createElement)("div",{className:o},e.products.map(((o,r)=>(0,c.createElement)(ae,{key:o.id,type:e.type,product:{title:o.title,image:o.image,type:o.type,icon:o.icon,vendorName:o.vendorName,vendorUrl:o.vendorUrl?oe(o.vendorUrl,[["utm_source","extensionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","devpartner"]]):"",price:o.price,url:oe(o.url,Object.entries({...t.inAppPurchaseURLParams,...void 0!==e.productGroup?{utm_group:e.productGroup}:{}})),description:o.description},tracksData:{position:r+1,...o.label&&{label:o.label},...e.group&&{group:e.group},...e.searchTerm&&{searchTerm:e.searchTerm},...e.category&&{category:e.category}}}))))}var se=o(86020);function le(e){const{title:t,groupURL:o}=e,r=""===t,a=T()("woocommerce-marketplace__product-list-header",{"is-loading":r});return(0,c.createElement)("div",{className:a,"aria-hidden":r},(0,c.createElement)("h2",{className:"woocommerce-marketplace__product-list-title"},t),null!==o&&(0,c.createElement)("span",{className:"woocommerce-marketplace__product-list-link"},(0,c.createElement)(se.Link,{href:o,target:"_blank",onClick:()=>{(0,P.recordEvent)("marketplace_see_more_clicked",{group_title:t,group_url:o})}},(0,n.__)("See more","woocommerce"))))}function ie(e){const{title:t,products:o,groupURL:r,type:a,productGroup:n}=e;return(0,c.createElement)("div",{className:"woocommerce-marketplace__product-list"},(0,c.createElement)(le,{title:t,groupURL:r}),(0,c.createElement)(ne,{group:t,products:o,type:a,productGroup:n}))}function me(e){const{hasTitle:t,type:o}=e,r=e.placeholderCount||12;return(0,c.createElement)("div",{className:"woocommerce-marketplace__product-list"},!1!==t&&(0,c.createElement)(le,{title:"",groupURL:null}),(0,c.createElement)("div",{className:"woocommerce-marketplace__product-list-content"},[...Array(r)].map(((e,t)=>(0,c.createElement)(ae,{key:t,isLoading:!0,type:o,tracksData:{}})))))}function ue(){const[e,t]=(0,c.useState)([]),o=(0,c.useContext)(r),{isLoading:a,setIsLoading:n}=o;if((0,c.useEffect)((()=>{n(!0),J().then((e=>Array.isArray(e)?e:[])).then((e=>{t(e),function(e){const t=e.flatMap((e=>e.items)).map((e=>e.id));(0,P.recordEvent)("marketplace_discover_viewed",{view:"discover",product_ids:t})}(e)})).finally((()=>{n(!1)}))}),[]),a)return(0,c.createElement)("div",{className:"woocommerce-marketplace__discover"},(0,c.createElement)(me,{placeholderCount:9,type:Q.extension}));const s=e.flatMap((e=>e));return(0,c.createElement)("div",{className:"woocommerce-marketplace__discover"},s.map((e=>(0,c.createElement)(ie,{key:e.id,productGroup:e.id,title:e.title,products:e.items,groupURL:e.url,type:e.itemType}))))}var pe=o(12314);function de(e){const t=""===e.label,o=T()("woocommerce-marketplace__category-item-button",{"woocommerce-marketplace__category-item-button--selected":e.selected,"is-loading":t});return(0,c.createElement)("button",{className:o,onClick:function(e){const t=e.currentTarget.value;t&&(0,I.navigateTo)({url:(0,I.getNewPath)({category:t})})},value:e.slug,"aria-hidden":t},e.label)}var _e=o(86241),ge=o(73224);function we(e){function t(t){const o=t.currentTarget.value;o&&(e.onClick(),(0,I.navigateTo)({url:(0,I.getNewPath)({category:o})}))}return(0,c.createElement)("ul",{className:"woocommerce-marketplace__category-dropdown-list"},e.categories.map((o=>(0,c.createElement)("li",{className:"woocommerce-marketplace__category-dropdown-item",key:o.slug},(0,c.createElement)("button",{className:T()("woocommerce-marketplace__category-dropdown-item-button",{"woocommerce-marketplace__category-dropdown-item-button--selected":o.slug===e.selected?.slug}),value:o.slug,onClick:t},o.label)))))}function ye(e){return(0,c.createElement)(l.Dropdown,{renderToggle:({isOpen:t,onToggle:o})=>(0,c.createElement)("button",{onClick:()=>{t||(0,P.recordEvent)("marketplace_category_dropdown_opened",{type:e.type}),o()},className:e.buttonClassName,"aria-label":(0,n.__)("Toggle category dropdown","woocommerce")},e.label,(0,c.createElement)(u.Z,{icon:t?_e.Z:ge.Z,size:e.arrowIconSize})),className:e.className,renderContent:({onToggle:t})=>(0,c.createElement)(we,{categories:e.categories,selected:e.selected,onClick:t}),contentClassName:e.contentClassName})}const Ee={[Q.extension]:"_all",[Q.theme]:"themes"};function Ne(e){const[t,o]=(0,c.useState)([]),[r,a]=(0,c.useState)([]),[s,l]=(0,c.useState)(),[i,m]=(0,c.useState)(!1),u=(0,I.useQuery)();return(0,c.useEffect)((()=>{let o=Ee[e.type];u.category&&(o=u.category);const c=t.concat(r).find((e=>e.slug===o));c&&l(c)}),[u.category,e.type,t,r]),(0,c.useEffect)((()=>{m(!0),function(e){const t=new URL(y+M);return _.MV.userLocale&&t.searchParams.set("locale",_.MV.userLocale),e===Q.theme&&t.searchParams.set("parent","themes"),K(t.toString()).then((e=>e)).catch((()=>[]))}(e.type).then((e=>{const t=e.map((e=>({...e,selected:!1}))).filter((e=>"_featured"!==e.slug)),c=t.slice(0,7),r=t.slice(7);o(c),a(r)})).catch((()=>{o([]),a([])})).finally((()=>{m(!1)}))}),[e.type]),i?(0,c.createElement)(c.Fragment,null,(0,c.createElement)("ul",{className:"woocommerce-marketplace__category-selector"},[...Array(5)].map(((e,t)=>(0,c.createElement)("li",{key:t,className:"woocommerce-marketplace__category-item"},(0,c.createElement)(de,{slug:"",label:"",selected:!1})))))):(0,c.createElement)(c.Fragment,null,(0,c.createElement)("ul",{className:"woocommerce-marketplace__category-selector"},t.map((e=>(0,c.createElement)("li",{className:"woocommerce-marketplace__category-item",key:e.slug},(0,c.createElement)(de,(0,pe.Z)({},e,{selected:e.slug===s?.slug}))))),(0,c.createElement)("li",{className:"woocommerce-marketplace__category-item"},r.length>0&&(0,c.createElement)(ye,{type:e.type,label:(0,n.__)("More","woocommerce"),categories:r,buttonClassName:T()("woocommerce-marketplace__category-item-button",{"woocommerce-marketplace__category-item-button--selected":!!s&&r.find((e=>e.slug===s.slug))}),contentClassName:"woocommerce-marketplace__category-item-content",arrowIconSize:20,selected:s}))),(0,c.createElement)("div",{className:"woocommerce-marketplace__category-selector--full-width"},(0,c.createElement)(ye,{type:e.type,label:function(){const e=(0,n.__)("All Categories","woocommerce");return s?"All"===s.label?e:s.label:e}(),categories:t.concat(r),buttonClassName:"woocommerce-marketplace__category-dropdown-button",className:"woocommerce-marketplace__category-dropdown",contentClassName:"woocommerce-marketplace__category-dropdown-content",selected:s})))}function Me(e){const[t,o]=(0,c.useState)(),[r,a]=(0,c.useState)(!1),s=(0,I.useQuery)(),l="search"===s.tab&&s.section,i={[U.all]:["most-popular","popular-themes"],[U.theme]:["popular-themes"],[U.extension]:["most-popular"]};return(0,c.useEffect)((()=>{a(!0),J().then((t=>{const c=i[e.type];if(!c)return;const r=t.filter((e=>c.includes(e.id)));r&&(r.forEach((e=>{e.items=e.items.slice(0,4)})),o(r))})).catch((()=>{o(void 0)})).finally((()=>{a(!1)}))}),[]),(0,c.createElement)("div",{className:"woocommerce-marketplace__no-results"},function(){if(!l)return(0,c.createElement)(c.Fragment,null);if(e.type===U.all)return(0,c.createElement)(c.Fragment,null);let t=Q.extension;return e.type===U.theme&&(t=Q.theme),(0,c.createElement)(Ne,{type:t})}(),(0,c.createElement)("div",{className:"woocommerce-marketplace__no-results__content"},(0,c.createElement)("h2",{className:"woocommerce-marketplace__no-results__heading"},e.showHeading?e.heading:""),(0,c.createElement)("p",{className:"woocommerce-marketplace__no-results__description"},(0,n.__)("Try searching again using a different term, or take a look at our recommendations below.","woocommerce"))),(0,c.createElement)("div",{className:"woocommerce-marketplace__no-results__product-groups"},r?(0,c.createElement)(c.Fragment,null,(0,c.createElement)(me,{type:Q.extension,placeholderCount:4}),(0,c.createElement)(me,{type:Q.theme,placeholderCount:4})):t&&0!==t.length?(0,c.createElement)(c.Fragment,null,t.map((e=>{return(0,c.createElement)(ie,{title:(t=e.id,"popular-themes"===t?(0,n.__)("Our favorite themes","woocommerce"):(0,n.__)("Most popular extensions","woocommerce")),products:e.items,groupURL:e.url,productGroup:e.id,type:e.itemType,key:e.id});var t}))):(0,c.createElement)(c.Fragment,null)))}const he={[Q.extension]:{label:(0,n.__)("extensions","woocommerce"),singularLabel:(0,n.__)("extension","woocommerce")},[Q.theme]:{label:(0,n.__)("themes","woocommerce"),singularLabel:(0,n.__)("theme","woocommerce")}};function be(e){var t,o,a,s;const i=(0,c.useContext)(r),{isLoading:m}=i,u=he[e.type].label,p=he[e.type].singularLabel,d=(0,I.useQuery)(),_=d?.category,g=null!==(t=e.perPage)&&void 0!==t?t:h,w=null!==(o=e.showAllButton)&&void 0!==o&&o,y=null!==(a=e.products?.length)&&void 0!==a?a:0,E=null!==(s=e.products?.slice(0,g))&&void 0!==s?s:[];let N=(0,n.sprintf)((0,n.__)("0 %s found","woocommerce"),u);y>0&&(N=(0,n.sprintf)((0,n._n)("%1$s %2$s","%1$s %3$s",y,"woocommerce"),y,p,u));const M="woocommerce-marketplace__search-",b=T()(M+u),k=T()("woocommerce-marketplace__product-list-title",M+"product-list-title--"+u,{"is-loading":m}),v=T()("woocommerce-marketplace__view-all-button",M+"button-"+u);return(0,c.createElement)("div",{className:b},(0,c.createElement)("h2",{className:k},m?" ":N),function(){if(m)return(0,c.createElement)(c.Fragment,null,e.categorySelector&&(0,c.createElement)(Ne,{type:e.type}),(0,c.createElement)(me,{hasTitle:!1,type:e.type}));if(0===E.length){const t=e.type===Q.extension?U.extension:U.theme;return(0,c.createElement)(Me,{type:t,showHeading:!1})}const t=T()(w?"woocommerce-marketplace__product-list-content--collapsed":"");return(0,c.createElement)(c.Fragment,null,e.categorySelector&&(0,c.createElement)(Ne,{type:e.type}),(0,c.createElement)(ne,{products:E,type:e.type,className:t,searchTerm:e.searchTerm,category:_}),w&&(0,c.createElement)(l.Button,{className:v,variant:"secondary",text:(0,n.__)("View all","woocommerce"),onClick:()=>{return t=e.type,void(0,I.navigateTo)({url:(0,I.getNewPath)({section:t})});var t}}))}())}function ke(e){const t=e.products.filter((e=>e.type===Q.extension)),o=e.products.filter((e=>e.type===Q.theme)),a=(0,c.useContext)(r),{isLoading:s}=a,l=(0,I.useQuery)(),i=!!l.section,m=l.term?l.term:"";function u(e,t,o={}){var r,a,n;return(0,c.createElement)(be,{products:e,type:t,categorySelector:null!==(r=o.categorySelector)&&void 0!==r?r:i,searchTerm:m,showAllButton:null===(a=o.showAllButton)||void 0===a||a,perPage:null!==(n=o.perPage)&&void 0!==n?n:h})}function p(e={}){return u(t,Q.extension,e)}function d(e={}){return u(o,Q.theme,e)}return(0,c.createElement)("div",{className:"woocommerce-marketplace__search-results"},l?.section===U.extension?p({showAllButton:!1}):l?.section===U.theme?d({showAllButton:!1}):s?(0,c.createElement)(c.Fragment,null,p(),d()):s||0!==t.length||0!==o.length?0===o.length&&t.length>0?p({categorySelector:!0,showAllButton:!1,perPage:h}):0===t.length&&o.length>0?d({categorySelector:!0,showAllButton:!1,perPage:h}):(0,c.createElement)(c.Fragment,null,p({perPage:b}),d({perPage:b})):(0,c.createElement)(Me,{type:U.all,showHeading:!0,heading:(0,n.__)("No extensions or themes found…","woocommerce")}))}const ve=(0,c.createContext)({subscriptions:[],setSubscriptions:()=>{},loadSubscriptions:()=>new Promise((()=>{})),refreshSubscriptions:()=>new Promise((()=>{})),isLoading:!0,setIsLoading:()=>{}});function fe(e){const[t,o]=(0,c.useState)([]),[r,a]=(0,c.useState)(!0),s=e=>(!0===e&&a(!0),async function(){return await Z()({path:"/wc/v3/marketplace/subscriptions".toString()})}().then((e=>{o(e)})).finally((()=>{e&&a(!1)}))),l=e=>(e&&a(!0),async function(){return await Z()({path:"/wc/v3/marketplace/refresh".toString(),method:"POST"})}().then((e=>{o(e)})).finally((()=>{e&&a(!1)})));(0,c.useEffect)((()=>{new URLSearchParams(window.location.search).get("install")?l(!0).catch((e=>{$("woocommerce-marketplace-refresh-subscriptions",(0,n.sprintf)((0,n.__)("Error refreshing subscriptions: %s","woocommerce"),e.message),B.Error)})):s(!0).catch((e=>{$("woocommerce-marketplace-load-subscriptions",(0,n.sprintf)((0,n.__)("Error loading subscriptions: %s","woocommerce"),e.message),B.Error)}))}),[]);const i={subscriptions:t,setSubscriptions:o,loadSubscriptions:s,refreshSubscriptions:l,isLoading:r,setIsLoading:a};return(0,c.createElement)(ve.Provider,{value:i},e.children)}const xe=[{key:"name",label:(0,n.__)("Name","woocommerce")},{key:"expiry",label:(0,n.__)("Expiry/Renewal date","woocommerce")},{key:"autoRenew",label:(0,n.__)("Auto-renew","woocommerce")},{key:"version",label:(0,n.__)("Version","woocommerce")}];function De(e){if(e.isLoading)return(0,c.createElement)(se.TablePlaceholder,{caption:(0,n.__)("Loading your subscriptions","woocommerce"),headers:e.headers});const t=e.headers.map((e=>({...e,cellClassName:"woocommerce-marketplace__my-subscriptions__table__header--"+e.key})));return(0,c.createElement)(se.Table,{className:"woocommerce-marketplace__my-subscriptions__table",headers:t,rows:e.rows})}function Te(e){const t=[...xe,{key:"actions",label:(0,n.__)("Actions","woocommerce")}];if(!(e.isLoading||e.rows&&0!==e.rows.length)){const e=(0,I.getNewPath)({},E,{}),t=(0,c.createInterpolateElement)((0,n.__)("No extensions or themes installed. <a>Browse the Marketplace</a>","woocommerce"),{a:(0,c.createElement)("a",{href:e})});return(0,c.createElement)(se.EmptyTable,{numberOfRows:4},t)}return(0,c.createElement)(De,{rows:e.rows,isLoading:e.isLoading,headers:t})}function Ie(e){const t=[...xe,{key:"actions",label:(0,n.__)("Actions","woocommerce")}];return(0,c.createElement)(De,{rows:e.rows,isLoading:e.isLoading,headers:t})}var ze=o(69771);const Ce=(0,c.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(i.Path,{d:"M10.5 4v4h3V4H15v4h1.5a1 1 0 011 1v4l-3 4v2a1 1 0 01-1 1h-3a1 1 0 01-1-1v-2l-3-4V9a1 1 0 011-1H9V4h1.5zm.5 12.5v2h2v-2l3-4v-3H8v3l3 4z"}));let Ae=function(e){return e.Warning="warning",e.Error="error",e}({});function je(e){var t;const[o,r]=(0,c.useState)(!1),{loadSubscriptions:a}=(0,c.useContext)(ve),s=()=>{(0,P.recordEvent)("marketplace_product_connect_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id}),r(!0),ee(e.subscription.product_key),X(e.subscription).then((()=>{a(!1).then((()=>{$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s successfully connected.","woocommerce"),e.subscription.product_name),B.Success),r(!1),e.onClose&&e.onClose()}))})).catch((()=>{$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s couldn’t be connected.","woocommerce"),e.subscription.product_name),B.Error,{actions:[{label:(0,n.__)("Try again","woocommerce"),onClick:s}]}),r(!1),e.onClose&&e.onClose()}))};return(0,c.createElement)(l.Button,{onClick:s,variant:null!==(t=e.variant)&&void 0!==t?t:"secondary",isBusy:o,disabled:o},(0,n.__)("Connect","woocommerce"))}const Se={installingProducts:[]},Le=(0,R.createReduxStore)("woocommerce-admin/installing",{reducer(e=Se,t){switch(t.type){case"START_INSTALLING":return{...e,installingProducts:[...e.installingProducts,t.productKey]};case"STOP_INSTALLING":return{...e,installingProducts:[...e.installingProducts.filter((e=>e!==t.productKey))]}}return e},actions:{startInstalling:e=>({type:"START_INSTALLING",productKey:e}),stopInstalling:e=>({type:"STOP_INSTALLING",productKey:e})},selectors:{isInstalling:(e,t)=>!!e&&e.installingProducts.includes(t)}});function Oe(e){var t;const{loadSubscriptions:o}=(0,c.useContext)(ve),r=(0,R.useSelect)((t=>t(Le).isInstalling(e.subscription.product_key)),[e.subscription.product_key]),a=()=>{(0,R.dispatch)(Le).stopInstalling(e.subscription.product_key)},s=()=>{var t;(0,P.recordEvent)("marketplace_product_install_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),(0,R.dispatch)(Le).startInstalling(e.subscription.product_key),ee(e.subscription.product_key),e.subscription.is_installable?function(e){return X(e).then((()=>q("install-"+e.product_type,{slug:"woocommerce-com-"+e.product_slug}).then((()=>function(e){if(!0===e.local.active)return Promise.resolve();const t=new URLSearchParams;return t.append("product_key",e.product_key),Z()({path:"/wc/v3/marketplace/subscriptions/activate".toString(),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((()=>Promise.resolve())).catch((()=>Promise.reject({success:!1,data:{message:(0,n.sprintf)((0,n.__)("%s could not be activated. Please activate it manually.","woocommerce"),e.product_name)}})))}(e))).catch((t=>function(e){if(!1===e.active)return Promise.resolve();const t=new URLSearchParams;return t.append("product_key",e.product_key),Z()({path:"/wc/v3/marketplace/subscriptions/disconnect".toString(),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t})}(e).finally((()=>Promise.reject(t)))))))}(e.subscription).then((()=>{o(!1).then((()=>{$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s successfully installed.","woocommerce"),e.subscription.product_name),B.Success),a()})),(0,P.recordEvent)("marketplace_product_installed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),e.onSuccess&&e.onSuccess()})).catch((t=>{o(!1).then((()=>{let o=(0,n.sprintf)((0,n.__)("%s couldn’t be installed.","woocommerce"),e.subscription.product_name);!1===t?.success&&t?.data.message&&(o+=" "+t.data.message),$(e.subscription.product_key,o,B.Error,{actions:[{label:(0,n.__)("Try again","woocommerce"),onClick:s}]}),a(),e.onError&&e.onError()})),(0,P.recordEvent)("marketplace_product_install_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,error_message:t?.data?.message})})):(t=e.subscription,Z()({path:"/wc/v3/marketplace/subscriptions/install-url?product_key="+t.product_key}).then((e=>e?.data.url))).then((t=>{(0,P.recordEvent)("marketplace_product_install_url",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,product_install_url:t}),a(),t?window.open(t,"_self"):$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s couldn’t be installed. Please install the product manually.","woocommerce"),e.subscription.product_name),B.Error)}))};return(0,c.createElement)(l.Button,{variant:null!==(t=e.variant)&&void 0!==t?t:"link",isBusy:r,disabled:r,onClick:s},(0,n.__)("Install","woocommerce"))}function Qe(e){var t;return(0,c.createElement)(l.Button,{href:ce(e.subscription),variant:null!==(t=e.variant)&&void 0!==t?t:"secondary",onClick:function(){(0,P.queueRecordEvent)("marketplace_renew_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})}},(0,n.__)("Renew","woocommerce"))}function Ue(e){var t;return(0,c.createElement)(l.Button,{href:re(e.subscription),variant:null!==(t=e.variant)&&void 0!==t?t:"secondary",onClick:function(){(0,P.queueRecordEvent)("marketplace_subscribe_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})}},(0,n.__)("Subscribe","woocommerce"))}function Pe(e){return(0,c.createElement)(l.Modal,{title:(0,n.__)("Connect to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay"},(0,c.createElement)("p",{className:"woocommerce-marketplace__header-account-modal-text"},(0,n.sprintf)((0,n.__)("Version %s is available. To enable this update you need to connect your subscription to this store.","woocommerce"),e.subscription.version)),(0,c.createElement)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group"},(0,c.createElement)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button"},(0,n.__)("Cancel","woocommerce")),(0,c.createElement)(je,{subscription:e.subscription,onClose:e.onClose,variant:"primary"})))}function Ye(e){return(0,c.createElement)(l.Modal,{title:(0,n.__)("Renew to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay"},(0,c.createElement)("p",{className:"woocommerce-marketplace__header-account-modal-text"},(0,n.sprintf)((0,n.__)("Version %s is available. To enable this update you need to renew your subscription.","woocommerce"),e.subscription.version)),(0,c.createElement)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group"},(0,c.createElement)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button"},(0,n.__)("Cancel","woocommerce")),(0,c.createElement)(Qe,{subscription:e.subscription,variant:"primary"})))}function Ze(e){return(0,c.createElement)(l.Modal,{title:(0,n.__)("Subscribe to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay"},(0,c.createElement)("p",{className:"woocommerce-marketplace__header-account-modal-text"},(0,n.sprintf)((0,n.__)("Version %s is available. To enable this update you need to purchase a subscription.","woocommerce"),e.subscription.version)),(0,c.createElement)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group"},(0,c.createElement)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button"},(0,n.__)("Cancel","woocommerce")),(0,c.createElement)(Ue,{subscription:e.subscription,variant:"primary"})))}function Re(e){const[t,o]=(0,c.useState)(!1),[r,a]=(0,c.useState)(!1),{loadSubscriptions:s}=(0,c.useContext)(ve),i=e.subscription.active&&e.subscription.local&&e.subscription.local.slug&&e.subscription.local.path;return(0,c.createElement)(c.Fragment,null,t?""===e.subscription.product_key?(0,c.createElement)(Ze,{onClose:()=>o(!1),subscription:e.subscription}):e.subscription.expired?(0,c.createElement)(Ye,{subscription:e.subscription,onClose:()=>o(!1)}):e.subscription.active?null:(0,c.createElement)(Pe,{subscription:e.subscription,onClose:()=>o(!1)}):null,(0,c.createElement)(l.Button,{variant:"link",className:"woocommerce-marketplace__my-subscriptions-update",onClick:function t(){var c;(0,P.recordEvent)("marketplace_product_update_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version}),i?(ee(e.subscription.product_key),window.wp.updates?(a(!0),(c=e.subscription,q("update-"+c.product_type,{slug:c.local.slug,[c.product_type]:c.local.path})).then((()=>{s(!1).then((()=>{$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s updated successfully.","woocommerce"),e.subscription.product_name),B.Success),a(!1)})),(0,P.recordEvent)("marketplace_product_updated",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})})).catch((()=>{$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),B.Error,{actions:[{label:(0,n.__)("Try again","woocommerce"),onClick:t}]}),a(!1),(0,P.recordEvent)("marketplace_product_update_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})}))):$(e.subscription.product_key,(0,n.sprintf)((0,n.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),B.Error,{actions:[{label:(0,n.__)("Reload page and try again","woocommerce"),onClick:()=>{window.location.reload()}}]})):o(!0)},isBusy:r,disabled:r,label:(0,n.sprintf)((0,n.__)("Update to %s","woocommerce"),e.subscription.version),showTooltip:!0,tooltipPosition:"top center"},r?(0,n.__)("Updating","woocommerce"):(0,n.__)("Update","woocommerce")))}(0,R.register)(Le);var Be=o(84560);function Ge(e){const[t,o]=(0,c.useState)(!1);return(0,c.createElement)("button",{onClick:()=>{o(!t)},className:`woocommerce-marketplace__my-subscriptions__product-status woocommerce-marketplace__my-subscriptions__product-status--${e.level}`},(0,c.createElement)(u.Z,{icon:Be.Z,size:16}),e.text,""!==e.explanation&&t&&(0,c.createElement)(l.Popover,{className:"woocommerce-marketplace__my-subscriptions__popover",position:"top center"},e.explanation))}var Ve=o(85797);function He(e){const t=[{title:(0,n.__)("Manage on Woo.com","woocommerce"),icon:(0,c.createElement)(c.Fragment,null),onClick:()=>{window.open("https://woo.com/my-account/my-subscriptions","_blank")}},{title:(0,n.__)("Manage in Plugins","woocommerce"),icon:(0,c.createElement)(c.Fragment,null),onClick:()=>{window.location.href=_.SX+"plugins.php"}}];return e.subscription.documentation_url&&t.unshift({title:(0,n.__)("View documentation","woocommerce"),icon:(0,c.createElement)(c.Fragment,null),onClick:()=>{window.open(e.subscription.documentation_url,"_blank")}}),(0,c.createElement)(l.DropdownMenu,{icon:Ve.Z,label:(0,n.__)("Actions","woocommerce"),controls:t})}function Fe(e){return(0,c.createElement)("span",{className:"woocommerce-marketplace__my-subscriptions-version"},e.span)}function We(e){return e.local.version===e.version?(0,c.createElement)(Fe,{span:e.local.version}):e.local.version&&e.version?(0,c.createElement)(Re,{subscription:e}):e.version?(0,c.createElement)(Fe,{span:e.version}):e.local.version?(0,c.createElement)(Fe,{span:e.local.version}):""}function Ke(e){return oe(e,[["utm_source","subscriptionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","product-name"]])}function Je(e){var t;let o=(0,c.createElement)(u.Z,{icon:Ce,size:40});e.product_icon&&(o=(0,c.createElement)("img",{src:e.product_icon,alt:(0,n.sprintf)((0,n.__)("%s icon","woocommerce"),e.product_name)}));const r=function(e){return""===e.product_key?{text:(0,n.__)("No subscription","woocommerce"),level:Ae.Error,explanation:(0,c.createInterpolateElement)((0,n.__)("To receive updates and support, please <purchase>purchase</purchase> a subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{purchase:(0,c.createElement)("a",{href:re(e),rel:"nofollow noopener noreferrer"},"renew"),sharing:(0,c.createElement)("a",{href:v,rel:"nofollow noopener noreferrer"},"sharing"),transferring:(0,c.createElement)("a",{href:v,rel:"nofollow noopener noreferrer"},"sharing")})}:e.local.installed&&!e.active?{text:(0,n.__)("Not connected","woocommerce"),level:Ae.Warning,explanation:(0,n.__)("To receive updates and support, please connect your subscription to this store.","woocommerce")}:!!e.expired&&{text:(0,n.__)("Expired","woocommerce"),level:Ae.Error,explanation:(0,c.createInterpolateElement)((0,n.__)("To receive updates and support, please <renew>renew</renew> this subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{renew:(0,c.createElement)("a",{href:ce(e),rel:"nofollow noopener noreferrer"},"renew"),sharing:(0,c.createElement)("a",{href:v,rel:"nofollow noopener noreferrer"},"sharing"),transferring:(0,c.createElement)("a",{href:v,rel:"nofollow noopener noreferrer"},"sharing")})}}(e);return{display:(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__product"},(0,c.createElement)("a",{href:Ke(e.product_url),target:"_blank",rel:"noreferrer"},(0,c.createElement)("span",{className:"woocommerce-marketplace__my-subscriptions__product-icon"},o)),(0,c.createElement)("a",{href:Ke(e.product_url),className:"woocommerce-marketplace__my-subscriptions__product-name",target:"_blank",rel:"noreferrer"},e.product_name),(0,c.createElement)("span",{className:"woocommerce-marketplace__my-subscriptions__product-statuses"},r&&(0,c.createElement)(Ge,{text:r.text,level:r.level,explanation:null!==(t=r.explanation)&&void 0!==t?t:""}))),value:e.product_name}}function Xe(e){const t=e.expires;if(!0===e.local.installed&&""===e.product_key)return{display:"",value:""};let o=(0,n.__)("Never expires","woocommerce");return t&&(o=(0,ze.gmdateI18n)("j M, Y",new Date(1e3*t))),{display:(0,c.createElement)("span",{className:"woocommerce-marketplace__my-subscriptions__expiry-date"},o),value:t}}function qe(e){return{display:e.autorenew?(0,n.__)("On","woocommerce"):(0,n.__)("Off","woocommerce"),value:e.autorenew}}function $e(e){return{display:We(e)}}function et(e){let t=null;return""===e.product_key?t=(0,c.createElement)(Ue,{subscription:e}):e.expired?t=(0,c.createElement)(Qe,{subscription:e}):!1===e.local.installed&&!1===e.subscription_installed?t=(0,c.createElement)(Oe,{subscription:e}):!1===e.active&&!0===e.subscription_available&&(t=(0,c.createElement)(je,{subscription:e,variant:"link"})),{display:(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__actions"},t,(0,c.createElement)(He,{subscription:e}))}}const tt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjAwMDIgMi4yNVY0QzE2LjQxODUgNCAyMC4wMDAzIDcuNTgxNzIgMjAuMDAwMyAxMkMyMC4wMDAzIDE1LjcyNzcgMTcuNDUwNyAxOC44NTk5IDE0LjAwMDMgMTkuNzQ4VjE5Ljc0NzlDMTMuODMwMSAxOS43OTE3IDEzLjY1NzcgMTkuODMwMSAxMy40ODMzIDE5Ljg2MjhDMTMuMzM3MSAxOS44OTA1IDEzLjE5MDYgMTkuOTE0IDEzLjA0NDIgMTkuOTMzNEwxMy4wNDQxIDE5LjkzMjVDMTIuNzAyNCAxOS45NzcgMTIuMzUzOSAyMCAxMiAyMEMxMS42NDYgMjAgMTEuMjk3NSAxOS45NzcgMTAuOTU1NiAxOS45MzI0TDEwLjk1NTYgMTkuOTMyN0MxMC45MTQ4IDE5LjkyNzMgMTAuODc0IDE5LjkyMTYgMTAuODMzMyAxOS45MTU1QzkuNjEwMzYgMTkuNzM2OSA4LjQ3NzIyIDE5LjI4MTUgNy40OTk0OSAxOC42MTVDNy4zNzM2NSAxOC41Mjk1IDcuMjUwMTEgMTguNDQwNCA3LjEyOTA0IDE4LjM0NzdMNy4xMjk1NCAxOC4zNDdDNi41NzU0NiAxNy45MjEyIDYuMDc4NzIgMTcuNDI0NSA1LjY1MjkxIDE2Ljg3MDRMNS42NTE3MSAxNi44NzEzQzUuNDg1NTEgMTYuNjU0NSA1LjMyOTQxIDE2LjQyNzYgNS4xODQzOCAxNi4xOTExQzQuNjk0NTMgMTUuMzk2MiA0LjMzOTg1IDE0LjUwOTEgNC4xNTIzOSAxMy41NjE5QzQuMTE3ODggMTMuMzg5NSA0LjA4OTI1IDEzLjIxNjggNC4wNjY0MSAxMy4wNDQxTDQuMDY3NDkgMTMuMDQzOUM0LjAyMjk3IDEyLjcwMjIgNCAxMi4zNTM4IDQgMTJDNCAxMS42NDYgNC4wMjI5OSAxMS4yOTc0IDQuMDY3NTYgMTAuOTU1NUw0LjA2NzA4IDEwLjk1NTVDNC4wNzY5NCAxMC44ODExIDQuMDg3ODQgMTAuODA3IDQuMDk5NzYgMTAuNzMzQzQuMjgxIDkuNTk0IDQuNzAyNjYgOC41MzUwNyA1LjMxMTA5IDcuNjA5OTJDNS40MTg2NCA3LjQ0NTcyIDUuNTMyMzYgNy4yODUyNSA1LjY1MjEgNy4xMjg5MUw1LjY1Mjk0IDcuMTI5NTVDNS42NTUzNSA3LjEyNjQxIDUuNjU3NzcgNy4xMjMyNyA1LjY2MDE4IDcuMTIwMTRMNi44NjAzNyA4LjAyMDI4QzYuNzQwMTUgOC4xNzUzMSA2LjYyNjc5IDguMzM1OTMgNi41MjA3NCA4LjUwMTY4QzYuMDYwNDMgOS4yMjQzOSA1Ljc0NTQgMTAuMDMzMyA1LjU5NjM5IDEwLjg3ODVDNS41MzMwMyAxMS4yNDI4IDUuNSAxMS42MTc2IDUuNSAxMkM1LjUgMTIuNDc1MSA1LjU1MDk2IDEyLjkzODIgNS42NDc3MiAxMy4zODQzQzUuNzI4OTQgMTMuNzU0NCA1Ljg0Mzk3IDE0LjEyMzMgNS45OTQ3NSAxNC40ODczQzYuMTE3NTQgMTQuNzgzNyA2LjI1OTM4IDE1LjA2NTcgNi40MTgxMyAxNS4zMzI1QzYuOTE2NzIgMTYuMTY1OCA3LjU5NjYzIDE2Ljg3ODIgOC40MDMzNSAxNy40MTUxQzkuMTc2ODIgMTcuOTI3NSAxMC4wNTQgMTguMjcxIDEwLjk3MTQgMTguNDE5MUMxMS4zMDY0IDE4LjQ3MjMgMTEuNjUgMTguNSAxMiAxOC41QzEyLjQ1MDYgMTguNSAxMi44OTA0IDE4LjQ1NDIgMTMuMzE1MSAxOC4zNjY5QzEzLjUyNjMgMTguMzIzIDEzLjczNzIgMTguMjY4MSAxMy45NDcgMTguMjAxOUwxMy45NDc0IDE4LjIwMzJDMTYuNTg1OSAxNy4zNzU4IDE4LjUgMTQuOTExNCAxOC41IDEyQzE4LjUgOC40MTAyMyAxNS41OSA1LjUwMDEzIDEyLjAwMDIgNS41VjcuMjVMOS4wMDAyNCA0Ljc1TDEyLjAwMDIgMi4yNVoiIGZpbGw9IiMwMDdDQkEiLz4KPC9zdmc+",ot="woocommerce-marketplace-refresh-subscriptions";function ct(){const{refreshSubscriptions:e}=(0,c.useContext)(ve),[t,o]=(0,c.useState)(!1),r=()=>{t||(ee(ot),o(!0),e().then((()=>{$(ot,(0,n.__)("Subscriptions refreshed.","woocommerce"),B.Success)})).catch((e=>{$(ot,(0,n.sprintf)((0,n.__)("Error refreshing subscriptions: %s","woocommerce"),e.message),B.Error,{actions:[{label:(0,n.__)("Try again","woocommerce"),onClick:r}]})})).finally((()=>{o(!1)})))};return(0,c.createElement)(l.Button,{className:"woocommerce-marketplace__refresh-subscriptions",onClick:r,isBusy:t},(0,c.createElement)("img",{src:tt,alt:(0,n.__)("Refresh subscriptions","woocommerce"),className:"woocommerce-marketplace__refresh-subscriptions-icon"}),(0,n.__)("Refresh","woocommerce"))}const rt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9ImFsZXJ0Ij4KPHBhdGggaWQ9IlZlY3RvciIgZD0iTTEyIDIwQzE2LjQxODMgMjAgMjAgMTYuNDE4MyAyMCAxMkMyMCA3LjU4MTcyIDE2LjQxODMgNCAxMiA0QzcuNTgxNzIgNCA0IDcuNTgxNzIgNCAxMkM0IDE2LjQxODMgNy41ODE3MiAyMCAxMiAyMFoiIHN0cm9rZT0iI0NDMTgxOCIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggaWQ9IlZlY3Rvcl8yIiBkPSJNMTMgN0gxMVYxM0gxM1Y3WiIgZmlsbD0iI0NDMTgxOCIvPgo8cGF0aCBpZD0iVmVjdG9yXzMiIGQ9Ik0xMyAxNUgxMVYxN0gxM1YxNVoiIGZpbGw9IiNDQzE4MTgiLz4KPC9nPgo8L3N2Zz4K";function at(){const e=(0,R.useSelect)((e=>e(V).notices()),[]),t=e=>e.options?.actions?e.options?.actions.map((e=>({...e,variant:"link",className:"is-link"}))):[],o=[];for(const r of e)o.push((0,c.createElement)(l.Notice,{className:"woocommerce-marketplace__notice--error",status:r.status,onRemove:()=>ee(r.productKey),key:r.productKey,actions:t(r)},(0,c.createElement)("img",{src:rt,alt:"",width:24,height:24}),r.message));return(0,c.createElement)(c.Fragment,null,o)}function nt(e){var t,o;const r=(0,_.O3)("wccomHelper",{}),a=new URL(null!==(t=r?.connectURL)&&void 0!==t?t:"");return e.install&&a.searchParams.set("install",e.install),(0,c.createElement)(l.Button,{href:a.href,variant:null!==(o=e.variant)&&void 0!==o?o:"secondary"},(0,n.__)("Connect Account","woocommerce"))}function st(){const e=(0,I.useQuery)(),t=e?.install,o=(0,_.O3)("wccomHelper",{}),r=!!o?.isConnected,[a,s]=(0,c.useState)(!1),[i,m]=(0,c.useState)(!1),{subscriptions:u,isLoading:p}=(0,c.useContext)(ve),d=u.find((e=>e.product_key===t)),g=(0,c.useCallback)((()=>{(0,I.navigateTo)({url:(0,I.getNewPath)({...e,install:void 0},E,{})})}),[e]);(0,c.useEffect)((()=>{p||(t&&r&&!p&&!d?($(t,(0,n.sprintf)((0,n.__)("Could not find subscription with product key %s.","woocommerce"),t),B.Error),g()):s(!!t))}),[r,p,t,g,d]),(0,c.useEffect)((()=>{d&&d.local.installed&&m(!0)}),[d]);const w=()=>{g(),s(!1)};return a?(0,c.createElement)(l.Modal,{title:i?(0,n.__)("You are ready to go!","woocommerce"):(0,n.__)("Add to store","woocommerce"),onRequestClose:w,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal has-size-medium",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay"},(()=>{if(!r)return(0,c.createElement)(l.Notice,{status:"warning",isDismissible:!1},(0,n.__)("In order to install a product, you need to first connect your account.","woocommerce"));if(d){const e=i?(0,n.__)("Keep the momentum going and start setting up your extension.","woocommerce"):(0,n.__)("Would you like to install this extension?","woocommerce");return(0,c.createElement)(c.Fragment,null,(0,c.createElement)("p",{className:"woocommerce-marketplace__header-account-modal-text"},e),(0,c.createElement)(ae,{product:te(d),small:!0,tracksData:{position:1,group:"subscriptions",label:"install"}}))}})(),(()=>{const e=[];return i?(e.push((0,c.createElement)(l.Button,{variant:"secondary",href:d?.documentation_url,target:"_blank",className:"woocommerce-marketplace__header-account-modal-button",key:"docs"},(0,n.__)("View docs","woocommerce"))),e.push((0,c.createElement)(l.Button,{variant:"primary",href:f,className:"woocommerce-marketplace__header-account-modal-button",key:"plugin-list"},(0,n.__)("View in Plugins","woocommerce")))):(e.push((0,c.createElement)(l.Button,{variant:"tertiary",onClick:w,className:"woocommerce-marketplace__header-account-modal-button",key:"cancel"},(0,n.__)("Cancel","woocommerce"))),r?d&&e.push((0,c.createElement)(Oe,{subscription:d,variant:"primary",onError:w,key:"install"})):e.push((0,c.createElement)(nt,{variant:"primary",install:t,key:"connect"}))),(0,c.createElement)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group"},e)})()):null}function lt(){const{subscriptions:e,isLoading:t}=(0,c.useContext)(ve),o=(0,_.O3)("wccomHelper",{}),r=(0,c.createInterpolateElement)((0,n.__)("Woo.com extensions and themes installed on this store. To see all your subscriptions go to <a>your account<custom_icon /></a> on Woo.com.","woocommerce"),{a:(0,c.createElement)("a",{href:"https://woo.com/my-account/my-subscriptions",target:"_blank",rel:"nofollow noopener noreferrer"},"your account"),custom_icon:(0,c.createElement)(u.Z,{icon:p.Z,size:12})}),a=e.filter((e=>e.subscription_installed)),s=e.filter((e=>!e.subscription_installed));return o?.isConnected?(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions"},(0,c.createElement)(st,null),(0,c.createElement)("section",{className:"woocommerce-marketplace__my-subscriptions__notices"},(0,c.createElement)(at,null)),(0,c.createElement)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__installed"},(0,c.createElement)("header",{className:"woocommerce-marketplace__my-subscriptions__header"},(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__header-content"},(0,c.createElement)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading"},(0,n.__)("Installed on this store","woocommerce")),(0,c.createElement)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description"},r)),(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__header-refresh"},(0,c.createElement)(ct,null))),(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper"},(0,c.createElement)(Te,{isLoading:t,rows:a.map((e=>function(e){return[Je(e),Xe(e),qe(e),$e(e),et(e)]}(e)))}))),s.length>0&&(0,c.createElement)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__available"},(0,c.createElement)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading"},(0,n.__)("Available to use","woocommerce")),(0,c.createElement)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description"},(0,n.__)("Woo.com subscriptions you haven't used yet.","woocommerce")),(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper"},(0,c.createElement)(Ie,{isLoading:t,rows:s.map((e=>function(e){return[Je(e),Xe(e),qe(e),$e(e),et(e)]}(e)))})))):(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions--connect"},(0,c.createElement)(st,null),(0,c.createElement)("div",{className:"woocommerce-marketplace__my-subscriptions__icon"}),(0,c.createElement)("h2",{className:"woocommerce-marketplace__my-subscriptions__header"},(0,n.__)("Manage your subscriptions","woocommerce")),(0,c.createElement)("p",{className:"woocommerce-marketplace__my-subscriptions__description"},(0,n.__)("Connect your account to get updates, manage your subscriptions, and get seamless support. Once connected, your Woo.com subscriptions will appear here.","woocommerce")),(0,c.createElement)(l.Button,{href:o?.connectURL,variant:"primary"},(0,n.__)("Connect Account","woocommerce")))}function it(){const e=(0,c.useContext)(r),[t,o]=(0,c.useState)([]),{setIsLoading:a,selectedTab:n}=e,s=(0,I.useQuery)();return(0,c.useEffect)((()=>{const e=new AbortController,t={view:s?.tab,search_term:s?.term,product_type:s?.section,category:s?.category};if(function(e){if(""===e.category)return;const t=e.view||"discover",o=e.search_term||null,c=e.product_type||null,r=e.category||null,a={...t&&{view:t},...o&&{search_term:o},...c&&{product_type:c},...r&&{category:r}};t&&["extensions","themes"].includes(t)&&!r&&(a.category="_all"),t&&"search"===t&&c&&!r&&(a.category="_all"),(0,P.recordEvent)("marketplace_view",a)}(t),function(e){if(e.product_type)return;let t="extensions_view";const o=e.view||"_featured",c=e.search_term||null,r=e.category||null,a={...o&&{section:o},...c&&{search_term:c},version:"2"};switch(o){case"extensions":a.section=r||"_all";break;case"themes":a.section="themes";break;case"search":t="extensions_view_search",a.section=o,a.search_term=c||"";break;case"my-subscriptions":t="subscriptions_view",a.section="helper"}(0,P.recordEvent)(t,a)}(t),s.tab&&["","discover"].includes(s.tab))return;a(!0),o([]);const c=new URLSearchParams;s.term&&c.append("term",s.term),s.category?c.append("category","_all"===s.category?"":s.category):"themes"===s?.tab?c.append("category","themes"):"search"===s?.tab&&c.append("category","extensions-themes");const r=(0,_.O3)("wccomHelper",!1);return r.storeCountry&&c.append("country",r.storeCountry),async function(e,t){const o=y+N+"?"+e.toString();return new Promise(((e,c)=>{K(o,t).then((t=>{const o=t.products.map((e=>{var t,o,c;return{id:e.id,title:e.title,image:e.image,type:e.type,description:e.excerpt,vendorName:e.vendor_name,vendorUrl:e.vendor_url,icon:e.icon,url:e.link,price:null!==(t=e.raw_price)&&void 0!==t?t:e.price,averageRating:null!==(o=e.rating)&&void 0!==o?o:0,reviewsCount:null!==(c=e.reviews_count)&&void 0!==c?c:0}}));e(o)})).catch((()=>c))}))}(c,e.signal).then((e=>{o(e)})).catch((()=>{o([])})).finally((()=>{a(!1)})),()=>{e.abort()}}),[s.term,s.category,s?.tab,a,s?.section]),(0,c.createElement)("div",{className:"woocommerce-marketplace__content"},(()=>{switch(n){case"extensions":return(0,c.createElement)(be,{products:t,categorySelector:!0,type:Q.extension});case"themes":return(0,c.createElement)(be,{products:t,categorySelector:!0,type:Q.theme});case"search":return(0,c.createElement)(ke,{products:t,type:U.all});case"discover":return(0,c.createElement)(ue,null);case"my-subscriptions":return(0,c.createElement)(fe,null,(0,c.createElement)(lt,null));default:return(0,c.createElement)(c.Fragment,null)}})())}var mt=o(47642);const ut=(0,c.createElement)(i.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,c.createElement)(i.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68822 16.625L5.5 17.8145L5.5 5.5L18.5 5.5L18.5 16.625L6.68822 16.625ZM7.31 18.125L19 18.125C19.5523 18.125 20 17.6773 20 17.125L20 5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19.5247C4 19.8173 4.16123 20.086 4.41935 20.2237C4.72711 20.3878 5.10601 20.3313 5.35252 20.0845L7.31 18.125ZM16 9.99997H8V8.49997H16V9.99997ZM8 14H13V12.5H8V14Z"})),pt=(0,c.createElement)(i.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,c.createElement)(i.Path,{d:"M12 3.176l6.75 3.068v4.574c0 3.9-2.504 7.59-6.035 8.755a2.283 2.283 0 01-1.43 0c-3.53-1.164-6.035-4.856-6.035-8.755V6.244L12 3.176zM6.75 7.21v3.608c0 3.313 2.145 6.388 5.005 7.33.159.053.331.053.49 0 2.86-.942 5.005-4.017 5.005-7.33V7.21L12 4.824 6.75 7.21z",fillRule:"evenodd",clipRule:"evenodd"}));function dt(e){const{icon:t,title:o,description:r}=e;return(0,c.createElement)("div",{className:"woocommerce-marketplace__icon-group"},(0,c.createElement)("div",{className:"woocommerce-marketplace__icon-group-headline"},(0,c.createElement)(u.Z,{icon:t,size:20,className:"woocommerce-marketplace__icon-group-icon"}),(0,c.createElement)("h3",{className:"woocommerce-marketplace__icon-group-title"},o)),(0,c.createElement)("p",{className:"woocommerce-marketplace__icon-group-description"},r))}const _t="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9IlciIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMjU2XzE4NDQ2MykiPgo8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IiM2NDY5NzAiLz4KPHJlY3QgaWQ9IlJlY3RhbmdsZSAxIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSIyIiBmaWxsPSIjNjQ2OTcwIi8+CjxnIGlkPSJTcGVlY2ggYnViYmxlIj4KPHBhdGggaWQ9IlZlY3RvciIgZD0iTTMuMDQ4NTUgMy44NjA0N0MzLjIwMzYgMy42NzMxMiAzLjQyOTcxIDMuNTU2ODMgMy42NzUyIDMuNTUwMzdDNC4xNzkxMSAzLjUxODA3IDQuNDY5ODMgMy43NTcxMSA0LjU0NzM1IDQuMjY3NDdDNC44NTc0NSA2LjM0NzcxIDUuMTkzMzkgOC4xMTc4NiA1LjU0ODcxIDkuNTcxNDRMNy43Mzg3OCA1LjQxMDk2QzcuOTM5MDUgNS4wMzYyNiA4LjE4NDU0IDQuODM1OTkgOC40ODgxOCA0LjgxNjYxQzguOTI3NDkgNC43ODQzIDkuMTk4ODIgNS4wNjIxIDkuMzA4NjUgNS42NTY0NUM5LjUxNTM4IDYuODE5MzIgOS44MzE5NCA3Ljk2MjgxIDEwLjI1MTkgOS4wNjc1M0MxMC41MTY3IDYuNTM1MDYgMTAuOTU2IDQuNzAwMzIgMTEuNTY5OCAzLjU2OTc1QzExLjY5MjUgMy4zMTEzNCAxMS45NDQ1IDMuMTQzMzcgMTIuMjI4NyAzLjEzMDQ1QzEyLjQ1NDkgMy4xMTEwNyAxMi42ODEgMy4xODIxMyAxMi44NTU0IDMuMzMwNzJDMTMuMDM2MyAzLjQ2NjM5IDEzLjE0NjEgMy42Nzk1OCAxMy4xNTkgMy45MDU2OUMxMy4xNzE5IDQuMDczNjYgMTMuMTM5NiA0LjI0MTYzIDEzLjA2MjEgNC4zODM3NkMxMi42NzQ1IDUuMTA3MzIgMTIuMzUxNSA2LjMwODk1IDEyLjA5OTUgNy45ODg2NUMxMS44NTQgOS42MTAyIDExLjc1NzEgMTAuODgyOSAxMS44MjE3IDExLjc5MzhDMTEuODQ3NiAxMi4wMTk5IDExLjgwMjQgMTIuMjQ2IDExLjcwNTQgMTIuNDQ2M0MxMS42MDg1IDEyLjY1MyAxMS40MDE4IDEyLjc5NTIgMTEuMTc1NyAxMi44MDgxQzEwLjkxMDggMTIuODI3NSAxMC42NTI0IDEyLjcwNDcgMTAuMzg3NSAxMi40Mzk4QzkuNDU3MjQgMTEuNDkwMiA4LjcyMDc2IDEwLjA3NTMgOC4xNzgwOCA4LjE5NTM4QzcuNTM4NTEgOS40NzQ1MyA3LjA1Mzk4IDEwLjQzNzEgNi43Mzc0MiAxMS4wNzAyQzYuMTQ5NTMgMTIuMjAwOCA1LjY0NTYyIDEyLjc3NTggNS4yMzIxNSAxMi44MDgxQzQuOTYwODIgMTIuODI3NSA0LjcyODI1IDEyLjYwMTQgNC41NDA5IDEyLjEyMzNDNC4wMzA1MyAxMC44MTgzIDMuNDgxNCA4LjI5MjI5IDIuODkzNSA0LjU0NTI3QzIuODQxODIgNC4yOTk3OCAyLjg5OTk2IDQuMDU0MjggMy4wNDg1NSAzLjg2MDQ3WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEyNTZfMTg0NDYzIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=",gt=(0,c.createInterpolateElement)((0,n.__)("30-day <a>money-back guarantee</a>","woocommerce"),{a:(0,c.createElement)("a",{href:y+"/refund-policy/"})}),wt=(0,c.createInterpolateElement)((0,n.__)("<a>Get help</a> when you need it","woocommerce"),{a:(0,c.createElement)("a",{href:y+"/docs/"})}),yt=(0,c.createInterpolateElement)((0,n.__)("<a>Products</a> you can trust","woocommerce"),{a:(0,c.createElement)("a",{href:y+"/products/"})});function Et(){return(0,c.createElement)("div",{className:"woocommerce-marketplace__footer-content"},(0,c.createElement)("h2",{className:"woocommerce-marketplace__footer-title"},(0,n.__)("Hundreds of vetted products and services. Unlimited potential.","woocommerce")),(0,c.createElement)("div",{className:"woocommerce-marketplace__footer-columns"},(0,c.createElement)(dt,{icon:mt.Z,title:gt,description:(0,n.__)("If you change your mind within 30 days of your purchase, we'll give you a full refund — hassle-free.","woocommerce")}),(0,c.createElement)(dt,{icon:ut,title:wt,description:(0,n.__)("With detailed documentation and a global support team, help is always available if you need it.","woocommerce")}),(0,c.createElement)(dt,{icon:pt,title:yt,description:(0,n.__)("Everything in the Marketplace has been built by our own team or by our trusted partners, so you can be sure of its quality.","woocommerce")})),(0,c.createElement)("div",{className:"woocommerce-marketplace__footer-logo"},(0,c.createElement)("img",{src:_t,alt:"Woo Logo","aria-hidden":"true"}),(0,c.createElement)("span",null,(0,n.__)("Woo Marketplace","woocommerce"))))}function Nt(){return(0,c.createElement)("div",{className:"woocommerce-marketplace__footer"},(0,c.createElement)(Et,null))}function Mt(e){const{title:t,fieldName:o,onValueChange:r,validationFailed:a}=e,s=[{value:1,emoji:"😔",label:(0,n.__)("Strongly disagree","woocommerce")},{value:2,emoji:"🙁",label:(0,n.__)("Disagree","woocommerce")},{value:3,emoji:"😐",label:(0,n.__)("Neutral","woocommerce")},{value:4,emoji:"🙂",label:(0,n.__)("Agree","woocommerce")},{value:5,emoji:"😍",label:(0,n.__)("Strongly agree","woocommerce")}],l=T()("woocommerce-marketplace__likert-scale",{"validation-failed":a});function i(e){r(parseInt(e.target.value,10))}return(0,c.createElement)(c.Fragment,null,(0,c.createElement)("h2",null,t),(0,c.createElement)("ol",{className:l},s.map((e=>{const t=`${o}_${e.value}`;return(0,c.createElement)("li",{key:t,className:"woocommerce-marketplace__likert-scale-item"},(0,c.createElement)("input",{type:"radio",name:o,value:e.value,id:t,onChange:i,className:"screen-reader-text"}),(0,c.createElement)("label",{htmlFor:t},(0,c.createElement)("div",{className:"woocommerce-marketplace__likert-scale-icon"},e.emoji),(0,c.createElement)("div",{className:"woocommerce-marketplace__likert-scale-text"},e.label)))}))))}function ht(){const e="marketplace_redesign_2023_dismissals",t="marketplace_redesign_2023_last_shown_date",o=(0,c.useContext)(r),{isLoading:a}=o,s=()=>localStorage.setItem(t,(new Date).toDateString()),i=()=>parseInt(localStorage.getItem(e)||"0",10),m=()=>{s(),localStorage.setItem(e,`${i()+1}`)},[u,p]=(0,c.useState)(!1),[d,_]=(0,c.useState)(""),[g,w]=(0,c.useState)(0),[y,E]=(0,c.useState)(!1),[N,M]=(0,c.useState)(0),[h,b]=(0,c.useState)(!1),k=()=>p(!0),v=()=>{m(),p(!1)},{createNotice:f}=(0,R.useDispatch)("core/notices");function x(){f("success",(0,n.__)("How easy is it to find an extension?","woocommerce"),{type:"snackbar",icon:(0,c.createElement)(c.Fragment,null,(0,c.createElement)("svg",{color:"#fff",strokeWidth:"1.5",viewBox:"0 0 28.873 8.9823",style:{height:"8px",marginLeft:"-7px"}},(0,c.createElement)("path",{className:"l",d:"m4.1223 1.1216 19.12-0.014142 4.3982 3.38-4.3982 3.38-19.12-0.014142a3.34 3.34 0 0 1-2.39-0.97581 3.37 3.37 0 0 1 0.00707-4.773 3.34 3.34 0 0 1 2.383-0.98288z",stroke:"#fff"}),(0,c.createElement)("line",{className:"l",x1:"6.7669",x2:"6.7669",y1:"7.8533",y2:"1.1216",stroke:"#fff"}),(0,c.createElement)("path",{className:"l",d:"m23.235 1.1146 4.4053 3.3729-4.3982 3.38a6.59 6.59 0 0 1-0.89096-3.3517 6.59 6.59 0 0 1 0.88388-3.4012z",stroke:"#fff"}),(0,c.createElement)("line",{className:"l",x1:"6.7669",x2:"22.323",y1:"4.4875",y2:"4.4875",stroke:"#fff"}))),explicitDismiss:!0,onDismiss:m,actions:[{onClick:k,label:"Give feedback"}]})}return(0,c.useEffect)((function(){if(a)return;if(i()>=1)return;if((new Date).toDateString()===localStorage.getItem(t))return;const e=setTimeout(x,5e3);return s(),()=>{clearTimeout(e)}}),[a]),new Date("2024-01-01")>new Date?(0,c.createElement)(c.Fragment,null,u&&(0,c.createElement)(l.Modal,{title:(0,n.__)("How easy was it to find an extension?","woocommerce"),onRequestClose:v,className:"woocommerce-marketplace__feedback-modal"},(0,c.createElement)("p",null,(0,n.__)("Your feedback will help us create a better experience for people like you! Please tell us to what extent you agree or disagree with the statements below.","woocommerce")),(0,c.createElement)(Mt,{fieldName:"extension_screen_easy_to_find",title:(0,n.__)("It was easy to find an extension","woocommerce"),onValueChange:function(e){E(!1),w(e)},validationFailed:y}),(0,c.createElement)(Mt,{fieldName:"extension_screen_meets_my_needs",title:(0,n.__)("The Extensions screen’s functionality meets my needs","woocommerce"),onValueChange:function(e){b(!1),M(e)},validationFailed:h}),(0,c.createElement)(l.TextareaControl,{label:(0,n.__)("Additional thoughts","woocommerce"),value:d,onChange:e=>_(e)}),(0,c.createElement)("p",{className:"woocommerce-marketplace__feedback-modal-buttons"},(0,c.createElement)(l.Button,{variant:"tertiary",onClick:v,text:(0,n.__)("Cancel","woocommerce")}),(0,c.createElement)(l.Button,{variant:"primary",onClick:function(){if(0===g||0===N)return 0===g&&E(!0),void(0===N&&b(!0));(0,P.recordEvent)("ces_feedback",{action:"marketplace_redesign_2023",score:g,score_second_question:N,score_combined:g+N,thoughts:d}),p(!1),s(),localStorage.setItem(e,"1")},text:(0,n.__)("Send","woocommerce")})))):(0,c.createElement)(c.Fragment,null)}function bt(){const{selectedTab:e}=(0,c.useContext)(r),t="woocommerce-marketplace"+(e?" woocommerce-marketplace--"+e:"");return(0,c.createElement)("div",{className:t},(0,c.createElement)(O,null),(0,c.createElement)(it,null),(0,c.createElement)(ht,null),(0,c.createElement)(Nt,null))}function kt(){return(0,c.createElement)(a,null,(0,c.createElement)(bt,null))}}}]);