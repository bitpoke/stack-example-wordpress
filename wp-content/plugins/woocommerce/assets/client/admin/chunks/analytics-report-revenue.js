"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[3994],{32009:(e,r,t)=>{t.d(r,{O3:()=>a,be:()=>n,u8:()=>i});var o=t(65736),s=t(92694);const a=(0,s.applyFilters)("woocommerce_admin_revenue_report_charts",[{key:"gross_sales",label:(0,o.__)("Gross sales","woocommerce"),order:"desc",orderby:"gross_sales",type:"currency",isReverseTrend:!1},{key:"refunds",label:(0,o.__)("Returns","woocommerce"),order:"desc",orderby:"refunds",type:"currency",isReverseTrend:!0},{key:"coupons",label:(0,o.__)("Coupons","woocommerce"),order:"desc",orderby:"coupons",type:"currency",isReverseTrend:!1},{key:"net_revenue",label:(0,o.__)("Net sales","woocommerce"),orderby:"net_revenue",type:"currency",isReverseTrend:!1,labelTooltipText:(0,o.__)("Full refunds are not deducted from tax or net sales totals","woocommerce")},{key:"taxes",label:(0,o.__)("Taxes","woocommerce"),order:"desc",orderby:"taxes",type:"currency",isReverseTrend:!1,labelTooltipText:(0,o.__)("Full refunds are not deducted from tax or net sales totals","woocommerce")},{key:"shipping",label:(0,o.__)("Shipping","woocommerce"),orderby:"shipping",type:"currency",isReverseTrend:!1},{key:"total_sales",label:(0,o.__)("Total sales","woocommerce"),order:"desc",orderby:"total_sales",type:"currency",isReverseTrend:!1}]),n=(0,s.applyFilters)("woocommerce_admin_revenue_report_advanced_filters",{filters:{},title:(0,o._x)("Revenue Matches <select/> Filters","A sentence describing filters for Revenue. See screen shot for context: https://cloudup.com/cSsUY9VeCVJ","woocommerce")}),l=[];Object.keys(n.filters).length&&(l.push({label:(0,o.__)("All Revenue","woocommerce"),value:"all"}),l.push({label:(0,o.__)("Advanced Filters","woocommerce"),value:"advanced"}));const i=(0,s.applyFilters)("woocommerce_admin_revenue_report_filters",[{label:(0,o.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>l.length>0,filters:l}])},67090:(e,r,t)=>{t.r(r),t.d(r,{default:()=>E});var o=t(69307),s=t(69596),a=t.n(s),n=t(65736),l=t(32009),i=t(67327),c=t(62671),d=t(17853),u=t(69771),m=t(9818),p=t(94333),_=t(92819),y=t(86020),b=t(81595),h=t(67221),g=t(81921),w=t(35980),v=t(17844),f=t(66777),T=t(91978),S=t(81514);const R=[],x=["orders_count","gross_sales","total_sales","refunds","coupons","taxes","shipping","net_revenue"];class k extends o.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:(0,n.__)("Date","woocommerce"),key:"date",required:!0,defaultSort:!0,isLeftAligned:!0,isSortable:!0},{label:(0,n.__)("Orders","woocommerce"),key:"orders_count",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Gross sales","woocommerce"),key:"gross_sales",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Returns","woocommerce"),key:"refunds",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Coupons","woocommerce"),key:"coupons",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Net sales","woocommerce"),key:"net_revenue",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Taxes","woocommerce"),key:"taxes",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Shipping","woocommerce"),key:"shipping",required:!1,isSortable:!0,isNumeric:!0},{label:(0,n.__)("Total sales","woocommerce"),key:"total_sales",required:!1,isSortable:!0,isNumeric:!0}]}getRowsContent(e=[]){const r=(0,T.O3)("dateFormat",g.defaultTableDateFormat),{formatAmount:t,render:o,formatDecimal:s,getCurrencyConfig:a}=this.context;return e.map((e=>{const{coupons:n,gross_sales:l,total_sales:i,net_revenue:c,orders_count:d,refunds:m,shipping:p,taxes:_}=e.subtotals,h=(0,S.jsx)(y.Link,{href:`edit.php?post_type=shop_order&order_date_type=${this.props.dateType}&m=`+(0,u.format)("Ymd",e.date_start),type:"wp-admin",children:(0,b.formatValue)(a(),"number",d)});return[{display:(0,S.jsx)(y.Date,{date:e.date_start,visibleFormat:r}),value:e.date_start},{display:h,value:Number(d)},{display:o(l),value:s(l)},{display:t(m),value:s(m)},{display:t(n),value:s(n)},{display:o(c),value:s(c)},{display:o(_),value:s(_)},{display:o(p),value:s(p)},{display:o(i),value:s(i)}]}))}getSummary(e,r=0){const{orders_count:t=0,gross_sales:o=0,total_sales:s=0,refunds:a=0,coupons:l=0,taxes:i=0,shipping:c=0,net_revenue:d=0}=e,{formatAmount:u,getCurrencyConfig:m}=this.context,p=m();return[{label:(0,n._n)("day","days",r,"woocommerce"),value:(0,b.formatValue)(p,"number",r)},{label:(0,n._n)("order","orders",t,"woocommerce"),value:(0,b.formatValue)(p,"number",t)},{label:(0,n.__)("Gross sales","woocommerce"),value:u(o)},{label:(0,n.__)("Returns","woocommerce"),value:u(a)},{label:(0,n.__)("Coupons","woocommerce"),value:u(l)},{label:(0,n.__)("Net sales","woocommerce"),value:u(d)},{label:(0,n.__)("Taxes","woocommerce"),value:u(i)},{label:(0,n.__)("Shipping","woocommerce"),value:u(c)},{label:(0,n.__)("Total sales","woocommerce"),value:u(s)}]}render(){const{advancedFilters:e,filters:r,tableData:t,query:o}=this.props;return(0,S.jsx)(f.Z,{endpoint:"revenue",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:x,query:o,tableData:t,title:(0,n.__)("Revenue","woocommerce"),columnPrefsKey:"revenue_report_columns",filters:r,advancedFilters:e})}}k.contextType=v.CurrencyContext;const C=(0,_.memoize)(((e,r,t,o,s)=>({tableData:{items:{data:(0,_.get)(o,["data","intervals"],R),totalResults:(0,_.get)(o,["totalResults"],0)},isError:e,isRequesting:r,query:t},dateType:s})),((e,r,t,o,s)=>[e,r,(0,w.stringify)(t),(0,_.get)(o,["totalResults"],0),(0,_.get)(o,["data","intervals"],R).length,s].join(":"))),O=(0,_.memoize)(((e,r,t,o,s)=>({interval:"day",orderby:r,order:e,page:t,per_page:o,after:(0,g.appendTimestamp)(s.primary.after,"start"),before:(0,g.appendTimestamp)(s.primary.before,"end")})),((e,r,t,o,s)=>[e,r,t,o,s.primary.after,s.primary.before].join(":"))),N=(0,p.compose)((0,m.withSelect)(((e,r)=>{const{query:t,filters:o,advancedFilters:s}=r,{woocommerce_default_date_range:a}=e(h.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),{getOption:n}=e(h.OPTIONS_STORE_NAME),l=n("woocommerce_date_type")||"date_paid",i=(0,g.getCurrentDates)(t,a),{getReportStats:c,getReportStatsError:d,isResolving:u}=e(h.REPORTS_STORE_NAME),m=O(t.order||"desc",t.orderby||"date",t.paged||1,t.per_page||h.QUERY_DEFAULTS.pageSize,i),p=(0,h.getReportTableQuery)({endpoint:"revenue",query:t,select:e,tableQuery:m,filters:o,advancedFilters:s}),_=c("revenue",p),y=Boolean(d("revenue",p)),b=u("getReportStats",["revenue",p]);return C(y,b,m,_,l)})))(k);var q=t(56739),F=t(70522);class E extends o.Component{render(){const{path:e,query:r}=this.props;return(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(q.Z,{query:r,path:e,report:"revenue",filters:l.u8,advancedFilters:l.be}),(0,S.jsx)(d.Z,{charts:l.O3,endpoint:"revenue",query:r,selectedChart:(0,i.Z)(r.chart,l.O3),filters:l.u8,advancedFilters:l.be}),(0,S.jsx)(c.Z,{charts:l.O3,endpoint:"revenue",path:e,query:r,selectedChart:(0,i.Z)(r.chart,l.O3),filters:l.u8,advancedFilters:l.be}),(0,S.jsx)(N,{query:r,filters:l.u8,advancedFilters:l.be}),(0,S.jsx)(F.I,{optionName:"woocommerce_revenue_report_date_tour_shown",headingText:(0,n.__)("Revenue is now reported from paid orders âœ…","woocommerce")})]})}}E.propTypes={path:a().string.isRequired,query:a().object.isRequired}},70522:(e,r,t)=>{t.d(r,{I:()=>u});var o=t(86020),s=t(65736),a=t(67221),n=t(69307),l=t(9818),i=t(74617),c=t(81514);const d="woocommerce_date_type",u=({optionName:e,headingText:r})=>{const[t,u]=(0,n.useState)(!1),{updateOptions:m}=(0,l.useDispatch)(a.OPTIONS_STORE_NAME),{shouldShowTour:p,isResolving:_}=(0,l.useSelect)((r=>{const{getOption:t,hasFinishedResolution:o}=r(a.OPTIONS_STORE_NAME);return{shouldShowTour:"yes"!==t(e)&&!1===t(d),isResolving:!(o("getOption",[e])&&o("getOption",[d]))}}));if(t||!p||_)return null;const y={steps:[{referenceElements:{desktop:".woocommerce-filters-filter > .components-dropdown"},focusElement:{desktop:".woocommerce-filters-filter > .components-dropdown"},meta:{name:"product-feedback-",heading:r,descriptions:{desktop:(0,n.createInterpolateElement)((0,s.__)("We now collect orders in this table based on when the payment went through, rather than when they were placed. You can change this in <link>settings</link>.","woocommerce"),{link:(0,n.createElement)("a",{href:(0,i.getAdminLink)("admin.php?page=wc-admin&path=/analytics/settings"),"aria-label":(0,s.__)("Analytics date settings","woocommerce")})})},primaryButton:{text:(0,s.__)("Got it","woocommerce")}},options:{classNames:{desktop:"woocommerce-revenue-report-date-tour"}}}],closeHandler:()=>{m({[e]:"yes"}),u(!0)}};return(0,c.jsx)(o.TourKit,{config:y})}}}]);