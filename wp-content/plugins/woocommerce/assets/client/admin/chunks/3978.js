"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[3978],{63978:(e,t,a)=>{a.r(t),a.d(t,{ProductsApp:()=>Re});var i=a(69307),s=a(86802),n=a(12238),l=a(74776);const{lock:r,unlock:o}=(0,l.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/edit-site");var c=a(97251),u=a(67221),d=a(40953),m=a(78281),p=a(87461),_=a(37798),v=a(65736),g=a(9818),f=a(17855),b=a.n(f),h=a(55609),y=a(72384),E=a(50185),w=a(31357),N=a(72006),k=a(28275),x=a(78423);const S="grid",T="table",P="list",C="is",L={[T]:{layout:{primaryField:"name",styles:{name:{maxWidth:300}}}},[S]:{layout:{mediaField:"featured-image",primaryField:"name"}},[P]:{layout:{primaryField:"name",mediaField:"featured-image"}}},A={type:T,search:"",filters:[],page:1,perPage:20,sort:{field:"date",direction:"desc"},fields:["name","sku","status","date"],layout:L[P].layout};function I({postType:e}){const t=(0,g.useSelect)((t=>{const{getPostType:a}=t(_.store),i=a(e);return null==i?void 0:i.labels}),[e]);return(0,i.useMemo)((()=>[{title:(null==t?void 0:t.all_items)||(0,v.__)("All items","woocommerce"),slug:"all",icon:y.Z,view:{...A}},{title:(0,v.__)("Published","woocommerce"),slug:"published",icon:E.Z,view:{...A,filters:[{field:"status",operator:C,value:"publish"}]}},{title:(0,v.__)("Scheduled","woocommerce"),slug:"future",icon:w.Z,view:{...A,filters:[{field:"status",operator:C,value:"future"}]}},{title:(0,v.__)("Drafts","woocommerce"),slug:"drafts",icon:N.Z,view:{...A,filters:[{field:"status",operator:C,value:"draft"}]}},{title:(0,v.__)("Private","woocommerce"),slug:"private",icon:k.Z,view:{...A,filters:[{field:"status",operator:C,value:"private"}]}},{title:(0,v.__)("Trash","woocommerce"),slug:"trash",icon:x.Z,view:{...A,type:T,layout:L[T].layout,filters:[{field:"status",operator:C,value:"trash"}]}}]),[t])}const F=[{value:"draft",label:(0,v.__)("Draft","woocommerce")},{value:"future",label:(0,v.__)("Scheduled","woocommerce")},{value:"private",label:(0,v.__)("Private","woocommerce")},{value:"publish",label:(0,v.__)("Published","woocommerce")},{value:"trash",label:(0,v.__)("Trash","woocommerce")}],R=[{id:"name",label:(0,v.__)("Name","woocommerce"),enableHiding:!1,type:"text",render:function({item:e}){return(0,i.createElement)(i.Fragment,null,e.name)}},{id:"sku",label:(0,v.__)("SKU","woocommerce"),enableHiding:!1,enableSorting:!1,render:({item:e})=>(0,i.createElement)(i.Fragment,null,e.sku)},{id:"date",label:(0,v.__)("Date","woocommerce"),render:({item:e})=>(0,i.createElement)("time",null,e.date_created)},{label:(0,v.__)("Status","woocommerce"),id:"status",getValue:({item:e})=>{var t,a;return null!==(a=null===(t=F.find((({value:t})=>t===e.status)))||void 0===t?void 0:t.label)&&void 0!==a?a:e.status},elements:F,filterBy:{operators:[C]},enableSorting:!1}];var Z=a(77942);const{useHistory:H,useLocation:D}=o(s.privateApis),B=({postType:e})=>{const t=H(),a=D();return(0,i.useMemo)((()=>({id:"edit-product",label:(0,v.__)("Edit","woocommerce"),isPrimary:!0,icon:Z.Z,supportsBulk:!0,isEligible:e=>"trash"!==e.status,callback(i){const s=i[0];t.push({...a.params,postId:s.id,postType:e,quickEdit:!0})}})),[t,a.params])},U=(0,i.createContext)(null);function V({children:e}){const[t,a]=(0,i.useState)(!1);return(0,i.createElement)(U.Provider,{value:{showNewNavigation:t,setShowNewNavigation:a}},e)}function M(){const e=(0,i.useContext)(U);if(e){const{showNewNavigation:t,setShowNewNavigation:a}=e;return[t,a]}return[!1,()=>{}]}const{NavigableRegion:z,usePostActions:j}=o(n.privateApis),{useHistory:W,useLocation:q}=o(s.privateApis),O=25,G=[],K=(e,t)=>{var a;return null===(a=e.find((({slug:e})=>e===t)))||void 0===a?void 0:a.view};function Q(e){return e.id.toString()}function J({subTitle:e,className:t,hideTitleFromUI:a=!1}){const[s,n]=M(),l=W(),r=q(),{postId:o,quickEdit:f=!1,postType:y="product",isCustom:E,activeView:w="all"}=r.params,[N,k]=(0,i.useState)([o]),[x,S]=function(e){const{params:{activeView:t="all",isCustom:a="false",layout:s}}=q(),n=W(),l=I({postType:e}),[r,o]=(0,i.useState)((()=>{var e;const a=null!==(e=K(l,t))&&void 0!==e?e:{type:null!=s?s:P},i=null!=s?s:a.type;return{...a,type:i}})),c=(0,i.useCallback)((e=>{const{params:t}=n.getLocationWithParams();(e.type!==P||(null==t?void 0:t.layout))&&e.type!==(null==t?void 0:t.layout)&&n.push({...t,layout:e.type}),o(e)}),[n]);return(0,i.useEffect)((()=>{o((e=>({...e,type:null!=s?s:P})))}),[s]),(0,i.useEffect)((()=>{const e=K(l,t);if(e){const t=null!=s?s:e.type;o({...e,type:t})}}),[t,a,s,l]),[r,c,c]}(y),T=(0,i.useMemo)((()=>{var e,t,a,i;const s={};null===(e=x.filters)||void 0===e||e.forEach((e=>{"status"===e.field&&(s.status=Array.isArray(e.value)?e.value.join(","):e.value)}));const n="name"===(null===(t=x.sort)||void 0===t?void 0:t.field)?"title":null===(a=x.sort)||void 0===a?void 0:a.field;return{per_page:x.perPage,page:x.page,order:null===(i=x.sort)||void 0===i?void 0:i.direction,orderby:n,search:x.search,...s}}),[x]),C=(0,i.useCallback)((e=>{k(e),l.push({...r.params,postId:e.join(",")})}),[l,r.params]),{records:A,totalCount:F,isLoading:Z}=(0,g.useSelect)((e=>{const{getProducts:t,getProductsTotalCount:a,isResolving:i}=e(u.productsStore);return{records:t(T),totalCount:a(T),isLoading:i("getProducts",[T])}}),[T]),H=(0,i.useMemo)((()=>({totalItems:null!=F?F:0,totalPages:Math.ceil((null!=F?F:0)/(x.perPage||O))})),[F,x.perPage]),{labels:D,canCreateRecord:U}=(0,g.useSelect)((e=>{const{getPostType:t,canUser:a}=e(_.store),i=t(y);return{labels:null==i?void 0:i.labels,canCreateRecord:a("create",{kind:"postType",name:y})}}),[y]),V=j({postType:y,context:"list"}),J=B({postType:y}),X=(0,i.useMemo)((()=>[J,...V]),[V,J]),Y=b()("edit-site-page",t);return(0,i.createElement)(z,{className:Y,ariaLabel:(0,v.__)("Products","woocommerce")},(0,i.createElement)("div",{className:"edit-site-page-content"},!a&&(0,i.createElement)(h.__experimentalVStack,{className:"edit-site-page-header",as:"header",spacing:0},(0,i.createElement)(h.__experimentalHStack,{className:"edit-site-page-header__page-title"},(0,i.createElement)(h.__experimentalHeading,{as:"h2",level:3,weight:500,className:"edit-site-page-header__title",truncate:!0},(0,v.__)("Products","woocommerce")),(0,i.createElement)(h.FlexItem,{className:"edit-site-page-header__actions"},(null==D?void 0:D.add_new_item)&&U&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(h.Button,{variant:"primary",disabled:!0,__next40pxDefaultSize:!0},D.add_new_item)))),e&&(0,i.createElement)(h.__experimentalText,{variant:"muted",as:"p",className:"edit-site-page-header__sub-title"},e)),(0,i.createElement)(c.Z,{key:w+E,paginationInfo:H,fields:R,data:A||G,isLoading:Z,view:x,actions:X,onChangeView:S,onChangeSelection:C,getItemId:Q,selection:N,defaultLayouts:L,header:(0,i.createElement)(i.Fragment,null,(0,i.createElement)(h.Button,{size:"compact",icon:s?d.Z:m.Z,label:(0,v.__)("Toggle navigation","woocommerce"),onClick:()=>{n(!s)}}),(0,i.createElement)(h.Button,{size:"compact",isPressed:f,icon:p.Z,label:(0,v.__)("Toggle details panel","woocommerce"),onClick:()=>{l.push({...r.params,quickEdit:!f||void 0})}}))})))}var X=a(39483),Y=a(19504);const{NavigableRegion:$}=o(n.privateApis),ee={type:"panel",fields:["name","status"]};function te({subTitle:e,actions:t,className:a,hideTitleFromUI:s=!0,postType:n,postId:l=""}){const r=b()("edit-product-page",a,{"is-empty":!l}),o=(0,i.useMemo)((()=>l.split(",")),[l]),{initialEdits:c}=(0,g.useSelect)((e=>({initialEdits:1===o.length?e(u.productsStore).getProduct(Number.parseInt(o[0],10)):null})),[n,o]),[d,m]=(0,i.useState)({}),p=(0,i.useMemo)((()=>({...c,...d})),[c,d]),_=!(0,X.h)(p,R,ee);return(0,i.createElement)($,{className:r,ariaLabel:(0,v.__)("Product Edit","woocommerce")},(0,i.createElement)("div",{className:"edit-product-content"},!s&&(0,i.createElement)(h.__experimentalVStack,{className:"edit-site-page-header",as:"header",spacing:0},(0,i.createElement)(h.__experimentalHStack,{className:"edit-site-page-header__page-title"},(0,i.createElement)(h.__experimentalHeading,{as:"h2",level:3,weight:500,className:"edit-site-page-header__title",truncate:!0},(0,v.__)("Product Edit","woocommerce")),(0,i.createElement)(h.FlexItem,{className:"edit-site-page-header__actions"},t)),e&&(0,i.createElement)(h.__experimentalText,{variant:"muted",as:"p",className:"edit-site-page-header__sub-title"},e)),!l&&(0,i.createElement)("p",null,(0,v.__)("Select a product to edit","woocommerce")),l&&(0,i.createElement)(h.__experimentalVStack,{spacing:4,as:"form",onSubmit:async e=>{e.preventDefault(),(0,X.h)(p,R,ee)&&m({})}},(0,i.createElement)(Y.Z,{data:p,fields:R,form:ee,onChange:m}),(0,i.createElement)(h.FlexItem,null,(0,i.createElement)(h.Button,{variant:"primary",type:"submit",accessibleWhenDisabled:!0,disabled:_,__next40pxDefaultSize:!0},(0,v.__)("Update","woocommerce"))))))}var ae=a(96483),ie=a(71643),se=a(12873),ne=a(52123),le=a(42358);const{useHistory:re}=o(s.privateApis);function oe({className:e,icon:t,withChevron:a=!1,suffix:s,uid:n,params:l,onClick:r,children:o,...c}){const u=re();return(0,i.createElement)(h.__experimentalItem,{className:b()("edit-site-sidebar-navigation-item",{"with-suffix":!a&&s},e),onClick:function(e){r?r(e):l&&(e.preventDefault(),u.push(l))},id:n,...c},(0,i.createElement)(h.__experimentalHStack,{justify:"flex-start"},t&&(0,i.createElement)(se.Z,{style:{fill:"currentcolor"},icon:t,size:24}),(0,i.createElement)(h.FlexBlock,null,o),a&&(0,i.createElement)(se.Z,{icon:(0,v.isRTL)()?ne.Z:le.Z,className:"edit-site-sidebar-navigation-item__drilldown-indicator",size:24}),!a&&s))}const{useHistory:ce,useLocation:ue}=o(s.privateApis);function de({title:e,slug:t,customViewId:a,type:s,icon:n,isActive:l,isCustom:r,suffix:o}){var c;const{params:{postType:u,page:d}}=ue(),m=n||(null===(c=ie.Kw.find((e=>e.type===s)))||void 0===c?void 0:c.icon);let p=r?a:t;"all"===p&&(p=void 0);const _=function(e,t,a=!1){const i=ce(),s=(0,ae.getQueryArgs)(window.location.href),n=(0,ae.removeQueryArgs)(window.location.href,...Object.keys(s));return{href:(0,ae.addQueryArgs)(n,e),onClick:function(s){null==s||s.preventDefault(),a?i.replace(e,t):i.push(e,t)}}}({page:d,postType:u,layout:s,activeView:p,isCustom:r?"true":void 0});return(0,i.createElement)(h.__experimentalHStack,{justify:"flex-start",className:b()("edit-site-sidebar-dataviews-dataview-item",{"is-selected":l})},(0,i.createElement)(oe,{icon:m,..._,"aria-current":l?"true":void 0},e),o)}const{useLocation:me}=o(s.privateApis);function pe(){const{params:{postType:e="product",activeView:t="all",isCustom:a="false"}}=me(),s=I({postType:e});if(!e)return null;const n="true"===a;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(h.__experimentalItemGroup,null,s.map((e=>(0,i.createElement)(de,{key:e.slug,slug:e.slug,title:e.title,icon:e.icon,type:e.view.type,isActive:!n&&e.slug===t,isCustom:!1})))))}var _e=a(17184),ve=a(40670);function ge(e){return(0,i.createElement)(h.Button,{...e,className:b()("edit-site-sidebar-button",e.className)})}const{useHistory:fe,useLocation:be}=o(s.privateApis);function he({isRoot:e,title:t,actions:a,meta:s,content:n,footer:l,description:r,backPath:c}){var u;const{dashboardLink:d,dashboardLinkText:m}=(0,g.useSelect)((e=>{const{getSettings:t}=o(e("core/edit-site"));return{dashboardLink:t().__experimentalDashboardLink,dashboardLinkText:t().__experimentalDashboardLinkText}}),[]),p=be(),_=fe(),f=null!=c?c:null===(u=p.state)||void 0===u?void 0:u.backPath,y=(0,v.isRTL)()?_e.Z:ve.Z;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(h.__experimentalVStack,{className:b()("edit-site-sidebar-navigation-screen__main",{"has-footer":!!l}),spacing:0,justify:"flex-start"},(0,i.createElement)(h.__experimentalHStack,{spacing:3,alignment:"flex-start",className:"edit-site-sidebar-navigation-screen__title-icon"},!e&&(0,i.createElement)(ge,{onClick:()=>{_.push(f)},icon:y,label:(0,v.__)("Back","woocommerce"),showTooltip:!1}),e&&(0,i.createElement)(ge,{icon:y,label:m||(0,v.__)("Go to the Dashboard","woocommerce"),href:d||"index.php"}),(0,i.createElement)(h.__experimentalHeading,{as:"h1",className:"edit-site-sidebar-navigation-screen__title",color:"#e0e0e0",level:1},t),a&&(0,i.createElement)("div",{className:"edit-site-sidebar-navigation-screen__actions"},a)),s&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("div",{className:"edit-site-sidebar-navigation-screen__meta"},s)),(0,i.createElement)("div",{className:"edit-site-sidebar-navigation-screen__content"},r&&(0,i.createElement)("p",{className:"edit-site-sidebar-navigation-screen__description"},r),n)),l&&(0,i.createElement)("footer",{className:"edit-site-sidebar-navigation-screen__footer"},l))}const{useLocation:ye}=o(s.privateApis);var Ee=a(94333);function we({children:e}){const t=(0,i.useRef)(null);return(0,i.createElement)("div",{ref:t,className:"edit-site-sidebar__screen-wrapper"},e)}function Ne({routeKey:e,children:t}){return(0,i.createElement)("div",{className:"edit-site-sidebar__content"},(0,i.createElement)(we,{key:e},t))}var ke=a(22629),xe=a(20264);const Se=function({className:e}){const{isRequestingSite:t,siteIconUrl:a}=(0,g.useSelect)((e=>{const{getEntityRecord:t}=e(_.store),a=t("root","__unstableBase");return{isRequestingSite:!a,siteIconUrl:null==a?void 0:a.site_icon_url}}),[]);if(t&&!a)return(0,i.createElement)("div",{className:"edit-site-site-icon__image"});const s=a?(0,i.createElement)("img",{className:"edit-site-site-icon__image",alt:(0,v.__)("Site Icon","woocommerce"),src:a}):(0,i.createElement)(h.Icon,{className:"edit-site-site-icon__icon",icon:xe.Z,size:48});return(0,i.createElement)("div",{className:b()(e,"edit-site-site-icon")},s)},Te=(0,i.memo)((0,i.forwardRef)((({isTransparent:e},t)=>{const{dashboardLink:a,homeUrl:s,siteTitle:n}=(0,g.useSelect)((e=>{const{getSettings:t}=o(e("core/edit-site")),{getSite:a,getUnstableBase:i}=e(_.store),s=a(),n=i();return{dashboardLink:t().__experimentalDashboardLink||"index.php",homeUrl:null==n?void 0:n.home,siteTitle:!(null==s?void 0:s.title)&&(null==s?void 0:s.url)?(0,ae.filterURLForDisplay)(null==s?void 0:s.url):null==s?void 0:s.title}}),[]);return(0,i.createElement)("div",{className:"edit-site-site-hub"},(0,i.createElement)(h.__experimentalHStack,{justify:"flex-start",spacing:"0"},(0,i.createElement)("div",{className:b()("edit-site-site-hub__view-mode-toggle-container",{"has-transparent-background":e})},(0,i.createElement)(h.Button,{ref:t,href:a,label:(0,v.__)("Go to the Dashboard","woocommerce"),className:"edit-site-layout__view-mode-toggle",style:{transform:"scale(0.5)",borderRadius:4}},(0,i.createElement)(Se,{className:"edit-site-layout__view-mode-toggle-icon"}))),(0,i.createElement)(h.__experimentalHStack,null,(0,i.createElement)("div",{className:"edit-site-site-hub__title"},(0,i.createElement)(h.Button,{variant:"link",href:s,target:"_blank"},n&&(0,ke.decodeEntities)(n),(0,i.createElement)(h.VisuallyHidden,{as:"span"},(0,v.__)("(opens in a new tab)","woocommerce")))))))}))),{NavigableRegion:Pe}=o(n.privateApis),Ce=.3;function Le({route:e,showNewNavigation:t=!1}){const[a]=(0,Ee.useResizeObserver)(),s=(0,i.useRef)(null),l=(0,Ee.useViewportMatch)("medium","<"),r=(0,Ee.useReducedMotion)(),{key:o,areas:c,widths:u}=e;return(0,i.createElement)(i.Fragment,null,a,(0,i.createElement)("div",{className:"edit-site-layout"},(0,i.createElement)("div",{className:"edit-site-layout__content"},(!l||!c.mobile)&&t&&(0,i.createElement)(Pe,{ariaLabel:(0,v.__)("Navigation","woocommerce"),className:"edit-site-layout__sidebar-region"},(0,i.createElement)(h.__unstableAnimatePresence,null,(0,i.createElement)(h.__unstableMotion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:r||l?0:Ce,ease:"easeOut"},className:"edit-site-layout__sidebar"},(0,i.createElement)(Te,{ref:s,isTransparent:!1}),(0,i.createElement)(Ne,{routeKey:o},c.sidebar)))),(0,i.createElement)(n.EditorSnackbars,null),!l&&c.content&&(0,i.createElement)("div",{className:"edit-site-layout__area",style:{maxWidth:null==u?void 0:u.content}},c.content),!l&&c.edit&&(0,i.createElement)("div",{className:"edit-site-layout__area",style:{maxWidth:null==u?void 0:u.edit}},c.edit))))}const{RouterProvider:Ae}=o(s.privateApis),{GlobalStylesProvider:Ie}=o(n.privateApis);function Fe(){const[e]=M();e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode");const t=function(){const{params:e={}}=ye(),{postType:t="product",layout:a="table",canvas:s,quickEdit:n,postId:l}=e;if(["product"].includes(t)){const e="list"===a||!a;return{key:"products-list",areas:{sidebar:(0,i.createElement)(he,{title:"Products",isRoot:!0,content:(0,i.createElement)(pe,null)}),content:(0,i.createElement)(J,null),preview:!1,mobile:(0,i.createElement)(J,{postType:t}),edit:n&&(0,i.createElement)(te,{postType:t,postId:l})},widths:{edit:n&&!e?380:void 0}}}return{key:"default",areas:{preview:!1,mobile:"edit"===s}}}();return(0,i.createElement)(Le,{route:t,showNewNavigation:e})}function Re(){return(0,i.createElement)(V,null,(0,i.createElement)(Ie,null,(0,i.createElement)(n.UnsavedChangesWarning,null),(0,i.createElement)(Ae,null,(0,i.createElement)(Fe,null))))}}}]);