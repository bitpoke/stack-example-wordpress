"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[5502,6732],{86053:(e,t,o)=>{o.d(t,{U:()=>w,e:()=>_});var n=o(69307),r=o(7829),a=o(10130),c=o(76292),s=o.n(c),i=o(7862),l=o.n(i),m=o(86020),d=o(55609),u=o(92819);class p extends n.Component{render(){const{className:e,hasAction:t,hasDate:o,hasSubtitle:a,lines:c}=this.props,s=(0,r.Z)("woocommerce-activity-card is-loading",e);return(0,n.createElement)("div",{className:s,"aria-hidden":!0},(0,n.createElement)("span",{className:"woocommerce-activity-card__icon"},(0,n.createElement)("span",{className:"is-placeholder"})),(0,n.createElement)("div",{className:"woocommerce-activity-card__header"},(0,n.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),a&&(0,n.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),o&&(0,n.createElement)("div",{className:"woocommerce-activity-card__date"},(0,n.createElement)("span",{className:"is-placeholder"}))),(0,n.createElement)("div",{className:"woocommerce-activity-card__body"},(0,u.range)(c).map((e=>(0,n.createElement)("span",{className:"is-placeholder",key:e})))),t&&(0,n.createElement)("div",{className:"woocommerce-activity-card__actions"},(0,n.createElement)("span",{className:"is-placeholder"})))}}p.propTypes={className:l().string,hasAction:l().bool,hasDate:l().bool,hasSubtitle:l().bool,lines:l().number},p.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};const _=p;class w extends n.Component{getCard(){const{actions:e,className:t,children:o,date:a,icon:c,subtitle:i,title:l,unread:d}=this.props,u=(0,r.Z)("woocommerce-activity-card",t),p=Array.isArray(e)?e:[e],_=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(a)?s().utc(a).fromNow():a;return(0,n.createElement)("section",{className:u},d&&(0,n.createElement)("span",{className:"woocommerce-activity-card__unread"}),c&&(0,n.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},c),l&&(0,n.createElement)("header",{className:"woocommerce-activity-card__header"},(0,n.createElement)(m.H,{className:"woocommerce-activity-card__title"},l),i&&(0,n.createElement)("div",{className:"woocommerce-activity-card__subtitle"},i),_&&(0,n.createElement)("span",{className:"woocommerce-activity-card__date"},_)),o&&(0,n.createElement)(m.Section,{className:"woocommerce-activity-card__body"},o),e&&(0,n.createElement)("footer",{className:"woocommerce-activity-card__actions"},p.map(((e,t)=>(0,n.cloneElement)(e,{key:t})))))}render(){const{onClick:e}=this.props;return e?(0,n.createElement)(d.Button,{className:"woocommerce-activity-card__button",onClick:e},this.getCard()):this.getCard()}}w.propTypes={actions:l().oneOfType([l().arrayOf(l().element),l().element]),onClick:l().func,className:l().string,children:l().node,date:l().string,icon:l().node,subtitle:l().node,title:l().oneOfType([l().string,l().node]),unread:l().bool},w.defaultProps={icon:(0,n.createElement)(a.Z,{size:48}),unread:!1}},90353:(e,t,o)=>{o.d(t,{Z:()=>m});var n=o(69307),r=o(7829),a=o(7862),c=o.n(a),s=o(14812),i=o(86020);class l extends n.Component{render(){const{className:e,menu:t,subtitle:o,title:a,unreadMessages:c}=this.props,i=(0,r.Z)({"woocommerce-layout__inbox-panel-header":o,"woocommerce-layout__activity-panel-header":!o},e),l=c||0;return(0,n.createElement)("div",{className:i},(0,n.createElement)("div",{className:"woocommerce-layout__inbox-title"},(0,n.createElement)(s.Text,{size:16,weight:600,color:"#23282d"},a),(0,n.createElement)(s.Text,{variant:"button",weight:"600",size:"14",lineHeight:"20px"},l>0&&(0,n.createElement)("span",{className:"woocommerce-layout__inbox-badge"},c))),(0,n.createElement)("div",{className:"woocommerce-layout__inbox-subtitle"},o&&(0,n.createElement)(s.Text,{variant:"body.small",size:"14",lineHeight:"20px"},o)),t&&(0,n.createElement)("div",{className:"woocommerce-layout__activity-panel-header-menu"},t))}}l.propTypes={className:c().string,unreadMessages:c().number,title:c().string.isRequired,subtitle:c().string,menu:c().shape({type:c().oneOf([i.EllipsisMenu])})};const m=l},43631:(e,t,o)=>{o.r(t),o.d(t,{HelpPanel:()=>y,SETUP_TASK_HELP_ITEMS_FILTER:()=>E,default:()=>v});var n=o(69307),r=o(65736),a=o(14812),c=o(9818),s=o(92694),i=o(23374),l=o(89015),m=o(83619),d=o(92819),u=o(86020),p=o(67221),_=o(2031),w=o(14599),h=o(90353),g=o(24082);const E="woocommerce_admin_setup_task_help_items";function k(e,t){const{taskName:o}=e;t&&e.recordEvent("help_panel_click",{task_name:o||"homescreen",link:t.currentTarget.href})}const y=e=>{const{taskName:t}=e;(0,n.useEffect)((()=>{e.recordEvent("help_panel_open",{task_name:t||"homescreen"})}),[t]);const o=function(e){const t=function(e){const{taskName:t}=e;switch(t){case"products":return[{title:(0,r.__)("Adding and Managing Products","woocommerce"),link:"https://woocommerce.com/document/managing-products/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Import products using the CSV Importer and Exporter","woocommerce"),link:"https://woocommerce.com/document/product-csv-importer-exporter/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Migrate products using Cart2Cart","woocommerce"),link:"https://woocommerce.com/products/cart2cart/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Learn more about setting up products","woocommerce"),link:"https://woocommerce.com/documentation/plugins/woocommerce/getting-started/setup-products/?utm_source=help_panel&utm_medium=product"}];case"appearance":return[{title:(0,r.__)("Showcase your products and tailor your shopping experience using Blocks","woocommerce"),link:"https://woocommerce.com/document/woocommerce-blocks/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Manage Store Notice, Catalog View and Product Images","woocommerce"),link:"https://woocommerce.com/document/woocommerce-customizer/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("How to choose and change a theme","woocommerce"),link:"https://woocommerce.com/document/choose-change-theme/?utm_source=help_panel&utm_medium=product"}];case"shipping":return function({activePlugins:e,countryCode:t}){const o="US"===t&&!e.includes("woocommerce-services");return[{title:(0,r.__)("Setting up Shipping Zones","woocommerce"),link:"https://woocommerce.com/document/setting-up-shipping-zones/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Core Shipping Options","woocommerce"),link:"https://woocommerce.com/documentation/plugins/woocommerce/getting-started/shipping/core-shipping-options/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Product Shipping Classes","woocommerce"),link:"https://woocommerce.com/document/product-shipping-classes/?utm_source=help_panel&utm_medium=product"},o&&{title:(0,r.__)("WooCommerce Shipping setup and configuration","woocommerce"),link:"https://woocommerce.com/document/woocommerce-shipping-and-tax/?utm_source=help_panel&utm_medium=product#section-3"},{title:(0,r.__)("Learn more about configuring your shipping settings","woocommerce"),link:"https://woocommerce.com/document/plugins/woocommerce/getting-started/shipping/?utm_source=help_panel&utm_medium=product"}].filter(Boolean)}(e);case"tax":return function(e){const{countryCode:t,taskLists:o}=e,n=o.reduce(((e,t)=>[...e,...t.tasks]),[]).find((e=>"tax"===e.id));if(!n)return;const{additionalData:a}=n,{woocommerceTaxCountries:c=[],taxJarActivated:s}=a,i=!s&&c.includes(t);return[{title:(0,r.__)("Setting up Taxes in WooCommerce","woocommerce"),link:"https://woocommerce.com/document/setting-up-taxes-in-woocommerce/?utm_source=help_panel&utm_medium=product"},i&&{title:(0,r.__)("Automated Tax calculation using WooCommerce Tax","woocommerce"),link:"https://woocommerce.com/document/woocommerce-services/?utm_source=help_panel&utm_medium=product#section-10"}].filter(Boolean)}(e);case"payments":return function(e){const{paymentGatewaySuggestions:t}=e;return[{title:(0,r.__)("Which Payment Option is Right for Me?","woocommerce"),link:"https://woocommerce.com/document/premium-payment-gateway-extensions/?utm_source=help_panel&utm_medium=product"},t.woocommerce_payments&&{title:(0,r.__)("WooPayments Start Up Guide","woocommerce"),link:"https://woocommerce.com/document/payments/?utm_source=help_panel&utm_medium=product"},t.woocommerce_payments&&{title:(0,r.__)("WooPayments FAQs","woocommerce"),link:"https://woocommerce.com/documentation/woocommerce-payments/woocommerce-payments-faqs/?utm_source=help_panel&utm_medium=product"},t.stripe&&{title:(0,r.__)("Stripe Setup and Configuration","woocommerce"),link:"https://woocommerce.com/document/stripe/?utm_source=help_panel&utm_medium=product"},t["ppcp-gateway"]&&{title:(0,r.__)("PayPal Checkout Setup and Configuration","woocommerce"),link:"https://woocommerce.com/document/2-0/woocommerce-paypal-payments/?utm_medium=product#section-3"},t.square_credit_card&&{title:(0,r.__)("Square - Get started","woocommerce"),link:"https://woocommerce.com/document/woocommerce-square/?utm_source=help_panel&utm_medium=product"},t.kco&&{title:(0,r.__)("Klarna - Introduction","woocommerce"),link:"https://woocommerce.com/document/klarna-checkout/?utm_source=help_panel&utm_medium=product"},t.klarna_payments&&{title:(0,r.__)("Klarna - Introduction","woocommerce"),link:"https://woocommerce.com/document/klarna-payments/?utm_source=help_panel&utm_medium=product"},t.payfast&&{title:(0,r.__)("Payfast Setup and Configuration","woocommerce"),link:"https://woocommerce.com/document/payfast-payment-gateway/?utm_source=help_panel&utm_medium=product"},t.eway&&{title:(0,r.__)("Eway Setup and Configuration","woocommerce"),link:"https://woocommerce.com/document/eway/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Direct Bank Transfer (BACS)","woocommerce"),link:"https://woocommerce.com/document/bacs/?utm_source=help_panel&utm_medium=product"},{title:(0,r.__)("Cash on Delivery","woocommerce"),link:"https://woocommerce.com/document/cash-on-delivery/?utm_source=help_panel&utm_medium=product"}].filter(Boolean)}(e);case"marketing":return function(e){const{activePlugins:t}=e;return[t.includes("mailpoet")&&{title:(0,r.__)("Get started with Mailpoet","woocommerce"),link:"https://kb.mailpoet.com/category/114-getting-started"},t.includes("google-listings-and-ads")&&{title:(0,r.__)("Set up Google Listing & Ads","woocommerce"),link:"https://woocommerce.com/document/google-listings-and-ads/?utm_medium=product#get-started"},t.includes("pinterest-for-woocommerce")&&{title:(0,r.__)("Set up Pinterest for WooCommerce","woocommerce"),link:"https://woocommerce.com/products/pinterest-for-woocommerce/"},t.includes("mailchimp-for-woocommerce")&&{title:(0,r.__)("Connect Mailchimp for WooCommerce","woocommerce"),link:"https://mailchimp.com/help/connect-or-disconnect-mailchimp-for-woocommerce/"},t.includes("creative-mail-by-constant-contact")&&{title:(0,r.__)("Set up Creative Mail for WooCommerce","woocommerce"),link:"https://app.creativemail.com/kb/help/WooCommerce"}].filter(Boolean)}(e);default:return[{title:(0,r.__)("Get Support","woocommerce"),link:"https://woocommerce.com/my-account/create-a-ticket/?utm_medium=product"},{title:(0,r.__)("Home Screen","woocommerce"),link:"https://woocommerce.com/document/home-screen/?utm_medium=product"},{title:(0,r.__)("Inbox","woocommerce"),link:"https://woocommerce.com/document/home-screen/?utm_medium=product#section-4"},{title:(0,r.__)("Stats Overview","woocommerce"),link:"https://woocommerce.com/document/home-screen/?utm_medium=product#section-5"},{title:(0,r.__)("Store Management","woocommerce"),link:"https://woocommerce.com/document/home-screen/?utm_medium=product#section-10"},{title:(0,r.__)("Store Setup Checklist","woocommerce"),link:"https://woocommerce.com/document/woocommerce-setup-wizard?utm_medium=product#store-setup-checklist"}]}}(e),o={title:(0,r.__)("WooCommerce Docs","woocommerce"),link:"https://woocommerce.com/documentation/?utm_source=help_panel&utm_medium=product"};t.push(o);const c=(0,s.applyFilters)(E,t,e.taskName,e);let u=Array.isArray(c)?c.filter((e=>e instanceof Object&&e.title&&e.link)):[];u.length||(u=[o]);const p=(0,d.partial)(k,e);return u.map((e=>{var t,o;return{title:(0,n.createElement)(a.Text,{as:"div",variant:"button",weight:"600",size:"14",lineHeight:"20px"},e.title),before:(0,n.createElement)(i.Z,{icon:l.Z}),after:(0,n.createElement)(i.Z,{icon:m.Z}),linkType:null!==(t=e.linkType)&&void 0!==t?t:"external",target:null!==(o=e.target)&&void 0!==o?o:"_blank",href:e.link,onClick:p}}))}(e);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(h.Z,{title:(0,r.__)("Documentation","woocommerce")}),(0,n.createElement)(u.Section,null,(0,n.createElement)(u.List,{items:o,className:"woocommerce-quick-links__list"})))};y.defaultProps={recordEvent:w.recordEvent};const v=(0,_.qC)((0,c.withSelect)((e=>{const{getSettings:t}=e(p.SETTINGS_STORE_NAME),{getActivePlugins:o}=e(p.PLUGINS_STORE_NAME),{general:n={}}=t("general"),r=o(),a=e(p.ONBOARDING_STORE_NAME).getPaymentGatewaySuggestions().reduce(((e,t)=>{const{id:o}=t;return e[o]=!0,e}),{}),c=e(p.ONBOARDING_STORE_NAME).getTaskLists();return{activePlugins:r,countryCode:(0,g.so)(n.woocommerce_default_country),paymentGatewaySuggestions:a,taskLists:c}})))(y)},78855:(e,t,o)=>{o.d(t,{A:()=>u,Z:()=>d});var n=o(76292),r=o.n(n),a=o(92819),c=o(81921),s=o(67221),i=o(10431),l=o(81595),m=o(74617);const d=({indicator:e,primaryData:t,secondaryData:o,currency:n,formatAmount:r,persistedQuery:c})=>{const s=(0,a.find)(t.data,(t=>t.stat===e.stat)),d=(0,a.find)(o.data,(t=>t.stat===e.stat));if(!s||!d)return{};const u=s._links&&s._links.report[0]&&s._links.report[0].href||"",p=function(e,t,o){return e?"/jetpack"===e?(0,m.getAdminLink)("admin.php?page=jetpack#/dashboard"):(0,i.getNewPath)(t,e,{chart:o.chart}):""}(u,c,s),_="/jetpack"===u?"wp-admin":"wc-admin",w="currency"===s.format,h=(0,l.calculateDelta)(s.value,d.value);return{primaryValue:w?r(s.value):(0,l.formatValue)(n,s.format,s.value),secondaryValue:w?r(d.value):(0,l.formatValue)(n,d.format,d.value),delta:h,reportUrl:p,reportUrlType:_}},u=(e,t,o,n)=>{const{getReportItems:a,getReportItemsError:i,isResolving:l}=e(s.REPORTS_STORE_NAME),{woocommerce_default_date_range:m}=e(s.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings"),d=(0,c.getCurrentDates)(o,m),u=d.primary.before,p=d.secondary.before,_=t.map((e=>e.stat)).join(","),w=(0,s.getFilterQuery)({filters:n,query:o}),h={...w,after:(0,c.appendTimestamp)(d.primary.after,"start"),before:(0,c.appendTimestamp)(u,u.isSame(r()(),"day")?"now":"end"),stats:_},g={...w,after:(0,c.appendTimestamp)(d.secondary.after,"start"),before:(0,c.appendTimestamp)(p,p.isSame(r()(),"day")?"now":"end"),stats:_};return{primaryData:a("performance-indicators",h),primaryError:i("performance-indicators",h)||null,primaryRequesting:l("getReportItems",["performance-indicators",h]),secondaryData:a("performance-indicators",g),secondaryError:i("performance-indicators",g)||null,secondaryRequesting:l("getReportItems",["performance-indicators",g]),defaultDateRange:m}}},54777:(e,t,o)=>{o.r(t),o.d(t,{default:()=>mt});var n=o(69307),r=o(94333),a=o(9818),c=o(67221),s=o(10431),i=o(7829),l=o(7862),m=o.n(l),d=o(65736),u=o(90353),p=o(86020),_=o(55609),w=o(14599),h=o(92819),g=o(53644),E=o(22629),k=o(76357),y=o(74617),v=o(17844),f=o(86053),b=o(17062);function S(e){(0,w.recordEvent)(`activity_panel_orders_${e}`,{})}function N({unreadOrdersCount:e,orderStatuses:t}){const o=(0,n.useMemo)((()=>({page:1,per_page:5,status:t,_fields:["id","number","currency","status","total","customer","line_items","customer_id","date_created_gmt"]})),[t]),r=(0,n.useContext)(v.CurrencyContext),i=r.getCurrencyConfig(),{currencySymbols:l={}}=(0,b.O3)("onboarding",{}),{orders:m=[],isRequesting:u,isError:_,customerItems:w}=(0,a.useSelect)((n=>{const{getOrders:r,hasFinishedResolution:a,getOrdersError:s}=n(c.ORDERS_STORE_NAME),{getItems:i}=n(c.ITEMS_STORE_NAME);if(!t.length&&0===e)return{isRequesting:!1};const l=r(o,null),m=a("getOrders",[o]);if(m||null===e||null===l)return{isError:Boolean(s(o)),isRequesting:!0,orderStatuses:t};const d=i("customers",{users:l.map((e=>e.customer_id)).filter((e=>0!==e)),_fields:["id","name","country","user_id"]});return{orders:l,isError:Boolean(s(l)),isRequesting:m,orderStatuses:t,customerItems:d}}));if(_){if(!t.length&&window.wcAdminFeatures.analytics)return(0,n.createElement)(p.EmptyContent,{title:(0,d.__)("You currently don't have any actionable statuses. To display orders here, select orders that require further review in settings.","woocommerce"),actionLabel:(0,d.__)("Settings","woocommerce"),actionURL:(0,y.getAdminLink)("admin.php?page=wc-admin&path=/analytics/settings")});throw new Error("Failed to load orders, raise error to trigger ErrorBoundary")}const h=w?Array.from(w,(([,e])=>e)):[];return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.Section,null,u?(0,n.createElement)(f.e,{className:"woocommerce-order-activity-card",hasAction:!0,hasDate:!0,lines:1}):function(e,t,o){if(0===e.length)return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(f.U,{className:"woocommerce-empty-activity-card",title:"",icon:""},(0,n.createElement)("span",{className:"woocommerce-order-empty__success-icon",role:"img","aria-labelledby":"woocommerce-order-empty-message"},"ðŸŽ‰"),(0,n.createElement)(p.H,{id:"woocommerce-order-empty-message"},(0,d.__)("Youâ€™ve fulfilled all your orders","woocommerce"))),(0,n.createElement)(p.Link,{href:"edit.php?post_type=shop_order",onClick:()=>S("orders_manage"),className:"woocommerce-layout__activity-panel-outbound-link woocommerce-layout__activity-panel-empty",type:"wp-admin"},(0,d.__)("Manage all orders","woocommerce")));const r=e=>{const{name:t}=e||{};return t?`{{customerLink}}${t}{{/customerLink}}`:""},a=e=>{const{id:o,number:a,customer_id:c}=e,i=t.find((e=>e.user_id===c))||{};let l=null;return i&&i.id&&(l=window.wcAdminFeatures.analytics?(0,s.getNewPath)({},"/analytics/customers",{filter:"single_customer",customers:i.id}):(0,y.getAdminLink)("user-edit.php?user_id="+i.id)),(0,n.createElement)(n.Fragment,null,(0,k.Z)({mixedString:(0,d.sprintf)((0,d.__)("{{orderLink}}Order #%(orderNumber)s{{/orderLink}} %(customerString)s","woocommerce"),{orderNumber:a,customerString:r(i)}),components:{orderLink:(0,n.createElement)(p.Link,{href:(0,y.getAdminLink)("post.php?action=edit&post="+o),onClick:()=>S("order_number"),type:"wp-admin"}),destinationFlag:i&&i.country?(0,n.createElement)(p.Flag,{code:i&&i.country,round:!1}):null,customerLink:l?(0,n.createElement)(p.Link,{href:l,onClick:()=>S("customer_name"),type:"wc-admin"}):(0,n.createElement)("span",null)}}))},c=[];return e.forEach((e=>{const{date_created_gmt:t,line_items:r,id:s}=e,i=r?r.length:0;c.push((0,n.createElement)(f.U,{key:s,className:"woocommerce-order-activity-card",title:a(e),date:t,onClick:({target:e})=>{S("orders_begin_fulfillment"),e.href||(window.location.href=(0,y.getAdminLink)(`post.php?action=edit&post=${s}`))},subtitle:(0,n.createElement)("div",null,(0,n.createElement)("span",null,(0,d.sprintf)((0,d._n)("%d product","%d products",i,"woocommerce"),i)),(0,n.createElement)("span",null,o(e.total,e.currency)))},(0,n.createElement)(p.OrderStatus,{order:e,orderStatusMap:(0,b.O3)("orderStatuses",{})})))})),(0,n.createElement)(n.Fragment,null,c,(0,n.createElement)(p.Link,{href:"edit.php?post_type=shop_order",className:"woocommerce-layout__activity-panel-outbound-link",onClick:()=>S("orders_manage"),type:"wp-admin"},(0,d.__)("Manage all orders","woocommerce")))}(m,h,((e,t)=>{if(!t)return null;if(i&&i.code===t)return r.formatAmount(e);const o=l[t];return o?(0,v.CurrencyFactory)({...i,symbol:(0,E.decodeEntities)(o),code:t}).formatAmount(e):`${t}${e}`}))))}N.propTypes={isError:m().bool,isRequesting:m().bool,unreadOrdersCount:m().number,orders:m().array.isRequired,orderStatuses:m().array},N.defaultProps={orders:[],isError:!1,isRequesting:!1};const C=N;var T=o(39630),R=o(76292),A=o.n(R);class P extends n.Component{constructor(e){super(e),this.state={quantity:e.product.stock_quantity,editing:!1,edited:!1},this.beginEdit=this.beginEdit.bind(this),this.cancelEdit=this.cancelEdit.bind(this),this.onQuantityChange=this.onQuantityChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.onSubmit=this.onSubmit.bind(this)}recordStockEvent(e,t={}){(0,w.recordEvent)(`activity_panel_stock_${e}`,t)}beginEdit(){const{product:e}=this.props;this.setState({editing:!0,quantity:e.stock_quantity},(()=>{this.quantityInput&&this.quantityInput.focus()})),this.recordStockEvent("update_stock")}cancelEdit(){const{product:e}=this.props;this.setState({editing:!1,quantity:e.stock_quantity}),this.recordStockEvent("cancel")}handleKeyDown(e){e.keyCode===T.ESCAPE&&this.cancelEdit()}onQuantityChange(e){this.setState({quantity:e.target.value})}async onSubmit(){const{product:e,updateProductStock:t,createNotice:o}=this.props,n=parseInt(this.state.quantity,10);e.stock_quantity!==n?(this.setState({editing:!1,edited:!0}),await t(e,n)?o("success",(0,d.sprintf)((0,d.__)("%s stock updated","woocommerce"),e.name),{actions:[{label:(0,d.__)("Undo","woocommerce"),onClick:()=>{t(e,e.stock_quantity),this.recordStockEvent("undo")}}]}):o("error",(0,d.sprintf)((0,d.__)("%s stock could not be updated","woocommerce"),e.name)),this.recordStockEvent("save",{quantity:n})):this.setState({editing:!1})}getActions(){const{editing:e}=this.state;return e?[(0,n.createElement)(_.Button,{key:"save",type:"submit",isPrimary:!0},(0,d.__)("Save","woocommerce")),(0,n.createElement)(_.Button,{key:"cancel",type:"reset"},(0,d.__)("Cancel","woocommerce"))]:[(0,n.createElement)(_.Button,{key:"update",isSecondary:!0,onClick:this.beginEdit},(0,d.__)("Update stock","woocommerce"))]}getBody(){const{product:e}=this.props,{editing:t,quantity:o}=this.state;return t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(_.BaseControl,{className:"woocommerce-stock-activity-card__edit-quantity"},(0,n.createElement)("input",{className:"components-text-control__input",type:"number",value:o,onKeyDown:this.handleKeyDown,onChange:this.onQuantityChange,ref:e=>{this.quantityInput=e}})),(0,n.createElement)("span",null,(0,d.__)("in stock","woocommerce"))):(0,n.createElement)("span",{className:(0,i.Z)("woocommerce-stock-activity-card__stock-quantity",{"out-of-stock":e.stock_quantity<1})},(0,d.sprintf)((0,d.__)("%d in stock","woocommerce"),e.stock_quantity))}render(){const{product:e}=this.props,{edited:t,editing:o}=this.state,r=(0,b.O3)("notifyLowStockAmount",0),a=Number.isFinite(e.low_stock_amount)?e.low_stock_amount:r,c=e.stock_quantity<=a,s=e.last_order_date?(0,d.sprintf)((0,d.__)("Last ordered %s","woocommerce"),A().utc(e.last_order_date).fromNow()):null;if(!c&&!t)return null;const l=(0,n.createElement)(p.Link,{href:"post.php?action=edit&post="+(e.parent_id||e.id),onClick:()=>this.recordStockEvent("product_name"),type:"wp-admin"},e.name);let m=null;"variation"===e.type&&(m=Object.values(e.attributes).map((e=>e.option)).join(", "));const u=(0,h.get)(e,["images",0])||(0,h.get)(e,["image"]),_=(0,i.Z)("woocommerce-stock-activity-card__image-overlay__product",{"is-placeholder":!u||!u.src}),w=(0,n.createElement)("div",{className:"woocommerce-stock-activity-card__image-overlay"},(0,n.createElement)("div",{className:_},(0,n.createElement)(p.ProductImage,{product:e}))),g=(0,i.Z)("woocommerce-stock-activity-card",{"is-dimmed":!o&&!c}),E=(0,n.createElement)(f.U,{className:g,title:l,subtitle:m,icon:w,date:s,actions:this.getActions()},this.getBody());return o?(0,n.createElement)("form",{onReset:this.cancelEdit,onSubmit:this.onSubmit},E):E}}const O={page:1,per_page:5,status:"publish",_fields:["attributes","id","images","last_order_date","low_stock_amount","name","parent_id","stock_quantity","type"]};class L extends n.Component{constructor(e){super(e),this.updateStock=this.updateStock.bind(this)}async updateStock(e,t){const{invalidateResolution:o,updateProductStock:n}=this.props,r=await n(e,t);return r&&(o("getItems",["products/low-in-stock",O]),o("getItemsTotalCount",["products/count-low-in-stock",g.Ox,null])),r}renderProducts(){const{products:e,createNotice:t}=this.props;return e.map((e=>(0,n.createElement)(P,{key:e.id,product:e,updateProductStock:this.updateStock,createNotice:t})))}render(){const{lowStockProductsCount:e,isError:t,isRequesting:o,products:r}=this.props;if(t)throw new Error("Failed to load low stock products, Raise error to trigger ErrorBoundary");if(o||!r.length){const t=Math.min(5,null!=e?e:1),o=Array.from(new Array(t)).map(((e,t)=>(0,n.createElement)(f.e,{key:t,className:"woocommerce-stock-activity-card",hasAction:!0,lines:1})));return(0,n.createElement)(p.Section,null,o)}return(0,n.createElement)(p.Section,null,this.renderProducts())}}L.propTypes={lowStockProductsCount:m().number,products:m().array.isRequired,isError:m().bool,isRequesting:m().bool},L.defaultProps={products:[],isError:!1,isRequesting:!1};const x=(0,r.compose)((0,a.withSelect)((e=>{const{getItems:t,getItemsError:o,isResolving:n}=e(c.ITEMS_STORE_NAME);return{products:Array.from(t("products/low-in-stock",O).values()),isError:Boolean(o("products/low-in-stock",O)),isRequesting:n("getItems",["products/low-in-stock",O])}})),(0,a.withDispatch)((e=>{const{invalidateResolution:t,updateProductStock:o}=e(c.ITEMS_STORE_NAME),{createNotice:n}=e("core/notices");return{createNotice:n,invalidateResolution:t,updateProductStock:o}})))(L);var I=o(28870),M=o(41043);const q=()=>(0,n.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)("mask",{id:"mask0",style:"mask-type:alpha",maskUnits:"userSpaceOnUse",x:"1",y:"1",width:"14",height:"14"},(0,n.createElement)("path",{d:"M7.99992 1.33301C4.31992 1.33301 1.33325 4.31967 1.33325 7.99967C1.33325 11.6797 4.31992 14.6663 7.99992 14.6663C11.6799 14.6663 14.6666 11.6797 14.6666 7.99967C14.6666 4.31967 11.6799 1.33301 7.99992 1.33301ZM7.99992 13.333C5.05992 13.333 2.66659 10.9397 2.66659 7.99967C2.66659 5.05967 5.05992 2.66634 7.99992 2.66634C10.9399 2.66634 13.3333 5.05967 13.3333 7.99967C13.3333 10.9397 10.9399 13.333 7.99992 13.333ZM6.66658 9.44634L11.0599 5.05301L11.9999 5.99967L6.66658 11.333L3.99992 8.66634L4.93992 7.72634L6.66658 9.44634Z",fill:"white"})),(0,n.createElement)("g",{mask:"url(#mask0)"},(0,n.createElement)("rect",{width:"16",height:"16",fill:"#4AB866"})));var U=o(346),D=o(37873);const F={page:1,per_page:D.X6,status:"hold",_embed:1};class B extends n.Component{recordReviewEvent(e,t){(0,w.recordEvent)(`reviews_${e}`,t||{})}deleteReview(e){const{deleteReview:t,createNotice:o,updateReview:n,clearReviewsCache:r}=this.props;e&&t(e).then((()=>{r(),o("success",(0,d.__)("Review successfully deleted.","woocommerce"),{actions:[{label:(0,d.__)("Undo","woocommerce"),onClick:()=>{n(e,{status:"untrash"},{_embed:1}).then((()=>r()))}}]})})).catch((()=>{o("error",(0,d.__)("Review could not be deleted.","woocommerce"))}))}updateReviewStatus(e,t,o){const{createNotice:n,updateReview:r,clearReviewsCache:a}=this.props;e&&r(e,{status:t}).then((()=>{a(),n("success",(0,d.__)("Review successfully updated.","woocommerce"),{actions:[{label:(0,d.__)("Undo","woocommerce"),onClick:()=>{r(e,{status:o},{_embed:1}).then((()=>a()))}}]})})).catch((()=>{n("error",(0,d.__)("Review could not be updated.","woocommerce"))}))}renderReview(e){const t=e&&e._embedded&&e._embedded.up&&e._embedded.up[0]||null;if(e.isUpdating)return(0,n.createElement)(f.e,{key:e.id,className:"woocommerce-review-activity-card",hasAction:!0,hasDate:!0,lines:1});if((0,h.isNull)(t)||e.status!==F.status)return null;const o=(0,k.Z)({mixedString:(0,d.sprintf)((0,d.__)("{{authorLink}}%1$s{{/authorLink}}{{verifiedCustomerIcon/}} reviewed {{productLink}}%2$s{{/productLink}}","woocommerce"),e.reviewer,t.name),components:{productLink:(0,n.createElement)(p.Link,{href:t.permalink,onClick:()=>this.recordReviewEvent("product"),type:"external"}),authorLink:(0,n.createElement)(p.Link,{href:(0,y.getAdminLink)("admin.php?page=wc-admin&path=%2Fcustomers&search="+e.reviewer),onClick:()=>this.recordReviewEvent("customer"),type:"external"}),verifiedCustomerIcon:e.verified?(0,n.createElement)("span",{className:"woocommerce-review-activity-card__verified"},(0,n.createElement)(_.Tooltip,{text:(0,d.__)("Verified owner","woocommerce")},(0,n.createElement)("span",null,(0,n.createElement)(q,null)))):null}}),r=(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.ReviewRating,{review:e,icon:M.Z,outlineIcon:I.Z,size:13})),a=(0,h.get)(t,["images",0])||(0,h.get)(t,["image"]),c=(0,i.Z)("woocommerce-review-activity-card__image-overlay__product",{"is-placeholder":!a||!a.src}),s=(0,n.createElement)("div",{className:"woocommerce-review-activity-card__image-overlay"},(0,n.createElement)("div",{className:c},(0,n.createElement)(p.ProductImage,{product:t,width:33,height:33}))),l={date:e.date_created_gmt,status:e.status},m=[(0,n.createElement)(_.Button,{key:"approve-action",isSecondary:!0,onClick:()=>{this.recordReviewEvent("approve",l),this.updateReviewStatus(e.id,"approved",e.status)}},(0,d.__)("Approve","woocommerce")),(0,n.createElement)(_.Button,{key:"spam-action",isTertiary:!0,onClick:()=>{this.recordReviewEvent("mark_as_spam",l),this.updateReviewStatus(e.id,"spam",e.status)}},(0,d.__)("Mark as spam","woocommerce")),(0,n.createElement)(_.Button,{key:"delete-action",isDestructive:!0,isTertiary:!0,onClick:()=>{this.recordReviewEvent("delete",l),this.deleteReview(e.id)}},(0,d.__)("Delete","woocommerce"))];return(0,n.createElement)(f.U,{className:"woocommerce-review-activity-card",key:e.id,title:o,subtitle:r,date:e.date_created_gmt,icon:s,actions:m},(0,n.createElement)("span",{dangerouslySetInnerHTML:(0,U.ZP)(e.review)}))}renderReviews(e){const t=e.map((e=>this.renderReview(e,this.props)));return 0===t.filter(Boolean).length?(0,n.createElement)(n.Fragment,null):(0,n.createElement)(n.Fragment,null,t,(0,n.createElement)(p.Link,{href:(0,y.getAdminLink)("edit.php?post_type=product&page=product-reviews"),onClick:()=>this.recordReviewEvent("reviews_manage"),className:"woocommerce-layout__activity-panel-outbound-link woocommerce-layout__activity-panel-empty",type:"wp-admin"},(0,d.__)("Manage all reviews","woocommerce")))}render(){const{isRequesting:e,isError:t,reviews:o}=this.props;if(t)throw new Error("Failed to load reviews, Raise error to trigger ErrorBoundary");return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.Section,null,e||!o.length?(0,n.createElement)(f.e,{className:"woocommerce-review-activity-card",hasAction:!0,hasDate:!0,lines:1}):(0,n.createElement)(n.Fragment,null,this.renderReviews(o))))}}B.propTypes={reviews:m().array.isRequired,isError:m().bool,isRequesting:m().bool},B.defaultProps={reviews:[],isError:!1,isRequesting:!1},B.contextType=v.CurrencyContext;const H=(0,r.compose)([(0,a.withSelect)(((e,t)=>{const{hasUnapprovedReviews:o}=t,{getReviews:n,getReviewsError:r,isResolving:a}=e(c.REVIEWS_STORE_NAME);let s=[],i=!1,l=!1;return o&&(s=n(F),i=Boolean(r(F)),l=a("getReviews",[F])),{reviews:s,isError:i,isRequesting:l}})),(0,a.withDispatch)(((e,t)=>{const{deleteReview:o,updateReview:n,invalidateResolution:r}=e(c.REVIEWS_STORE_NAME),{createNotice:a}=e("core/notices");return{deleteReview:o,createNotice:a,updateReview:n,clearReviewsCache:()=>{r("getReviews",[F]),t.reviews&&t.reviews.length<2&&r("getReviewsTotalCount",[D.wY])}}}))])(B);var Z=o(53736);const W={_fields:["id"]},z={status:"publish",_fields:["id"]},j=()=>{const e=(0,a.useSelect)((e=>{const{getOrdersTotalCount:t,hasFinishedResolution:o}=e(c.ORDERS_STORE_NAME),{getProductsTotalCount:n,hasFinishedResolution:r}=e(c.PRODUCTS_STORE_NAME),a=t(W,0),s=(0,g.sg)(e),i=(0,b.O3)("reviewsEnabled","no"),l=(0,g.xX)(e,s),m=(0,b.O3)("manageStock","no"),d=(0,g.ae)(e),u=(0,D.Vh)(e),p=n(z,0),_=!o("getOrdersTotalCount",[W,0])||!r("getProductsTotalCount",[z,0]),w=e(c.ONBOARDING_STORE_NAME).getTaskList("setup");return{loadingOrderAndProductCount:_,lowStockProductsCount:d,unapprovedReviewsCount:u,unreadOrdersCount:l,manageStock:m,isTaskListHidden:w?.isHidden,publishedProductCount:p,reviewsEnabled:i,totalOrderCount:a,orderStatuses:s}})),t=e.loadingOrderAndProductCount?[]:function({lowStockProductsCount:e,unapprovedReviewsCount:t,unreadOrdersCount:o,manageStock:r,isTaskListHidden:a,orderStatuses:c,publishedProductCount:s,reviewsEnabled:i,totalOrderCount:l}){return a?[l>0&&{className:"woocommerce-homescreen-card",count:o,collapsible:!0,id:"orders-panel",initialOpen:!1,panel:(0,n.createElement)(p.__experimentalErrorBoundary,{errorMessage:(0,n.createElement)(n.Fragment,null,(0,d.__)("There was an error getting your orders.","woocommerce"),(0,n.createElement)("br",null),(0,d.__)("Please try again.","woocommerce"))},(0,n.createElement)(C,{unreadOrdersCount:o,orderStatuses:c})),title:(0,d.__)("Orders","woocommerce")},l>0&&s>0&&"yes"===r&&{className:"woocommerce-homescreen-card",count:e,id:"stock-panel",initialOpen:!1,collapsible:0!==e,panel:(0,n.createElement)(p.__experimentalErrorBoundary,{errorMessage:(0,n.createElement)(n.Fragment,null,(0,d.__)("There was an error getting your low stock products.","woocommerce"),(0,n.createElement)("br",null),(0,d.__)("Please try again.","woocommerce"))},(0,n.createElement)(x,{lowStockProductsCount:e})),title:(0,d.__)("Stock","woocommerce")},s>0&&t>0&&"yes"===i&&{className:"woocommerce-homescreen-card",id:"reviews-panel",count:t,initialOpen:!1,collapsible:0!==t,panel:(0,n.createElement)(p.__experimentalErrorBoundary,{errorMessage:(0,n.createElement)(n.Fragment,null,(0,d.__)("There was an error getting your reviews.","woocommerce"),(0,n.createElement)("br",null),(0,d.__)("Please try again.","woocommerce"))},(0,n.createElement)(H,{hasUnapprovedReviews:t>0})),title:(0,d.__)("Reviews","woocommerce")}].filter(Boolean):[]}(e);if((0,n.useEffect)((()=>{if(void 0!==e.isTaskListHidden){const o=t.reduce(((e,t)=>(e[(0,h.snakeCase)(t.id)]=!0,e)),{task_list:e.isTaskListHidden});(0,w.recordEvent)("activity_panel_visible_panels",o)}}),[e.isTaskListHidden]),0===t.length)return null;const o=e=>{const{opened_panel:t}=(0,Z.DP)(window.location.search);return e===t};return(0,n.createElement)(_.Panel,{className:"woocommerce-activity-panel"},t.map((e=>{const{className:t,count:r,id:a,initialOpen:c,panel:s,title:i,collapsible:l}=e;return l?(0,n.createElement)(_.PanelBody,{title:[(0,n.createElement)(_.__experimentalText,{key:i,variant:"title.small",size:"20",lineHeight:"28px"},i),null!==r&&(0,n.createElement)(p.Badge,{key:`${i}-badge`,count:r})],key:a,className:t,initialOpen:o(a)||c,collapsible:l,disabled:!l,onToggle:e=>{e&&(0,w.recordEvent)("activity_panel_open",{tab:a})}},(0,n.createElement)(_.PanelRow,null,s)):(0,n.createElement)("div",{className:"components-panel__body",key:a},(0,n.createElement)("h2",{className:"components-panel__body-title"},(0,n.createElement)(_.Button,{className:"components-panel__body-toggle","aria-expanded":!1,disabled:!0},(0,n.createElement)(_.__experimentalText,{variant:"title.small",size:"20",lineHeight:"28px"},i),null!==r&&(0,n.createElement)(p.Badge,{count:r}))))})))},G=({children:e,shouldStick:t=!1})=>{const[o,r]=(0,n.useState)(!1),a=(0,n.useRef)(null),c=(0,n.useRef)(null),s=(0,n.useCallback)((()=>{if(!a.current)return;const{bottom:e,top:t}=a.current.getBoundingClientRect();null===c.current&&(c.current=t);const o=e<window.innerHeight;t===c.current&&r(o)}),[]);return(0,n.useLayoutEffect)((()=>{if(t)return s(),window.addEventListener("resize",s),window.addEventListener("scroll",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("scroll",s)}}),[s,t]),(0,n.createElement)("div",{className:"woocommerce-homescreen-column",ref:a,style:{position:t&&o?"sticky":"static"}},e)};var J=o(63724),V=o(14812);const $=o.p+"0e8ec0e45d8a1d55b30c.png",Y=o.p+"f574e970a917e4dff5ec.png",Q=o.p+"d11c9a0dc859f1236a96.png",K="woocommerce_navigation_intro_modal_dismissed",X=()=>{const[e,t]=(0,n.useState)(!0),{updateOptions:o}=(0,a.useDispatch)(c.OPTIONS_STORE_NAME),{isDismissed:r,isResolving:s}=(0,a.useSelect)((e=>{const{getOption:t,isResolving:o}=e(c.OPTIONS_STORE_NAME),n=t(K);return{isDismissed:"yes"===n,isResolving:void 0===n||o("getOption",[K])}}));if(!e||r||s)return null;const i=(e,t,o)=>({content:(0,n.createElement)("div",{className:"woocommerce-navigation-intro-modal__page-wrapper"},(0,n.createElement)("div",{className:"woocommerce-navigation-intro-modal__page-text"},(0,n.createElement)(V.Text,{variant:"title.large",as:"h2",size:"32",lineHeight:"40px"},e),(0,n.createElement)(V.Text,{as:"p",variant:"body.large",size:"16",lineHeight:"24px"},t)),(0,n.createElement)("div",{className:"woocommerce-navigation-intro-modal__image-wrapper"},(0,n.createElement)("img",{alt:e,src:o})))});return(0,n.createElement)(_.Guide,{className:"woocommerce-navigation-intro-modal",onFinish:()=>{o({[K]:"yes"}),(0,w.recordEvent)("navigation_intro_modal_close",{}),t(!1)},pages:[i((0,d.__)("A new navigation for WooCommerce","woocommerce"),(0,d.__)("All of your store management features in one place","woocommerce"),$),i((0,d.__)("Focus on managing your store","woocommerce"),(0,d.__)("Give your attention to key areas of WooCommerce with little distraction","woocommerce"),Y),i((0,d.__)("Easily find and favorite your extensions","woocommerce"),(0,d.__)("They'll appear in the top level of the navigation for quick access","woocommerce"),Q)]})};var ee=o(92694);const te=(0,ee.applyFilters)("woocommerce_admin_homepage_default_stats",["revenue/total_sales","revenue/net_revenue","orders/orders_count","products/items_sold","jetpack/stats/visitors","jetpack/stats/views"]),oe=["revenue/net_revenue","products/items_sold"];var ne=o(78855);const re=(0,a.withSelect)(((e,{stats:t,query:o})=>(0,ne.A)(e,t,o)))((({stats:e,primaryData:t,secondaryData:o,primaryRequesting:r,secondaryRequesting:a,primaryError:c,secondaryError:l,query:m})=>{const{formatAmount:u,getCurrencyConfig:_}=(0,n.useContext)(v.CurrencyContext);if(c||l)return null;const h=(0,s.getPersistedQuery)(m),g=_();return(0,n.createElement)("ul",{className:(0,i.Z)("woocommerce-stats-overview__stats",{"is-even":e.length%2==0})},e.map((e=>{if(r||a)return(0,n.createElement)(p.SummaryNumberPlaceholder,{key:e.stat});const{primaryValue:c,secondaryValue:s,delta:i,reportUrl:l,reportUrlType:m}=(0,ne.Z)({indicator:e,primaryData:t,secondaryData:o,currency:g,formatAmount:u,persistedQuery:h});return(0,n.createElement)(p.SummaryNumber,{isHomescreen:!0,key:e.stat,href:l,hrefType:m,label:e.label,value:c,prevLabel:(0,d.__)("Previous period:","woocommerce"),prevValue:s,delta:i,onLinkClickCallback:()=>{(0,w.recordEvent)("statsoverview_indicators_click",{key:e.stat})}})})))}));var ae=o(23418);(0,d.__)("Facebook for WooCommerce","woocommerce"),(0,d.__)("Jetpack","woocommerce"),(0,d.__)("Klarna Checkout for WooCommerce","woocommerce"),(0,d.__)("Klarna Payments for WooCommerce","woocommerce"),(0,d.__)("Mailchimp for WooCommerce","woocommerce"),(0,d.__)("Creative Mail for WooCommerce","woocommerce"),(0,d.__)("WooCommerce PayPal","woocommerce"),(0,d.__)("WooCommerce Stripe","woocommerce"),(0,d.__)("WooCommerce Payfast","woocommerce"),(0,d.__)("WooPayments","woocommerce"),(0,d.__)("WooCommerce Shipping & Tax","woocommerce"),(0,d.__)("WooCommerce Shipping & Tax","woocommerce"),(0,d.__)("WooCommerce Shipping & Tax","woocommerce"),(0,d.__)("WooCommerce ShipStation Gateway","woocommerce"),(0,d.__)("Mercado Pago payments for WooCommerce","woocommerce"),(0,d.__)("Google Listings and Ads","woocommerce"),(0,d.__)("Razorpay","woocommerce"),(0,d.__)("MailPoet","woocommerce"),(0,d.__)("Pinterest for WooCommerce","woocommerce"),(0,d.__)("TikTok for WooCommerce","woocommerce"),(0,d.__)("Omnichannel for WooCommerce","woocommerce");const ce=a.controls&&a.controls.dispatch?a.controls.dispatch:ae.dispatch;a.controls&&a.controls.resolveSelect?a.controls.resolveSelect:ae.select;const se=e=>ce("core/notices","createNotice","error",e),ie=({onClickInstall:e,onClickDismiss:t,isBusy:o,jetpackInstallState:r})=>(0,n.createElement)("article",{className:"woocommerce-stats-overview__install-jetpack-promo"},(0,n.createElement)("div",{className:"woocommerce-stats-overview__install-jetpack-promo__content"},(0,n.createElement)(p.H,null,(0,d.__)("Get traffic stats with Jetpack","woocommerce")),(0,n.createElement)("p",null,(0,d.__)("Keep an eye on your views and visitors metrics with Jetpack. Requires Jetpack plugin and a WordPress.com account.","woocommerce"))),(0,n.createElement)("footer",null,(0,n.createElement)(_.Button,{isSecondary:!0,onClick:()=>{(0,w.recordEvent)("statsoverview_install_jetpack"),e()},disabled:o,isBusy:o},(e=>({unavailable:(0,d.__)("Get Jetpack","woocommerce"),installed:(0,d.__)("Activate Jetpack","woocommerce"),activated:(0,d.__)("Connect Jetpack","woocommerce")}[e]||""))(r)),(0,n.createElement)(_.Button,{isTertiary:!0,onClick:()=>{(0,w.recordEvent)("statsoverview_dismiss_install_jetpack"),t()},disabled:o,isBusy:o},(0,d.__)("No thanks","woocommerce")))),le=()=>{const{currentUserCan:e}=(0,c.useUser)(),{updateUserPreferences:t,...o}=(0,c.useUserPreferences)(),{canUserInstallPlugins:r,jetpackInstallState:s,isBusy:i}=(0,a.useSelect)((t=>{const{getPluginInstallState:o,isPluginsRequesting:n}=t(c.PLUGINS_STORE_NAME),r=o("jetpack");return{isBusy:n("getJetpackConnectUrl")||n("installPlugins")||n("activatePlugins"),jetpackInstallState:r,canUserInstallPlugins:e("install_plugins")}})),{installJetpackAndConnect:l}=(0,a.useDispatch)(c.PLUGINS_STORE_NAME);return r?(0,n.createElement)(ie,{jetpackInstallState:s,isBusy:i,onClickInstall:()=>{l(se,y.getAdminLink)},onClickDismiss:()=>{const e=o.homepage_stats||{};e.installJetpackDismissed=!0,t({homepage_stats:e})}}):null},{performanceIndicators:me=[]}=(0,b.O3)("dataEndpoints",{performanceIndicators:[]}),de=me.filter((e=>te.includes(e.stat))),ue=()=>(0,n.createElement)(V.Text,{variant:"title.small",size:"20",lineHeight:"28px"},(0,d.__)("Stats overview","woocommerce")),pe=()=>{const{updateUserPreferences:e,...t}=(0,c.useUserPreferences)(),o=(0,h.get)(t,["homepage_stats","hiddenStats"],oe),r=(0,a.useSelect)((e=>e(c.PLUGINS_STORE_NAME).isJetpackConnected()),[]),i=(t.homepage_stats||{}).installJetpackDismissed,l=de.filter((e=>!o.includes(e.stat)));return(0,n.createElement)(_.Card,{size:"large",className:"woocommerce-stats-overview woocommerce-homescreen-card"},(0,n.createElement)(_.CardHeader,{size:"medium"},(0,n.createElement)(ue,null),(0,n.createElement)(p.EllipsisMenu,{label:(0,d.__)("Choose which values to display","woocommerce"),renderContent:()=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(p.MenuTitle,null,(0,d.__)("Display stats:","woocommerce")),de.map((t=>{const r=!o.includes(t.stat);return(0,n.createElement)(p.MenuItem,{checked:r,isCheckbox:!0,isClickable:!0,key:t.stat,onInvoke:()=>(t=>{const n=(0,h.xor)(o,[t]);e({homepage_stats:{hiddenStats:n}}),(0,w.recordEvent)("statsoverview_indicators_toggle",{indicator_name:t,status:n.includes(t)?"off":"on"})})(t.stat)},t.label)})))})),(0,n.createElement)(_.TabPanel,{className:"woocommerce-stats-overview__tabs",onSelect:e=>{(0,w.recordEvent)("statsoverview_date_picker_update",{period:e})},tabs:[{title:(0,d.__)("Today","woocommerce"),name:"today"},{title:(0,d.__)("Week to date","woocommerce"),name:"week"},{title:(0,d.__)("Month to date","woocommerce"),name:"month"}]},(e=>(0,n.createElement)(n.Fragment,null,!r&&!i&&(0,n.createElement)(le,null),(0,n.createElement)(re,{query:{period:e.name,compare:"previous_period"},stats:l})))),(0,n.createElement)(_.CardFooter,null,(0,n.createElement)(p.Link,{className:"woocommerce-stats-overview__more-btn",href:(0,s.getNewPath)({},"/analytics/overview"),type:"wc-admin",onClick:()=>{(0,w.recordEvent)("statsoverview_indicators_click",{key:"view_detailed_stats"})}},(0,d.__)("View detailed stats","woocommerce"))))};var _e=o(26184),we=o(34200),he=o(87983),ge=o(58358),Ee=o(92486),ke=o(49704),ye=o(25918),ve=o(6520);const fe=({title:e,children:t})=>(0,n.createElement)("div",{className:"woocommerce-quick-links__category"},(0,n.createElement)("h3",{className:"woocommerce-quick-links__category-header"},e),t);var be=o(23374),Se=o(12532);const Ne=({icon:e,title:t,href:o,linkType:r,onClick:a})=>{const c="external"===r;return(0,n.createElement)("div",{className:"woocommerce-quick-links__item"},(0,n.createElement)(p.Link,{onClick:a,href:o,type:r,target:c?"_blank":null,className:"woocommerce-quick-links__item-link"},(0,n.createElement)(be.Z,{className:"woocommerce-quick-links__item-link__icon",icon:e}),(0,n.createElement)(V.Text,{className:"woocommerce-quick-links__item-link__text",as:"div",variant:"button",weight:"600",size:"14",lineHeight:"20px"},t),c&&(0,n.createElement)(be.Z,{icon:Se.Z})))};function Ce({path:e,tab:t=null,type:o,href:n=null}){return{"wc-admin":{href:`admin.php?page=wc-admin&path=%2F${e}`,linkType:"wc-admin"},"wp-admin":{href:e,linkType:"wp-admin"},"wc-settings":{href:`admin.php?page=wc-settings&tab=${t}`,linkType:"wp-admin"}}[o]||{href:n,linkType:"external"}}const Te=()=>{const e=(0,b.O3)("shopUrl"),t=(0,ee.applyFilters)("woocommerce_admin_homescreen_quicklinks",[]).reduce(((e,{icon:t,href:o,title:n})=>(new URL(o,window.location.href).origin===window.location.origin&&e.push({icon:t,link:{href:o,linkType:"wp-admin"},title:n,listItemTag:"quick-links-extension-link"}),e)),[]),o=function(e){return[{title:(0,d.__)("Marketing & Merchandising","woocommerce"),items:[{title:(0,d.__)("Marketing","woocommerce"),link:Ce({type:"wc-admin",path:"marketing"}),icon:_e.Z,listItemTag:"marketing"},{title:(0,d.__)("Add products","woocommerce"),link:Ce({type:"wp-admin",path:"post-new.php?post_type=product"}),icon:we.Z,listItemTag:"add-products"},{title:(0,d.__)("Personalize my store","woocommerce"),link:Ce({type:"wp-admin",path:"customize.php"}),icon:he.Z,listItemTag:"personalize-store"},{title:(0,d.__)("View my store","woocommerce"),link:Ce({type:"external",href:e}),icon:ge.Z,listItemTag:"view-store"}]},{title:(0,d.__)("Settings","woocommerce"),items:[{title:(0,d.__)("Store details","woocommerce"),link:Ce({type:"wc-settings",tab:"general"}),icon:Ee.Z,listItemTag:"edit-store-details"},{title:(0,d.__)("Payments","woocommerce"),link:Ce({type:"wc-settings",tab:"checkout"}),icon:ke.Z,listItemTag:"payment-settings"},{title:(0,d.__)("Tax","woocommerce"),link:Ce({type:"wc-settings",tab:"tax"}),icon:ye.Z,listItemTag:"tax-settings"},{title:(0,d.__)("Shipping","woocommerce"),link:Ce({type:"wc-settings",tab:"shipping"}),icon:ve.Z,listItemTag:"shipping-settings"}]}]}(e),r={title:(0,d.__)("Extensions","woocommerce"),items:t},a=t.length?[...o,r]:o;return(0,n.createElement)(_.Card,{size:"medium"},(0,n.createElement)(_.CardHeader,{size:"medium"},(0,n.createElement)(V.Text,{variant:"title.small",size:"20",lineHeight:"28px"},(0,d.__)("Store management","woocommerce"))),(0,n.createElement)(_.CardBody,{size:"custom",className:"woocommerce-store-management-links__card-body"},a.map((e=>(0,n.createElement)(fe,{key:e.title,title:e.title},e.items.map((({icon:e,listItemTag:t,title:o,link:{href:r,linkType:a}})=>(0,n.createElement)(Ne,{icon:e,key:`${o}_${t}_${r}`,title:o,linkType:a,href:r,onClick:()=>{(0,w.recordEvent)("home_quick_links_click",{task_name:t})}}))))))))};var Re=o(76486),Ae=o(33773),Pe=o(98817);const Oe=o.p+"93973815f7cd64d5f512.png",Le=({body:e})=>(0,n.createElement)("div",{className:"mobile-app-modal-layout"},(0,n.createElement)("div",{className:"mobile-app-modal-content"},e),(0,n.createElement)("div",{className:"mobile-app-modal-illustration"},(0,n.createElement)("img",{src:Oe,alt:(0,d.__)("Screen captures of the WooCommerce mobile app","woocommerce")}))),xe="user-cannot-install",Ie="not-owner-of-connection",Me="full-connection",qe="initializing",Ue=()=>{const{currentUserCan:e}=(0,c.useUser)(),{canUserInstallPlugins:t,jetpackInstallState:o,jetpackConnectionData:r}=(0,a.useSelect)((t=>{const{getPluginInstallState:o,getJetpackConnectionData:n}=t(c.PLUGINS_STORE_NAME),r=o("jetpack");return{jetpackConnectionData:n(),jetpackInstallState:r,canUserInstallPlugins:e("install_plugins")}})),{installJetpackAndConnect:s}=(0,a.useDispatch)(c.PLUGINS_STORE_NAME),[i,l]=(0,n.useState)(qe),m=(0,n.useCallback)((()=>{const e=window.location.href;s(se,(()=>e+"&jetpackState=returning")),l("installing")}),[s]);return(0,n.useEffect)((()=>{if(t)switch(o){case"installed":l("not-activated");break;case"unavailable":l("not-installed");break;case"activated":r&&!r?.connectionOwner?l("userless-connection"):r&&!r?.currentUser?.isMaster?l(Ie):r&&r?.currentUser?.isConnected&&r?.currentUser?.isMaster&&l(Me)}else l(xe)}),[t,o,r]),{state:i,installHandler:m,jetpackConnectionData:r}};var De=o(86989),Fe=o.n(De);const Be="fetching",He="success",Ze="error",We=({onClickHandler:e,isFetching:t})=>(0,n.createElement)(_.Button,{className:"send-magic-link-button",onClick:e},t&&(0,n.createElement)(p.Spinner,{className:"send-magic-link-spinner"}),(0,n.createElement)("div",{style:{visibility:t?"hidden":"visible"},className:"send-magic-link-button-contents"},(0,n.createElement)("div",{className:"send-magic-link-button-text"},(0,d.__)("âœ¨ï¸ Send the sign-in link","woocommerce")))),ze=({returnToSendLinkPage:e})=>(0,n.createElement)("div",{className:"email-sent-modal-body"},(0,n.createElement)("div",{className:"email-sent-illustration"}),(0,n.createElement)("div",{className:"email-sent-title"},(0,n.createElement)("h1",null,(0,d.__)("Check your email!","woocommerce"))),(0,n.createElement)("div",{className:"email-sent-subheader-spacer"},(0,n.createElement)("div",{className:"email-sent-subheader"},(0,d.__)("We just sent you the magic link. Open it on your mobile device and follow the instructions.","woocommerce"))),(0,n.createElement)("div",{className:"email-sent-footer"},(0,n.createElement)("div",{className:"email-sent-footer-prompt"},(0,d.__)("DIDNâ€™T GET IT?","woocommerce")),(0,n.createElement)("div",{className:"email-sent-footer-text"},(0,k.Z)({mixedString:(0,d.__)("Check your spam/junk email folder or {{ sendAnotherLink /}}.","woocommerce"),components:{sendAnotherLink:(0,n.createElement)(_.Button,{className:"email-sent-send-another-link",onClick:()=>{e()}},(0,d.__)("send another link","woocommerce"))}}))));o(99196);const je=({children:e})=>(0,n.createElement)("div",{className:"jetpack-installation-content"},(0,n.createElement)("div",{className:"modal-layout-header"},(0,n.createElement)("div",{className:"woo-icon"}),(0,n.createElement)("div",{className:"modal-header"},(0,n.createElement)("h1",null,(0,d.__)("Manage orders and track sales in real-time with the free mobile app","woocommerce")))),(0,n.createElement)("div",{className:"modal-layout-body"},e),(0,n.createElement)("div",{className:"modal-layout-footer"},(0,n.createElement)("div",{className:"mobile-footer-icons"},(0,n.createElement)("div",{className:"apple-icon"}),(0,n.createElement)("div",{className:"android-icon"})),(0,n.createElement)("div",{className:"mobile-footer-blurb"},(0,d.__)("The WooCommerce Mobile App is available on iOS and Android","woocommerce"))));var Ge=o(4210);const Je=()=>(0,n.createElement)("div",null,(0,n.createElement)(Ge.tv,{value:"https://woocommerce.com/mobile/?utm_source=wc_onboarding_mobile_task",size:140})),Ve=({loginUrl:e})=>(0,n.createElement)("div",null,e&&(0,n.createElement)("div",null,(0,n.createElement)(Ge.tv,{value:e,size:140}),(0,n.createElement)("p",null,(0,d.__)("The app version needs to be 15.7 or above to sign in with this link.","woocommerce"))),(0,n.createElement)("div",null,(0,k.Z)({mixedString:(0,d.__)("Any troubles signing in? Check out the {{link}}FAQ{{/link}}.","woocommerce"),components:{link:(0,n.createElement)(p.Link,{href:"https://woocommerce.com/document/android-ios-apps-login-help-faq/",target:"_blank",type:"external",onClick:()=>{(0,w.recordEvent)("onboarding_app_login_faq_click")}}),strong:(0,n.createElement)("strong",null)}}))),$e=({step:e,isJetpackPluginInstalled:t,wordpressAccountEmailAddress:o,completeInstallationStepHandler:r,sendMagicLinkHandler:a,sendMagicLinkStatus:c})=>{const[s,i]=(0,n.useState)(void 0);return(0,n.useEffect)((()=>{if("first"===e)i([{key:"first",label:(0,d.__)("Install the mobile app","woocommerce"),description:(0,d.__)("Scan the code below to download or upgrade the app, or visit woo.com/mobile from your mobile device.","woocommerce"),content:(0,n.createElement)(n.Fragment,null,(0,n.createElement)(Je,null),(0,n.createElement)(_.Button,{variant:"primary",className:"install-app-button",onClick:()=>{r()}},(0,d.__)("App is installed","woocommerce")))},{key:"second",label:(0,d.__)("Sign into the app","woocommerce"),description:"",content:(0,n.createElement)(n.Fragment,null)}]);else if("second"===e)if(t&&void 0!==o)i([{key:"first",label:(0,d.__)("App installed","woocommerce"),description:"",content:(0,n.createElement)(n.Fragment,null)},{key:"second",label:"Sign into the app",description:(0,d.sprintf)((0,d.__)("Weâ€™ll send a magic link to %s. Open it on your smartphone or tablet to sign into your store instantly.","woocommerce"),o),content:(0,n.createElement)(We,{isFetching:c===Be,onClickHandler:a})}]);else{const e=(0,b.O3)("siteUrl"),t=(0,b.O3)("currentUserData").username,o=`woocommerce://app-login?siteUrl=${encodeURIComponent(e)}&username=${encodeURIComponent(t)}`,r=o?(0,d.__)("Scan the QR code below and enter the wp-admin password in the app.","woocommerce"):(0,d.__)("Follow the instructions in the app to sign in.","woocommerce");i([{key:"first",label:(0,d.__)("App installed","woocommerce"),description:"",content:(0,n.createElement)(n.Fragment,null)},{key:"second",label:"Sign into the app",description:r,content:(0,n.createElement)(Ve,{loginUrl:o})}])}}),[e,t,o,r,a,c]),(0,n.createElement)("div",{className:"login-stepper-wrapper"},s&&(0,n.createElement)(p.Stepper,{isVertical:!0,currentStep:e,steps:s}))},Ye=({appInstalledClicked:e,isJetpackPluginInstalled:t,wordpressAccountEmailAddress:o,completeInstallationHandler:r,sendMagicLinkHandler:a,sendMagicLinkStatus:c})=>(0,n.createElement)(je,null,(0,n.createElement)("div",{className:"modal-subheader"},(0,n.createElement)("h3",null,(0,d.__)("Run your store from anywhere in two easy steps.","woocommerce"))),(0,n.createElement)($e,{step:e?"second":"first",isJetpackPluginInstalled:t,wordpressAccountEmailAddress:o,completeInstallationStepHandler:r,sendMagicLinkHandler:a,sendMagicLinkStatus:c}));var Qe=o(43631);const Ke=()=>{const[e,t]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1),{state:i,jetpackConnectionData:l}=Ue(),{updateOptions:m}=(0,a.useDispatch)(c.OPTIONS_STORE_NAME),[u,p]=(0,n.useState)(),[h]=(0,Ae.lr)();(0,n.useEffect)((()=>{h.get("mobileAppModal")?t(!0):t(!1),"returning"===h.get("jetpackState")&&r(!0)}),[h]);const[g,E]=(0,n.useState)(!1),[k,y]=(0,n.useState)(!1),[v,f]=(0,n.useState)(!1),{requestState:b,fetchMagicLinkApiCall:S}=(()=>{const[e,t]=(0,n.useState)("initializing"),{createNotice:o}=(0,a.useDispatch)("core/notices");return{requestState:e,fetchMagicLinkApiCall:(0,n.useCallback)((()=>{t(Be),Fe()({path:`${c.WC_ADMIN_NAMESPACE}/mobile-app/send-magic-link`}).then((e=>{"success"===e.code?t(He):(t(Ze),o("error",(0,d.__)("Sorry, an unknown error occurred.","woocommerce")))})).catch((e=>{t(Ze),(0,w.recordEvent)("magic_prompt_send_magic_link_error",{error:e.message,code:e.code}),"error_sending_mobile_magic_link"===e.code?o("error",(0,d.__)("We couldn't send the link. Try again in a few seconds.","woocommerce")):"invalid_user_permission_view_admin"===e.code?o("error",(0,d.__)("Sorry, your account doesn't have sufficient permission.","woocommerce")):"jetpack_not_connected"===e.code?o("error",e.message):o("error","We couldn't send the link. Try again in a few seconds.")}))}),[o])}})(),N=(0,n.useCallback)((()=>{E(!0),(0,w.recordEvent)("onboarding_app_install_click")}),[]),C=(0,n.useCallback)((()=>{S(),(0,w.recordEvent)("magic_prompt_send_signin_link_click")}),[S]);return(0,n.useEffect)((()=>{b===He&&y(!0)}),[b]),(0,n.useEffect)((()=>{if(k)p((0,n.createElement)(ze,{returnToSendLinkPage:()=>{y(!1),f(!0),(0,w.recordEvent)("magic_prompt_retry_send_signin_link")}}));else{var e;const t=null!==(e=i===Me&&void 0!==l?.currentUser?.wpcomUser?.email)&&void 0!==e&&e,o=l?.currentUser?.wpcomUser?.email;p((0,n.createElement)(Ye,{appInstalledClicked:g,isJetpackPluginInstalled:t,wordpressAccountEmailAddress:o,completeInstallationHandler:N,sendMagicLinkHandler:C,sendMagicLinkStatus:b}))}}),[g,C,k,o,l?.currentUser?.wpcomUser?.email,i,v,b]),(0,n.createElement)(n.Fragment,null,e&&(0,n.createElement)(_.Guide,{onFinish:()=>{m({woocommerce_admin_dismissed_mobile_app_modal:"yes"}),(0,s.updateQueryString)({jetpackState:void 0,mobileAppModal:void 0},void 0,Object.fromEntries(h.entries()))},className:"woocommerce__mobile-app-welcome-modal",pages:[{content:(0,n.createElement)(Le,{body:u})}]}))},Xe="wc/admin/mobile-app-help-entry-callback";(0,Pe.registerPlugin)("woocommerce-mobile-app-modal",{render:()=>{const{state:e}=Ue(),t=(0,n.useCallback)((t=>e===qe||e===xe||e===Ie?t:[...t,{title:(0,d.__)("Get the WooCommerce app","woocommerce"),link:(0,y.getAdminLink)("./admin.php?page=wc-admin&mobileAppModal=true"),linkType:"wc-admin"}]),[e]);return(0,n.useEffect)((()=>{(0,ee.removeFilter)(Qe.SETUP_TASK_HELP_ITEMS_FILTER,Xe),(0,ee.addFilter)(Qe.SETUP_TASK_HELP_ITEMS_FILTER,Xe,t,10)}),[t]),null},scope:"woocommerce-admin"});const et="woocommerce_homescreen_experimental_header_banner_item",tt=({children:e,order:t=1})=>(0,n.createElement)(_.Fill,{name:et},(o=>(0,p.createOrderedChildren)(e,t,o)));tt.Slot=({fillProps:e})=>(0,n.createElement)(_.Slot,{name:et,fillProps:e},p.sortFillsByOrder);const ot=({className:e})=>{const t=(0,V.useSlot)(et);return Boolean(t?.fills?.length)?(0,n.createElement)("div",{className:(0,i.Z)("woocommerce-homescreen__header",e)},(0,n.createElement)(tt.Slot,null)):null},nt="experimental_woocommerce_wcpay_feature",rt=({children:e,order:t=1})=>(0,n.createElement)(_.Fill,{name:nt},(o=>(0,p.createOrderedChildren)(e,t,o)));rt.Slot=({fillProps:e})=>(0,n.createElement)(_.Slot,{name:nt,fillProps:e},p.sortFillsByOrder);const at=({className:e})=>{const t=(0,V.useSlot)(nt);return Boolean(t?.fills?.length)?(0,n.createElement)("div",{className:(0,i.Z)("woocommerce-homescreen__header",e)},(0,n.createElement)(rt.Slot,null)):null},ct=(0,n.lazy)((()=>Promise.resolve().then(o.bind(o,76486)).then((e=>({default:e.TaskLists}))))),st=({defaultHomescreenLayout:e,query:t,taskListComplete:o,hasTaskList:r,showingProgressHeader:a,isLoadingTaskLists:s,isTaskListHidden:l})=>{var m;const p=(0,c.useUserPreferences)(),_=o||l,w=o||l,h=_||window.wcAdminFeatures.analytics,g=Object.keys(t).length>0&&!t.task,E=(0,Re.useActiveSetupTasklist)(),k="two_columns"===(p.homepage_layout||e)&&h,y=(0,n.useRef)(!0),v=(0,n.useCallback)((()=>{y.current=window.innerWidth>=782}),[]);(0,n.useLayoutEffect)((()=>(v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)})),[v]);const f=y.current&&k,b=null!==(m=t.mobileAppModal)&&void 0!==m&&m,S=()=>(0,n.createElement)(n.Suspense,{fallback:(0,n.createElement)(Re.TasksPlaceholder,{query:t})},E&&g&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(Re.ProgressTitle,{taskListId:E})),(0,n.createElement)(ct,{query:t}));return(0,n.createElement)(n.Fragment,null,g&&(0,n.createElement)(ot,{className:(0,i.Z)("woocommerce-homescreen",{"woocommerce-homescreen-column":!k})}),(0,n.createElement)("div",{className:(0,i.Z)("woocommerce-homescreen",{"two-columns":k})},g?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(G,{shouldStick:f},!s&&!a&&(0,n.createElement)(u.Z,{className:"your-store-today",title:(0,d.__)("Your store today","woocommerce"),subtitle:(0,d.__)("To do's, tips, and insights for your business","woocommerce")}),w&&(0,n.createElement)(at,null),l&&(0,n.createElement)(j,null),r&&S(),(0,n.createElement)(J.Z,null)),(0,n.createElement)(G,{shouldStick:f},window.wcAdminFeatures.analytics&&(0,n.createElement)(pe,null),_&&(0,n.createElement)(Te,null))):S(),b&&(0,n.createElement)(Ke,null),window.wcAdminFeatures.navigation&&(0,n.createElement)(X,null)))};st.propTypes={taskListComplete:m().bool,hasTaskList:m().bool,query:m().object.isRequired,shouldShowWelcomeModal:m().bool,shouldShowWelcomeFromCalypsoModal:m().bool,updateOptions:m().func.isRequired};const it=(0,r.compose)((0,a.withSelect)((e=>{const{isNotesRequesting:t}=e(c.NOTES_STORE_NAME),{getOption:o}=e(c.OPTIONS_STORE_NAME),{getTaskList:n,getTaskLists:r,hasFinishedResolution:a}=e(c.ONBOARDING_STORE_NAME),s=r(),i=!a("getTaskLists");return{defaultHomescreenLayout:o("woocommerce_default_homepage_layout")||"single_column",isBatchUpdating:t("batchUpdateNotes"),isLoadingTaskLists:i,isTaskListHidden:n("setup")?.isHidden,hasTaskList:(0,b.O3)("visibleTaskListIds",[]).length>0,showingProgressHeader:!!s.find((e=>e.isVisible&&e.displayProgressHeader)),taskListComplete:n("setup")?.isComplete}})))(st),lt=(0,b.O3)("onboarding",{}),mt=(0,r.compose)((0,c.withOnboardingHydration)({profileItems:lt.profile}),(0,a.withSelect)((e=>{const{getProfileItems:t,hasFinishedResolution:o}=e(c.ONBOARDING_STORE_NAME);return{profileItems:t(),hasFinishedResolution:o("getProfileItems",[])}})))((({profileItems:{completed:e,skipped:t}={},hasFinishedResolution:o})=>{(0,n.useEffect)((()=>{!o||e||t||(0,s.getHistory)().push((0,s.getNewPath)({},"/setup-wizard",{}))}),[o,e,t]);const r=(0,s.useQuery)();return(0,n.createElement)(it,{query:r})}))},63724:(e,t,o)=>{o.d(t,{Z:()=>S});var n=o(69307),r=o(65736),a=o(86020),c=o(55609),s=o(67221),i=o(9818),l=o(14599),m=o(86892),d=o(83165),u=o(14812),p=o(76292),_=o.n(p),w=o(86053),h=o(86357),g=o(53736);const E=({onClose:e})=>{const{createNotice:t}=(0,i.useDispatch)("core/notices"),{batchUpdateNotes:o,removeAllNotes:a}=(0,i.useDispatch)(s.NOTES_STORE_NAME);return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.Modal,{title:(0,r.__)("Dismiss all messages","woocommerce"),className:"woocommerce-inbox-dismiss-all-modal",onRequestClose:e},(0,n.createElement)("div",{className:"woocommerce-inbox-dismiss-all-modal__wrapper"},(0,n.createElement)("div",{className:"woocommerce-usage-modal__message"},(0,r.__)("Are you sure? Inbox messages will be dismissed forever.","woocommerce")),(0,n.createElement)("div",{className:"woocommerce-usage-modal__actions"},(0,n.createElement)(c.Button,{onClick:e},(0,r.__)("Cancel","woocommerce")),(0,n.createElement)(c.Button,{isPrimary:!0,onClick:()=>{(async()=>{(0,l.recordEvent)("wcadmin_inbox_action_dismissall",{});try{const e=await a({status:"unactioned"});t("success",(0,r.__)("All messages dismissed","woocommerce"),{actions:[{label:(0,r.__)("Undo","woocommerce"),onClick:()=>{o(e.map((e=>e.id)),{is_deleted:0})}}]})}catch(o){t("error",(0,r.__)("Messages could not be dismissed","woocommerce")),e()}})(),e()}},(0,r.__)("Yes, dismiss all","woocommerce"))))))},k={page:1,per_page:5,status:"unactioned",type:s.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted","is_read","locale"]},y=["en_US","en_AU","en_CA","en_GB","en_ZA"],v=_()("2022-01-11","YYYY-MM-DD").valueOf(),f=(e,t)=>{(0,l.recordEvent)("inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})};let b=!1;const S=({showHeader:e=!0})=>{const[t,o]=(0,n.useState)(k.per_page),[p,S]=(0,n.useState)(!1),[N,C]=(0,n.useState)([]),[T,R]=(0,n.useState)({}),{createNotice:A}=(0,i.useDispatch)("core/notices"),{removeNote:P,updateNote:O,triggerNoteAction:L,invalidateResolutionForStoreSelector:x}=(0,i.useDispatch)(s.NOTES_STORE_NAME),I=(0,g.GG)(),M=(0,n.useMemo)((()=>({...k,per_page:t})),[t]),{isError:q,notes:U,notesHaveResolved:D,isBatchUpdating:F,unreadNotesCount:B}=(0,i.useSelect)((e=>{const{getNotes:t,getNotesError:o,isNotesRequesting:n,hasFinishedResolution:r}=e(s.NOTES_STORE_NAME);return{notes:t(M),unreadNotesCount:t({...k,is_read:!1,per_page:-1}).length,isError:Boolean(o("getNotes",[M])),isBatchUpdating:n("batchUpdateNotes"),notesHaveResolved:!n("batchUpdateNotes")&&r("getNotes",[M])}}));(0,n.useEffect)((()=>{D&&U.length<t&&S(!0),D&&U.length&&C(U.map((e=>{const t=_()(e.date_created_gmt,"YYYY-MM-DD").valueOf();return y.includes(e.locale)&&t>=v?{...e,content:(0,h.r7)(e.content,320)}:e})))}),[U,D]);const[H,Z]=(0,n.useState)(!1);if(q){const e=(0,r.__)("There was an error getting your inbox. Please try again.","woocommerce"),t=(0,r.__)("Reload","woocommerce"),o=()=>{window.location.reload()};return(0,n.createElement)(a.EmptyContent,{title:e,actionLabel:t,actionURL:null,actionCallback:o})}return D&&!N.length?null:(0,n.createElement)(n.Fragment,null,H&&(0,n.createElement)(E,{onClose:()=>{Z(!1)}}),(0,n.createElement)("div",{className:"woocommerce-homepage-notes-wrapper"},!D&&!N.length&&(0,n.createElement)(a.Section,null,(0,n.createElement)(u.InboxNotePlaceholder,{className:"banner message-is-unread"})),(0,n.createElement)(a.Section,null,Boolean(N.length)&&(({hasNotes:e,isBatchUpdating:t,notes:o,onDismiss:s,onNoteActionClick:i,onNoteVisible:p,setShowDismissAllModal:_,showHeader:h=!0,loadMoreNotes:g,allNotesFetched:E,notesHaveResolved:y,unreadNotesCount:v})=>{if(t)return;if(!e)return(0,n.createElement)(w.U,{className:"woocommerce-empty-activity-card",title:(0,r.__)("Your inbox is empty","woocommerce"),icon:!1},(0,r.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce"));b||((0,l.recordEvent)("inbox_panel_view",{total:o.length}),b=!0);const S=Object.keys(o).map((e=>o[e]));return(0,n.createElement)(c.Card,{size:"large"},h&&(0,n.createElement)(c.CardHeader,{size:"medium"},(0,n.createElement)("div",{className:"wooocommerce-inbox-card__header"},(0,n.createElement)(u.Text,{size:"20",lineHeight:"28px",variant:"title.small"},(0,r.__)("Inbox","woocommerce")),(0,n.createElement)(a.Badge,{count:v})),(0,n.createElement)(a.EllipsisMenu,{label:(0,r.__)("Inbox Notes Options","woocommerce"),renderContent:({onToggle:e})=>(0,n.createElement)("div",{className:"woocommerce-inbox-card__section-controls"},(0,n.createElement)(c.Button,{onClick:()=>{_(!0),e()}},(0,r.__)("Dismiss all","woocommerce")))})),(0,n.createElement)(m.Z,{role:"menu"},S.map((e=>{const{id:t,is_deleted:o}=e;return o?null:(0,n.createElement)(d.Z,{key:t,timeout:500,classNames:"woocommerce-inbox-message"},(0,n.createElement)(u.InboxNoteCard,{key:t,note:e,onDismiss:s,onNoteActionClick:i,onBodyLinkClick:f,onNoteVisible:p}))}))),E?null:y?(0,n.createElement)(c.CardFooter,{className:"wooocommerce-inbox-card__footer",size:"medium"},(0,n.createElement)(c.Button,{isPrimary:!0,onClick:()=>{g()}},S.length>k.per_page?(0,r.__)("Show more","woocommerce"):(0,r.__)("Show older","woocommerce"))):(0,n.createElement)(u.InboxNotePlaceholder,{className:"banner message-is-unread"}))})({loadMoreNotes:()=>{(0,l.recordEvent)("inbox_action_load_more",{quantity_shown:N.length}),o(t+10)},hasNotes:(0,h.kS)(N),isBatchUpdating:F,notes:N,onDismiss:async e=>{(0,l.recordEvent)("inbox_action_dismiss",{note_name:e.name,note_title:e.title,note_name_dismiss_all:!1,note_name_dismiss_confirmation:!0,screen:I});const t=e.id;try{await P(t),x("getNotes"),A("success",(0,r.__)("Message dismissed","woocommerce"),{actions:[{label:(0,r.__)("Undo","woocommerce"),onClick:async()=>{await O(t,{is_deleted:0}),x("getNotes")}}]})}catch(e){A("error",(0,r._n)("Message could not be dismissed","Messages could not be dismissed",1,"woocommerce"))}},onNoteActionClick:(e,t)=>{L(e.id,t.id)},onNoteVisible:e=>{T[e.id]||e.is_read||(R({...T,[e.id]:!0}),setTimeout((()=>{O(e.id,{is_read:!0})}),3e3)),(0,l.recordEvent)("inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type,screen:I})},setShowDismissAllModal:Z,showHeader:e,allNotesFetched:p,notesHaveResolved:D,unreadNotesCount:B}))))}}}]);