"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[4854],{35782:(e,o,r)=>{r.d(o,{O3:()=>l,be:()=>n,u8:()=>s});var t=r(65736),a=r(92694),c=r(45719);const l=(0,a.applyFilters)("woocommerce_admin_downloads_report_charts",[{key:"download_count",label:(0,t.__)("Downloads","woocommerce"),type:"number"}]),s=(0,a.applyFilters)("woocommerce_admin_downloads_report_filters",[{label:(0,t.__)("Show","woocommerce"),staticParams:["chartType","paged","per_page"],param:"filter",showFilters:()=>!0,filters:[{label:(0,t.__)("All downloads","woocommerce"),value:"all"},{label:(0,t.__)("Advanced filters","woocommerce"),value:"advanced"}]}]),n=(0,a.applyFilters)("woocommerce_admin_downloads_report_advanced_filters",{title:(0,t._x)("Downloads match <select/> filters","A sentence describing filters for Downloads. See screen shot for context: https://cloudup.com/ccxhyH2mEDg","woocommerce"),filters:{product:{labels:{add:(0,t.__)("Product","woocommerce"),placeholder:(0,t.__)("Search","woocommerce"),remove:(0,t.__)("Remove product filter","woocommerce"),rule:(0,t.__)("Select a product filter match","woocommerce"),title:(0,t.__)("<title>Product</title> <rule/> <filter/>","woocommerce"),filter:(0,t.__)("Select product","woocommerce")},rules:[{value:"includes",label:(0,t._x)("Includes","products","woocommerce")},{value:"excludes",label:(0,t._x)("Excludes","products","woocommerce")}],input:{component:"Search",type:"products",getLabels:c.oC}},customer:{labels:{add:(0,t.__)("Username","woocommerce"),placeholder:(0,t.__)("Search customer username","woocommerce"),remove:(0,t.__)("Remove customer username filter","woocommerce"),rule:(0,t.__)("Select a customer username filter match","woocommerce"),title:(0,t.__)("<title>Username</title> <rule/> <filter />","woocommerce"),filter:(0,t.__)("Select customer username","woocommerce")},rules:[{value:"includes",label:(0,t._x)("Includes","customer usernames","woocommerce")},{value:"excludes",label:(0,t._x)("Excludes","customer usernames","woocommerce")}],input:{component:"Search",type:"usernames",getLabels:c.jk}},order:{labels:{add:(0,t.__)("Order #","woocommerce"),placeholder:(0,t.__)("Search order number","woocommerce"),remove:(0,t.__)("Remove order number filter","woocommerce"),rule:(0,t.__)("Select an order number filter match","woocommerce"),title:(0,t.__)("<title>Order #</title> <rule/> <filter/>","woocommerce"),filter:(0,t.__)("Select order number","woocommerce")},rules:[{value:"includes",label:(0,t._x)("Includes","order numbers","woocommerce")},{value:"excludes",label:(0,t._x)("Excludes","order numbers","woocommerce")}],input:{component:"Search",type:"orders",getLabels:async e=>{const o=e.split(",");return await o.map((e=>({id:e,label:"#"+e})))}}},ip_address:{labels:{add:(0,t.__)("IP Address","woocommerce"),placeholder:(0,t.__)("Search IP address","woocommerce"),remove:(0,t.__)("Remove IP address filter","woocommerce"),rule:(0,t.__)("Select an IP address filter match","woocommerce"),title:(0,t.__)("<title>IP Address</title> <rule/> <filter/>","woocommerce"),filter:(0,t.__)("Select IP address","woocommerce")},rules:[{value:"includes",label:(0,t._x)("Includes","IP addresses","woocommerce")},{value:"excludes",label:(0,t._x)("Excludes","IP addresses","woocommerce")}],input:{component:"Search",type:"downloadIps",getLabels:async e=>{const o=e.split(",");return await o.map((e=>({id:e,label:e})))}}}}})},49087:(e,o,r)=>{r.r(o),r.d(o,{default:()=>E});var t=r(69307),a=r(69596),c=r.n(a),l=r(35782),s=r(65736),n=r(9818),d=r(92819),m=r(76292),i=r.n(m),u=r(86020),_=r(10431),p=r(81595),w=r(74617),b=r(67221),h=r(81921),y=r(17844),f=r(66777),g=r(91978),v=r(81514);class S extends t.Component{constructor(){super(),this.getHeadersContent=this.getHeadersContent.bind(this),this.getRowsContent=this.getRowsContent.bind(this),this.getSummary=this.getSummary.bind(this)}getHeadersContent(){return[{label:(0,s.__)("Date","woocommerce"),key:"date",defaultSort:!0,required:!0,isLeftAligned:!0,isSortable:!0},{label:(0,s.__)("Product title","woocommerce"),key:"product",isSortable:!0,required:!0},{label:(0,s.__)("File name","woocommerce"),key:"file_name"},{label:(0,s.__)("Order #","woocommerce"),screenReaderLabel:(0,s.__)("Order Number","woocommerce"),key:"order_number"},{label:(0,s.__)("Username","woocommerce"),key:"user_id"},{label:(0,s.__)("IP","woocommerce"),key:"ip_address"}]}getRowsContent(e){const{query:o}=this.props,r=(0,_.getPersistedQuery)(o),t=(0,g.O3)("dateFormat",h.defaultTableDateFormat);return(0,d.map)(e,(e=>{const{_embedded:o,date:a,file_name:c,file_path:l,ip_address:n,order_id:d,order_number:m,product_id:i,username:p}=e,{code:b,name:h}=o.product[0];let y,f;if("woocommerce_rest_product_invalid_id"===b)y=(0,s.__)("(Deleted)","woocommerce"),f=(0,s.__)("(Deleted)","woocommerce");else{const e=(0,_.getNewPath)(r,"/analytics/products",{filter:"single_product",products:i});y=(0,v.jsx)(u.Link,{href:e,type:"wc-admin",children:h}),f=h}return[{display:(0,v.jsx)(u.Date,{date:a,visibleFormat:t}),value:a},{display:y,value:f},{display:(0,v.jsx)(u.Link,{href:l,type:"external",children:c}),value:c},{display:(0,v.jsx)(u.Link,{href:(0,w.getAdminLink)(`post.php?post=${d}&action=edit`),type:"wp-admin",children:m}),value:m},{display:p,value:p},{display:n,value:n}]}))}getSummary(e){const{download_count:o=0}=e,{query:r,defaultDateRange:t}=this.props,a=(0,h.getCurrentDates)(r,t),c=i()(a.primary.after),l=i()(a.primary.before).diff(c,"days")+1,n=this.context.getCurrencyConfig();return[{label:(0,s._n)("day","days",l,"woocommerce"),value:(0,p.formatValue)(n,"number",l)},{label:(0,s._n)("Download","Downloads",o,"woocommerce"),value:(0,p.formatValue)(n,"number",o)}]}render(){const{query:e,filters:o,advancedFilters:r}=this.props;return(0,v.jsx)(f.Z,{endpoint:"downloads",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["download_count"],query:e,tableQuery:{_embed:!0},title:(0,s.__)("Downloads","woocommerce"),columnPrefsKey:"downloads_report_columns",filters:o,advancedFilters:r})}}S.contextType=y.CurrencyContext;const x=(0,n.withSelect)((e=>{const{woocommerce_default_date_range:o}=e(b.settingsStore).getSetting("wc_admin","wcAdminSettings");return{defaultDateRange:o}}))(S);var C=r(67327),A=r(62671),k=r(17853),P=r(56739);class E extends t.Component{render(){const{query:e,path:o}=this.props;return(0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)(P.Z,{query:e,path:o,filters:l.u8,advancedFilters:l.be,report:"downloads"}),(0,v.jsx)(k.Z,{charts:l.O3,endpoint:"downloads",query:e,selectedChart:(0,C.Z)(e.chart,l.O3),filters:l.u8,advancedFilters:l.be}),(0,v.jsx)(A.Z,{charts:l.O3,endpoint:"downloads",path:o,query:e,selectedChart:(0,C.Z)(e.chart,l.O3),filters:l.u8,advancedFilters:l.be}),(0,v.jsx)(x,{query:e,filters:l.u8,advancedFilters:l.be})]})}}E.propTypes={query:c().object.isRequired}},22575:(e,o,r)=>{r.d(o,{I:()=>a});var t=r(65736);function a(e){return[e.country,e.state,e.name||(0,t.__)("TAX","woocommerce"),e.priority].map((e=>e.toString().toUpperCase().trim())).filter(Boolean).join("-")}},45719:(e,o,r)=>{r.d(o,{FI:()=>h,V1:()=>y,YC:()=>_,hQ:()=>p,jk:()=>w,oC:()=>b,qc:()=>u,uC:()=>f});var t=r(65736),a=r(96483),c=r(86989),l=r.n(c),s=r(92819),n=r(10431),d=r(67221),m=r(22575),i=r(91978);function u(e,o=s.identity){return function(r="",t){const c="function"==typeof e?e(t):e,s=(0,n.getIdsFromQuery)(r);if(s.length<1)return Promise.resolve([]);const d={include:s.join(","),per_page:s.length};return l()({path:(0,a.addQueryArgs)(c,d)}).then((e=>e.map(o)))}}u(d.NAMESPACE+"/products/attributes",(e=>({key:e.id,label:e.name})));const _=u(d.NAMESPACE+"/products/categories",(e=>({key:e.id,label:e.name}))),p=u(d.NAMESPACE+"/coupons",(e=>({key:e.id,label:e.code}))),w=u(d.NAMESPACE+"/customers",(e=>({key:e.id,label:e.name}))),b=u(d.NAMESPACE+"/products",(e=>({key:e.id,label:e.name}))),h=u(d.NAMESPACE+"/taxes",(e=>({key:e.id,label:(0,m.I)(e)})));function y({attributes:e,name:o}){const r=(0,i.O3)("variationTitleAttributesSeparator"," - ");if(o&&o.indexOf(r)>-1)return o;const a=(e||[]).map((({name:e,option:o})=>(o||(e=e.charAt(0).toUpperCase()+e.slice(1),o=(0,t.sprintf)((0,t.__)("Any %s","woocommerce"),e)),o))).join(", ");return a?o+r+a:o}const f=u((({products:e})=>e?d.NAMESPACE+`/products/${e}/variations`:d.NAMESPACE+"/variations"),(e=>({key:e.id,label:y(e)})))}}]);