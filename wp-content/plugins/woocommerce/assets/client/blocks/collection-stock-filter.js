(()=>{var e,t={6164:(e,t,o)=>{"use strict";o.r(t);var l=o(9196);const r=window.wp.blocks;var s=o(2911),n=o(1918);const c=window.wc.wcSettings;var a,i,u,p,m,d,w,g,_,y;const b=(0,c.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),E=(b.pluginUrl,b.pluginUrl,b.buildPhase),f=(null===(a=c.STORE_PAGES.shop)||void 0===a||a.permalink,null===(i=c.STORE_PAGES.checkout)||void 0===i||i.id,null===(u=c.STORE_PAGES.checkout)||void 0===u||u.permalink,null===(p=c.STORE_PAGES.privacy)||void 0===p||p.permalink,null===(m=c.STORE_PAGES.privacy)||void 0===m||m.title,null===(d=c.STORE_PAGES.terms)||void 0===d||d.permalink,null===(w=c.STORE_PAGES.terms)||void 0===w||w.title,null===(g=c.STORE_PAGES.cart)||void 0===g||g.id,null===(_=c.STORE_PAGES.cart)||void 0===_||_.permalink,null!==(y=c.STORE_PAGES.myaccount)&&void 0!==y&&y.permalink?c.STORE_PAGES.myaccount.permalink:(0,c.getSetting)("wpLoginUrl","/wp-login.php"),(0,c.getSetting)("localPickupEnabled",!1),(0,c.getSetting)("countries",{})),v=(0,c.getSetting)("countryData",{}),S=(Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowBilling)).map((e=>[e,f[e]||""]))),Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowBilling)).map((e=>[e,v[e].states||[]]))),Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowShipping)).map((e=>[e,f[e]||""]))),Object.fromEntries(Object.keys(v).filter((e=>!0===v[e].allowShipping)).map((e=>[e,v[e].states||[]]))),Object.fromEntries(Object.keys(v).map((e=>[e,v[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],additional:[]});(0,c.getSetting)("addressFieldsLocations",S).address,(0,c.getSetting)("addressFieldsLocations",S).contact,(0,c.getSetting)("addressFieldsLocations",S).additional,o(902);var k=o(9307),h=o(3849),O=o.n(h);const T=window.wp.blockEditor,x=window.wp.components;var C=o(5736),R=o(7642);const j=window.wc.blocksComponents;o(479);const P=({name:e,count:t})=>(0,l.createElement)(l.Fragment,null,e,null!==t&&Number.isFinite(t)&&(0,l.createElement)(j.Label,{label:t.toString(),screenReaderLabel:(0,C.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,C._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}}));var A=o(1394);o(9027);const N=({className:e,style:t,suggestions:o,multiple:r=!0,saveTransform:s=(e=>e.trim().replace(/\s/g,"-")),messages:n={},validateInput:c=(e=>o.includes(e)),label:a="",...i})=>(0,l.createElement)("div",{className:O()("wc-blocks-components-form-token-field-wrapper",e,{"single-selection":!r}),style:t},(0,l.createElement)(A.Z,{label:a,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:c,saveTransform:s,maxLength:r?void 0:1,suggestions:o,messages:n,...i}));var G=o(2600);var q=o(4167),L=o(9127),F=o.n(L);function D(e){const t=(0,k.useRef)(e);return F()(e,t.current)||(t.current=e),t.current}const Y=window.wc.wcBlocksData,B=window.wp.data,Q=(0,k.createContext)("page"),U=()=>(0,k.useContext)(Q),V=(Q.Provider,e=>{const t=U();e=e||t;const o=(0,B.useSelect)((t=>t(Y.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:l}=(0,B.useDispatch)(Y.QUERY_STATE_STORE_KEY);return[o,(0,k.useCallback)((t=>{l(e,t)}),[e,l])]}),K=(e,t,o)=>{const l=U();o=o||l;const r=(0,B.useSelect)((l=>l(Y.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:s}=(0,B.useDispatch)(Y.QUERY_STATE_STORE_KEY);return[r,(0,k.useCallback)((t=>{s(o,e,t)}),[o,e,s])]},M=({queryAttribute:e,queryPrices:t,queryStock:o,queryRating:l,queryState:r,isEditor:s=!1})=>{let n=U();n=`${n}-collection-data`;const[c]=V(n),[a,i]=K("calculate_attribute_counts",[],n),[u,p]=K("calculate_price_range",null,n),[m,d]=K("calculate_stock_status_counts",null,n),[w,g]=K("calculate_rating_counts",null,n),_=D(e||{}),y=D(t),b=D(o),E=D(l);(0,k.useEffect)((()=>{"object"==typeof _&&Object.keys(_).length&&(a.find((e=>{return o="taxonomy",!(e=>null===e)(l=t=_)&&l instanceof Object&&l.constructor===Object&&o in t&&e.taxonomy===_.taxonomy;var t,o,l}))||i([...a,_]))}),[_,a,i]),(0,k.useEffect)((()=>{u!==y&&void 0!==y&&p(y)}),[y,p,u]),(0,k.useEffect)((()=>{m!==b&&void 0!==b&&d(b)}),[b,d,m]),(0,k.useEffect)((()=>{w!==E&&void 0!==E&&g(E)}),[E,g,w]);const[f,v]=(0,k.useState)(s),[S]=(0,G.Nr)(f,200);f||v(!0);const h=(0,k.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,q.DY)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return(e=>{const{namespace:t,resourceName:o,resourceValues:l=[],query:r={},shouldSelect:s=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const n=(0,k.useRef)({results:[],isLoading:!0}),c=D(r),a=D(l),i=(()=>{const[,e]=(0,k.useState)();return(0,k.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,B.useSelect)((e=>{if(!s)return null;const l=e(Y.COLLECTIONS_STORE_KEY),r=[t,o,c,a],n=l.getCollectionError(...r);if(n){if(!(n instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(n)}return{results:l.getCollection(...r),isLoading:!l.hasFinishedResolution("getCollection",r)}}),[t,o,a,c,s]);return null!==u&&(n.current=u),n.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...r,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...h},shouldSelect:S})},Z=({attributes:e,setAttributes:t})=>{const{showCounts:o,selectType:r,displayStyle:s}=e;return(0,l.createElement)(T.InspectorControls,{key:"inspector"},(0,l.createElement)(x.PanelBody,{title:(0,C.__)("Display Settings","woocommerce")},(0,l.createElement)(x.ToggleControl,{label:(0,C.__)("Display product count","woocommerce"),checked:o,onChange:()=>t({showCounts:!o})}),(0,l.createElement)(x.__experimentalToggleGroupControl,{label:(0,C.__)("Allow selecting multiple options?","woocommerce"),value:r||"multiple",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,l.createElement)(x.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,C.__)("Multiple","woocommerce")}),(0,l.createElement)(x.__experimentalToggleGroupControlOption,{value:"single",label:(0,C.__)("Single","woocommerce")})),(0,l.createElement)(x.__experimentalToggleGroupControl,{label:(0,C.__)("Display Style","woocommerce"),value:s,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,l.createElement)(x.__experimentalToggleGroupControlOption,{value:"list",label:(0,C.__)("List","woocommerce")}),(0,l.createElement)(x.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,C.__)("Dropdown","woocommerce")}))))},I=JSON.parse('{"name":"woocommerce/collection-stock-filter","version":"1.0.0","title":"Stock Filter","description":"Enable customers to filter the product collection by stock status.","category":"woocommerce","keywords":["WooCommerce","filter","stock"],"supports":{"interactivity":true,"html":false,"multiple":false},"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":false},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false},"queryParam":{"type":"object","default":{"calculate_stock_status_counts":"true"}}},"usesContext":["collectionData"],"ancestor":["woocommerce/collection-filters"],"textdomain":"woocommerce","apiVersion":2,"$schema":"https://schemas.wp.org/trunk/block.json"}');E>2&&(0,r.registerBlockType)(I,{icon:{src:(0,l.createElement)(s.Z,{icon:n.Z,className:"wc-block-editor-components-block-icon"})},edit:e=>{const t=(0,T.useBlockProps)({className:O()("wc-block-stock-filter",e.attributes.className)}),{showCounts:o,displayStyle:r}=e.attributes,n=(0,c.getSetting)("stockStatusOptions",{}),{results:a}=M({queryStock:!0,queryState:{},isEditor:!0}),i=(0,k.useMemo)((()=>Object.entries(n).map((([e,t])=>{var r,s;const n=null==a||null===(r=a.stock_status_counts)||void 0===r||null===(s=r.find((t=>t.status===e)))||void 0===s?void 0:s.count;return{value:e,label:(0,l.createElement)(P,{name:t,count:o&&n?Number(n):null})}}))),[n,a,o]);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{...t},(0,l.createElement)(Z,{...e}),(0,l.createElement)(x.Disabled,null,(0,l.createElement)("div",{className:O()("wc-block-stock-filter",`style-${r}`,{"is-loading":!1})},"dropdown"===r?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(N,{className:O()({"single-selection":!0,"is-loading":!1}),suggestions:[],placeholder:(0,C.__)("Select stock status","woocommerce"),onChange:()=>null,value:[]}),(0,l.createElement)(s.Z,{icon:R.Z,size:30})):(0,l.createElement)(j.CheckboxList,{className:"wc-block-stock-filter-list",options:i,checked:[],onChange:()=>null,isLoading:!1,isDisabled:!0})))))}})},479:()=>{},9027:()=>{},902:()=>{},9196:e=>{"use strict";e.exports=window.React},2819:e=>{"use strict";e.exports=window.lodash},5158:e=>{"use strict";e.exports=window.wp.a11y},4333:e=>{"use strict";e.exports=window.wp.compose},7180:e=>{"use strict";e.exports=window.wp.deprecated},5904:e=>{"use strict";e.exports=window.wp.dom},9307:e=>{"use strict";e.exports=window.wp.element},5736:e=>{"use strict";e.exports=window.wp.i18n},9127:e=>{"use strict";e.exports=window.wp.isShallowEqual},9630:e=>{"use strict";e.exports=window.wp.keycodes},444:e=>{"use strict";e.exports=window.wp.primitives},2560:e=>{"use strict";e.exports=window.wp.warning}},o={};function l(e){var r=o[e];if(void 0!==r)return r.exports;var s=o[e]={exports:{}};return t[e].call(s.exports,s,s.exports,l),s.exports}l.m=t,e=[],l.O=(t,o,r,s)=>{if(!o){var n=1/0;for(u=0;u<e.length;u++){for(var[o,r,s]=e[u],c=!0,a=0;a<o.length;a++)(!1&s||n>=s)&&Object.keys(l.O).every((e=>l.O[e](o[a])))?o.splice(a--,1):(c=!1,s<n&&(n=s));if(c){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[o,r,s]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=4070,(()=>{var e={4070:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,s,[n,c,a]=o,i=0;if(n.some((t=>0!==e[t]))){for(r in c)l.o(c,r)&&(l.m[r]=c[r]);if(a)var u=a(l)}for(t&&t(o);i<n.length;i++)s=n[i],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(u)},o=self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=l.O(void 0,[2869],(()=>l(6164)));r=l.O(r),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["collection-stock-filter"]=r})();