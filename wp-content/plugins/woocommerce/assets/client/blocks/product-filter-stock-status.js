(()=>{var e,t={5006:(e,t,o)=>{"use strict";o.r(t);var r=o(9196);const l=window.wp.blocks;var n=o(2911),s=o(1918);const a=window.wc.wcSettings;var c,i,u,p,d,m,w,g,_,y;const E=(0,a.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),b=(E.pluginUrl,E.pluginUrl,E.buildPhase),v=(null===(c=a.STORE_PAGES.shop)||void 0===c||c.permalink,null===(i=a.STORE_PAGES.checkout)||void 0===i||i.id,null===(u=a.STORE_PAGES.checkout)||void 0===u||u.permalink,null===(p=a.STORE_PAGES.privacy)||void 0===p||p.permalink,null===(d=a.STORE_PAGES.privacy)||void 0===d||d.title,null===(m=a.STORE_PAGES.terms)||void 0===m||m.permalink,null===(w=a.STORE_PAGES.terms)||void 0===w||w.title,null===(g=a.STORE_PAGES.cart)||void 0===g||g.id,null===(_=a.STORE_PAGES.cart)||void 0===_||_.permalink,null!==(y=a.STORE_PAGES.myaccount)&&void 0!==y&&y.permalink?a.STORE_PAGES.myaccount.permalink:(0,a.getSetting)("wpLoginUrl","/wp-login.php"),(0,a.getSetting)("localPickupEnabled",!1),(0,a.getSetting)("countries",{})),f=(0,a.getSetting)("countryData",{}),S=(Object.fromEntries(Object.keys(f).filter((e=>!0===f[e].allowBilling)).map((e=>[e,v[e]||""]))),Object.fromEntries(Object.keys(f).filter((e=>!0===f[e].allowBilling)).map((e=>[e,f[e].states||[]]))),Object.fromEntries(Object.keys(f).filter((e=>!0===f[e].allowShipping)).map((e=>[e,v[e]||""]))),Object.fromEntries(Object.keys(f).filter((e=>!0===f[e].allowShipping)).map((e=>[e,f[e].states||[]]))),Object.fromEntries(Object.keys(f).map((e=>[e,f[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],additional:[]});(0,a.getSetting)("addressFieldsLocations",S).address,(0,a.getSetting)("addressFieldsLocations",S).contact,(0,a.getSetting)("addressFieldsLocations",S).additional,(0,a.getSetting)("additionalFields",{}),(0,a.getSetting)("additionalContactFields",{}),(0,a.getSetting)("additionalAddressFields",{}),o(2377);var k=o(9307),h=o(3849),O=o.n(h);const T=window.wp.blockEditor,C=window.wp.components;var x=o(5736);const R=window.wc.blocksComponents;o(479);const j=({name:e,count:t})=>(0,r.createElement)(r.Fragment,null,e,null!==t&&Number.isFinite(t)&&(0,r.createElement)(R.Label,{label:t.toString(),screenReaderLabel:(0,x.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,x._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}}));var P=o(2600);var A=o(4167),N=o(9127),G=o.n(N);function q(e){const t=(0,k.useRef)(e);return G()(e,t.current)||(t.current=e),t.current}const F=window.wc.wcBlocksData,L=window.wp.data,B=(0,k.createContext)("page"),D=()=>(0,k.useContext)(B),Y=(B.Provider,e=>{const t=D();e=e||t;const o=(0,L.useSelect)((t=>t(F.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,L.useDispatch)(F.QUERY_STATE_STORE_KEY);return[o,(0,k.useCallback)((t=>{r(e,t)}),[e,r])]}),Q=(e,t,o)=>{const r=D();o=o||r;const l=(0,L.useSelect)((r=>r(F.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:n}=(0,L.useDispatch)(F.QUERY_STATE_STORE_KEY);return[l,(0,k.useCallback)((t=>{n(o,e,t)}),[o,e,n])]},U=({queryAttribute:e,queryPrices:t,queryStock:o,queryRating:r,queryState:l,isEditor:n=!1})=>{let s=D();s=`${s}-collection-data`;const[a]=Y(s),[c,i]=Q("calculate_attribute_counts",[],s),[u,p]=Q("calculate_price_range",null,s),[d,m]=Q("calculate_stock_status_counts",null,s),[w,g]=Q("calculate_rating_counts",null,s),_=q(e||{}),y=q(t),E=q(o),b=q(r);(0,k.useEffect)((()=>{"object"==typeof _&&Object.keys(_).length&&(c.find((e=>{return o="taxonomy",!(e=>null===e)(r=t=_)&&r instanceof Object&&r.constructor===Object&&o in t&&e.taxonomy===_.taxonomy;var t,o,r}))||i([...c,_]))}),[_,c,i]),(0,k.useEffect)((()=>{u!==y&&void 0!==y&&p(y)}),[y,p,u]),(0,k.useEffect)((()=>{d!==E&&void 0!==E&&m(E)}),[E,m,d]),(0,k.useEffect)((()=>{w!==b&&void 0!==b&&g(b)}),[b,g,w]);const[v,f]=(0,k.useState)(n),[S]=(0,P.Nr)(v,200);v||f(!0);const h=(0,k.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,A.DY)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(a)),[a]);return(e=>{const{namespace:t,resourceName:o,resourceValues:r=[],query:l={},shouldSelect:n=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const s=(0,k.useRef)({results:[],isLoading:!0}),a=q(l),c=q(r),i=(()=>{const[,e]=(0,k.useState)();return(0,k.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,L.useSelect)((e=>{if(!n)return null;const r=e(F.COLLECTIONS_STORE_KEY),l=[t,o,a,c],s=r.getCollectionError(...l);if(s){if(!(s instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(s)}return{results:r.getCollection(...l),isLoading:!r.hasFinishedResolution("getCollection",l)}}),[t,o,c,a,n]);return null!==u&&(s.current=u),s.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...l,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...h},shouldSelect:S})},M=({attributes:e,setAttributes:t})=>{const{showCounts:o,selectType:l,displayStyle:n}=e;return(0,r.createElement)(T.InspectorControls,{key:"inspector"},(0,r.createElement)(C.PanelBody,{title:(0,x.__)("Display Settings","woocommerce")},(0,r.createElement)(C.ToggleControl,{label:(0,x.__)("Display product count","woocommerce"),checked:o,onChange:()=>t({showCounts:!o})}),(0,r.createElement)(C.__experimentalToggleGroupControl,{label:(0,x.__)("Allow selecting multiple options?","woocommerce"),value:l||"single",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,r.createElement)(C.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,x.__)("Multiple","woocommerce")}),(0,r.createElement)(C.__experimentalToggleGroupControlOption,{value:"single",label:(0,x.__)("Single","woocommerce")})),(0,r.createElement)(C.__experimentalToggleGroupControl,{label:(0,x.__)("Display Style","woocommerce"),value:n,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,r.createElement)(C.__experimentalToggleGroupControlOption,{value:"list",label:(0,x.__)("List","woocommerce")}),(0,r.createElement)(C.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,x.__)("Dropdown","woocommerce")}))))},K=({placeholder:e})=>(0,r.createElement)("div",{className:"wc-interactivity-dropdown"},(0,r.createElement)("div",{className:"wc-interactivity-dropdown__dropdown"},(0,r.createElement)("div",{className:"wc-interactivity-dropdown__dropdown-selection",tabIndex:0},(0,r.createElement)("span",{className:"wc-interactivity-dropdown__placeholder"},e),(0,r.createElement)("span",{className:"wc-interactivity-dropdown__svg-container"},(0,r.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},(0,r.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))))),V=JSON.parse('{"name":"woocommerce/product-filter-stock-status","version":"1.0.0","title":"Product Filter: Stock Status (Beta)","description":"Enable customers to filter the product collection by stock status.","category":"woocommerce","keywords":["WooCommerce","filter","stock"],"supports":{"interactivity":true,"html":false,"multiple":false,"inserter":false,"color":{"text":true,"background":false}},"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":false},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}},"usesContext":["query","queryId"],"ancestor":["woocommerce/product-filter"],"textdomain":"woocommerce","apiVersion":2,"$schema":"https://schemas.wp.org/trunk/block.json"}');b>2&&(0,l.registerBlockType)(V,{icon:{src:(0,r.createElement)(n.Z,{icon:s.Z,className:"wc-block-editor-components-block-icon"})},edit:e=>{const t=(0,T.useBlockProps)({className:O()("wc-block-stock-filter",e.attributes.className)}),{showCounts:o,displayStyle:l}=e.attributes,n=(0,a.getSetting)("stockStatusOptions",{}),{results:s}=U({queryStock:!0,queryState:{},isEditor:!0}),c=(0,k.useMemo)((()=>Object.entries(n).map((([e,t])=>{var l,n;const a=null==s||null===(l=s.stock_status_counts)||void 0===l||null===(n=l.find((t=>t.status===e)))||void 0===n?void 0:n.count;return{value:e,label:(0,r.createElement)(j,{name:t,count:o&&a?Number(a):null}),count:a||0}})).filter((e=>e.count>0))),[n,s,o]);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{...t},(0,r.createElement)(M,{...e}),(0,r.createElement)(C.Disabled,null,(0,r.createElement)("div",{className:O()(`style-${l}`,{"is-loading":!1})},"dropdown"===l?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(K,{placeholder:"single"===e.attributes.selectType?(0,x.__)("Select stock status","woocommerce"):(0,x.__)("Select stock statuses","woocommerce")})):(0,r.createElement)(R.CheckboxList,{className:"wc-block-stock-filter-list",options:c,checked:[],onChange:()=>{},isLoading:!1,isDisabled:!0})))))}})},479:()=>{},2377:()=>{},9196:e=>{"use strict";e.exports=window.React},9307:e=>{"use strict";e.exports=window.wp.element},5736:e=>{"use strict";e.exports=window.wp.i18n},9127:e=>{"use strict";e.exports=window.wp.isShallowEqual},444:e=>{"use strict";e.exports=window.wp.primitives}},o={};function r(e){var l=o[e];if(void 0!==l)return l.exports;var n=o[e]={exports:{}};return t[e].call(n.exports,n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,o,l,n)=>{if(!o){var s=1/0;for(u=0;u<e.length;u++){for(var[o,l,n]=e[u],a=!0,c=0;c<o.length;c++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](o[c])))?o.splice(c--,1):(a=!1,n<s&&(s=n));if(a){e.splice(u--,1);var i=l();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,l,n]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=9609,(()=>{var e={9609:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var l,n,[s,a,c]=o,i=0;if(s.some((t=>0!==e[t]))){for(l in a)r.o(a,l)&&(r.m[l]=a[l]);if(c)var u=c(r)}for(t&&t(o);i<s.length;i++)n=s[i],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},o=self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var l=r.O(void 0,[2869],(()=>r(5006)));l=r.O(l),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-stock-status"]=l})();