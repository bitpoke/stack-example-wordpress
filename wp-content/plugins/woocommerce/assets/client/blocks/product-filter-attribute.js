(()=>{var e,t,r,o={2943:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,n=window.wc.wcSettings;r(9642);const l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-attribute","version":"1.0.0","title":"Product Filter: Attribute (Experimental)","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":2,"ancestor":["woocommerce/product-filter"],"supports":{"interactivity":true,"inserter":false,"color":{"text":true,"background":false}},"usesContext":["query","queryId"],"attributes":{"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":false},"queryType":{"type":"string","default":"or"},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}}}');var a=r(1609),c=r(7723),s=r(6087);const i=window.wp.blockEditor,u=window.wc.wcBlocksData,m=window.wp.data;var d=r(923),p=r.n(d);function b(e){const t=(0,s.useRef)(e);return p()(e,t.current)||(t.current=e),t.current}const _=window.wc.wcTypes,g=e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:l=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const a=(0,s.useRef)({results:[],isLoading:!0}),c=b(n),i=b(o),d=(()=>{const[,e]=(0,s.useState)();return(0,s.useCallback)((t=>{e((()=>{throw t}))}),[])})(),p=(0,m.useSelect)((e=>{if(!l)return null;const o=e(u.COLLECTIONS_STORE_KEY),n=[t,r,c,i],a=o.getCollectionError(...n);if(a){if(!(0,_.isError)(a))throw new Error("TypeError: `error` object is not an instance of Error constructor");d(a)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,i,c,l]);return null!==p&&(a.current=p),a.current};var w=r(4717),E=r(5574);const h=(0,s.createContext)("page"),f=()=>(0,s.useContext)(h),y=(h.Provider,e=>{const t=f();e=e||t;const r=(0,m.useSelect)((t=>t(u.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,m.useDispatch)(u.QUERY_STATE_STORE_KEY);return[r,(0,s.useCallback)((t=>{o(e,t)}),[e,o])]}),v=(e,t,r)=>{const o=f();r=r||o;const n=(0,m.useSelect)((o=>o(u.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:l}=(0,m.useDispatch)(u.QUERY_STATE_STORE_KEY);return[n,(0,s.useCallback)((t=>{l(r,e,t)}),[r,e,l])]},k=window.wp.components;var C=r(7104),S=r(6378),x=r(4133);const N=({children:e})=>(0,a.createElement)(k.Placeholder,{className:"wc-block-attribute-filter",icon:(0,a.createElement)(C.A,{icon:S.A}),label:(0,c.__)("Filter by Attribute","woocommerce"),instructions:(0,c.__)("Enable customers to filter the product grid by selecting one or more attributes, such as color.","woocommerce")},e),T=()=>(0,a.createElement)(N,null,(0,a.createElement)("p",null,(0,c.__)("Attributes are needed for filtering your products. You haven't created any attributes yet.","woocommerce")),(0,a.createElement)(k.Button,{className:"wc-block-attribute-filter__add-attribute-button",variant:"secondary",href:(0,n.getAdminLink)("edit.php?post_type=product&page=product_attributes"),target:"_top"},(0,c.__)("Add new attribute","woocommerce")+" ",(0,a.createElement)(C.A,{icon:x.A})),(0,a.createElement)(k.Button,{className:"wc-block-attribute-filter__read_more_button",variant:"tertiary",href:"https://woocommerce.com/document/managing-product-taxonomies/",target:"_blank"},(0,c.__)("Learn more","woocommerce")));var I=r(2478),A=r(851),O=r(9491);const P={clear:(0,c.__)("Clear all selected items","woocommerce"),noItems:(0,c.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,c.__)("No results for %s","woocommerce"),search:(0,c.__)("Search for items","woocommerce"),selected:e=>(0,c.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,c._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,c.__)("Search results updated.","woocommerce")},R=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),o=("id",t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{}));const n=["0"],l=(e={})=>e.parent?[...l(o[e.parent]),e.name]:e.name?[e.name]:[],a=e=>e.map((e=>{const t=r[e.id];return n.push(""+e.id),{...e,breadcrumbs:l(o[e.parent]),children:t&&t.length?a(t):[]}})),c=a(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{n.includes(e)||c.push(...a(t||[]))})),c},j=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,a.createElement)("strong",{key:t},e):(0,a.createElement)(s.Fragment,{key:t},e)))};function q(e,t,r){const o=new Set(t.map((e=>e[r])));return e.filter((e=>!o.has(e[r])))}const B=window.wp.htmlEntities,F=({label:e})=>(0,a.createElement)("span",{className:"woocommerce-search-list__item-count"},e),L=e=>{const{item:t,search:r}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,a.createElement)("span",{className:"woocommerce-search-list__item-label"},o?(0,a.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(n=t.breadcrumbs).length?n.slice(0,1).toString():2===n.length?n.slice(0,1).toString()+" › "+n.slice(-1).toString():n.slice(0,1).toString()+" … "+n.slice(-1).toString()):null,(0,a.createElement)("span",{className:"woocommerce-search-list__item-name"},j((0,B.decodeEntities)(t.name),r)));var n},D=({countLabel:e,className:t,depth:r=0,controlId:o="",item:n,isSelected:l,isSingle:c,onSelect:i,search:u="",selected:m,useExpandedPanelId:d,...p})=>{var b,_;const[g,w]=d,E=null!=e&&void 0!==n.count&&null!==n.count,h=!(null===(b=n.breadcrumbs)||void 0===b||!b.length),f=!(null===(_=n.children)||void 0===_||!_.length),y=g===n.id,v=(0,A.A)(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":h,"has-children":f,"has-count":E,"is-expanded":y,"is-radio-button":c}),C=p.name||`search-list-item-${o}`,S=`${C}-${n.id}`,x=(0,s.useCallback)((()=>{w(y?-1:Number(n.id))}),[y,n.id,w]);return f?(0,a.createElement)("div",{className:v,onClick:x,onKeyDown:e=>"Enter"===e.key||" "===e.key?x():null,role:"treeitem",tabIndex:0},c?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("input",{type:"radio",id:S,name:C,value:n.value,onChange:i(n),onClick:e=>e.stopPropagation(),checked:l,className:"woocommerce-search-list__item-input",...p}),(0,a.createElement)(L,{item:n,search:u}),E?(0,a.createElement)(F,{label:e||n.count}):null):(0,a.createElement)(a.Fragment,null,(0,a.createElement)(k.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:l,...!l&&n.children.some((e=>m.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:j((0,B.decodeEntities)(n.name),u),onChange:()=>{l?i(q(m,n.children,"id"))():i(function(e,t,r){const o=q(t,e,"id");return[...e,...o]}(m,n.children))()},onClick:e=>e.stopPropagation()}),E?(0,a.createElement)(F,{label:e||n.count}):null)):(0,a.createElement)("label",{htmlFor:S,className:v},c?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("input",{...p,type:"radio",id:S,name:C,value:n.value,onChange:i(n),checked:l,className:"woocommerce-search-list__item-input"}),(0,a.createElement)(L,{item:n,search:u})):(0,a.createElement)(k.CheckboxControl,{...p,id:S,name:C,className:"woocommerce-search-list__item-input",value:(0,B.decodeEntities)(n.value),label:j((0,B.decodeEntities)(n.name),u),onChange:i(n),checked:l}),E?(0,a.createElement)(F,{label:e||n.count}):null)};var M=r(2370);r(6636);const G=({id:e,label:t,popoverContents:r,remove:o,screenReaderLabel:n,className:l=""})=>{const[i,u]=(0,s.useState)(!1),m=(0,O.useInstanceId)(G);if(n=n||t,!t)return null;t=(0,B.decodeEntities)(t);const d=(0,A.A)("woocommerce-tag",l,{"has-remove":!!o}),p=`woocommerce-tag__label-${m}`,b=(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"screen-reader-text"},n),(0,a.createElement)("span",{"aria-hidden":"true"},t));return(0,a.createElement)("span",{className:d},r?(0,a.createElement)(k.Button,{className:"woocommerce-tag__text",id:p,onClick:()=>u(!0)},b):(0,a.createElement)("span",{className:"woocommerce-tag__text",id:p},b),r&&i&&(0,a.createElement)(k.Popover,{onClose:()=>u(!1)},r),o&&(0,a.createElement)(k.Button,{className:"woocommerce-tag__remove",onClick:o(e),label:(0,c.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,c.__)("Remove %s","woocommerce"),t),"aria-describedby":p},(0,a.createElement)(C.A,{icon:M.A,size:20,className:"clear-icon",role:"img"})))},Y=G;r(8137);const $=e=>(0,a.createElement)(D,{...e}),Q=e=>{const{list:t,selected:r,renderItem:o,depth:n=0,onSelect:l,instanceId:c,isSingle:i,search:u,useExpandedPanelId:m}=e,[d]=m;return t?(0,a.createElement)(s.Fragment,null,t.map((t=>{var p,b;const _=null!==(p=t.children)&&void 0!==p&&p.length&&!i?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),g=(null===(b=t.children)||void 0===b?void 0:b.length)&&d===t.id;return(0,a.createElement)(s.Fragment,{key:t.id},(0,a.createElement)("li",null,o({item:t,isSelected:_,onSelect:l,isSingle:i,selected:r,search:u,depth:n,useExpandedPanelId:m,controlId:c})),g?(0,a.createElement)(Q,{...e,list:t.children,depth:n+1}):null)}))):null},V=({isLoading:e,isSingle:t,selected:r,messages:o,onChange:n,onRemove:l})=>{if(e||t||!r)return null;const s=r.length;return(0,a.createElement)("div",{className:"woocommerce-search-list__selected"},(0,a.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,a.createElement)("strong",null,o.selected(s)),s>0?(0,a.createElement)(k.Button,{variant:"link",isDestructive:!0,onClick:()=>n([]),"aria-label":o.clear},(0,c.__)("Clear all","woocommerce")):null),s>0?(0,a.createElement)("ul",null,r.map(((e,t)=>(0,a.createElement)("li",{key:t},(0,a.createElement)(Y,{label:e.name,id:e.id,remove:l}))))):null)},K=({filteredList:e,search:t,onSelect:r,instanceId:o,useExpandedPanelId:n,...l})=>{const{messages:s,renderItem:i,selected:u,isSingle:m}=l,d=i||$;return 0===e.length?(0,a.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,a.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,a.createElement)(C.A,{icon:I.A,role:"img"})),(0,a.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,c.sprintf)(s.noResults,t):s.noItems)):(0,a.createElement)("ul",{className:"woocommerce-search-list__list"},(0,a.createElement)(Q,{useExpandedPanelId:n,list:e,selected:u,renderItem:d,onSelect:r,instanceId:o,isSingle:m,search:t}))},H=e=>{const{className:t="",isCompact:r,isHierarchical:o,isLoading:n,isSingle:l,list:i,messages:u=P,onChange:m,onSearch:d,selected:p,type:b="text",debouncedSpeak:_}=e,[g,w]=(0,s.useState)(""),E=(0,s.useState)(-1),h=(0,O.useInstanceId)(H),f=(0,s.useMemo)((()=>({...P,...u})),[u]),y=(0,s.useMemo)((()=>((e,t,r)=>{if(!t)return r?R(e):e;const o=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),n=e.map((e=>!!o.test(e.name)&&e)).filter(Boolean);return r?R(n,e):n})(i,g,o)),[i,g,o]);(0,s.useEffect)((()=>{_&&_(f.updated)}),[_,f]),(0,s.useEffect)((()=>{"function"==typeof d&&d(g)}),[g,d]);const v=(0,s.useCallback)((e=>()=>{l&&m([]);const t=p.findIndex((({id:t})=>t===e));m([...p.slice(0,t),...p.slice(t+1)])}),[l,p,m]),C=(0,s.useCallback)((e=>()=>{Array.isArray(e)?m(e):-1===p.findIndex((({id:t})=>t===e.id))?m(l?[e]:[...p,e]):v(e.id)()}),[l,v,m,p]),S=(0,s.useCallback)((e=>{const[t]=p.filter((t=>!e.find((e=>t.id===e.id))));v(t.id)()}),[v,p]);return(0,a.createElement)("div",{className:(0,A.A)("woocommerce-search-list",t,{"is-compact":r,"is-loading":n,"is-token":"token"===b})},"text"===b&&(0,a.createElement)(V,{...e,onRemove:v,messages:f}),(0,a.createElement)("div",{className:"woocommerce-search-list__search"},"text"===b?(0,a.createElement)(k.TextControl,{label:f.search,type:"search",value:g,onChange:e=>w(e)}):(0,a.createElement)(k.FormTokenField,{disabled:n,label:f.search,onChange:S,onInputChange:e=>w(e),suggestions:[],__experimentalValidateInput:()=>!1,value:n?[(0,c.__)("Loading…","woocommerce")]:p.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),n?(0,a.createElement)("div",{className:"woocommerce-search-list__list"},(0,a.createElement)(k.Spinner,null)):(0,a.createElement)(K,{...e,search:g,filteredList:y,messages:f,onSelect:C,instanceId:h,useExpandedPanelId:E}))},U=((0,k.withSpokenMessages)(H),(0,n.getSetting)("attributes",[])),z=({isCompact:e,setAttributeId:t,attributeId:r})=>{const o={clear:(0,c.__)("Clear selected attribute","woocommerce"),list:(0,c.__)("Product Attributes","woocommerce"),noItems:(0,c.__)("Your store doesn't have any product attributes.","woocommerce"),search:(0,c.__)("Search for a product attribute:","woocommerce"),selected:e=>(0,c.sprintf)(/* translators: %d is the number of attributes selected. */ /* translators: %d is the number of attributes selected. */
(0,c._n)("%d attribute selected","%d attributes selected",e,"woocommerce"),e),updated:(0,c.__)("Product attribute search results updated.","woocommerce")},n=(0,E.di)(U.map((e=>({id:parseInt(e.attribute_id,10),name:e.attribute_label})))).asc("name");return(0,a.createElement)(H,{className:"woocommerce-product-attributes",list:n,selected:n.filter((({id:e})=>e===r)),onChange:e=>{if(!e||!e.length)return;const o=e[0].id;U.find((e=>e.attribute_id===o.toString()))&&r!==o&&t(o)},messages:o,isSingle:!0,isCompact:e})},J=(0,n.getSetting)("attributes",[]).reduce(((e,t)=>{const r=(o=t)&&o.attribute_name?{id:parseInt(o.attribute_id,10),name:o.attribute_name,taxonomy:"pa_"+o.attribute_name,label:o.attribute_label}:null;var o;return r&&r.id&&e.push(r),e}),[]),W=({attributes:e,setAttributes:t})=>{const{attributeId:r,showCounts:o,queryType:n,displayStyle:l,selectType:s}=e;return(0,a.createElement)(i.InspectorControls,{key:"inspector"},(0,a.createElement)(k.PanelBody,{title:(0,c.__)("Display Settings","woocommerce")},(0,a.createElement)(k.ToggleControl,{label:(0,c.__)("Display product count","woocommerce"),checked:o,onChange:()=>t({showCounts:!o})}),(0,a.createElement)(k.__experimentalToggleGroupControl,{label:(0,c.__)("Allow selecting multiple options?","woocommerce"),value:s||"multiple",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,c._x)("Multiple","Number of filters","woocommerce")}),(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"single",label:(0,c._x)("Single","Number of filters","woocommerce")})),"multiple"===s&&(0,a.createElement)(k.__experimentalToggleGroupControl,{label:(0,c.__)("Filter Conditions","woocommerce"),help:"and"===n?(0,c.__)("Choose to return filter results for all of the attributes selected.","woocommerce"):(0,c.__)("Choose to return filter results for any of the attributes selected.","woocommerce"),value:n,onChange:e=>t({queryType:e}),className:"wc-block-attribute-filter__conditions-toggle"},(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"and",label:(0,c.__)("All","woocommerce")}),(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"or",label:(0,c.__)("Any","woocommerce")})),(0,a.createElement)(k.__experimentalToggleGroupControl,{label:(0,c.__)("Display Style","woocommerce"),value:l,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"list",label:(0,c.__)("List","woocommerce")}),(0,a.createElement)(k.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,c.__)("Dropdown","woocommerce")}))),(0,a.createElement)(k.PanelBody,{title:(0,c.__)("Content Settings","woocommerce"),initialOpen:!1},(0,a.createElement)(z,{isCompact:!0,attributeId:r,setAttributeId:e=>{t({attributeId:e})}})))},X=window.wc.blocksComponents;r(5400);const Z=({name:e,count:t})=>(0,a.createElement)(a.Fragment,null,e,null!==t&&Number.isFinite(t)&&(0,a.createElement)(X.Label,{label:t.toString(),screenReaderLabel:(0,c.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,c._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}})),ee=({attributeTerms:e,showCounts:t})=>(0,a.createElement)(X.CheckboxList,{className:"wc-block-attribute-filter style-list",onChange:()=>null,options:e.map((e=>({label:(0,a.createElement)(Z,{name:e.name,count:t?e.count:null}),value:e.slug})))});var te=r(224);const re=({placeholder:e})=>(0,a.createElement)("div",{className:"wc-interactivity-dropdown"},(0,a.createElement)("div",{className:"wc-interactivity-dropdown__dropdown"},(0,a.createElement)("div",{className:"wc-interactivity-dropdown__dropdown-selection",tabIndex:0},(0,a.createElement)("span",{className:"wc-interactivity-dropdown__placeholder"},e),(0,a.createElement)("span",{className:"wc-interactivity-dropdown__svg-container"},(0,a.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30"},(0,a.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))))),oe=({label:e})=>(0,a.createElement)("div",{className:"wc-block-attribute-filter style-dropdown"},(0,a.createElement)(re,{placeholder:(0,c.sprintf)(/* translators: %s attribute name. */ /* translators: %s attribute name. */
(0,c.__)("Select %s","woocommerce"),e)}),(0,a.createElement)(C.A,{icon:te.A,size:30})),ne=[{id:23,name:"Blue",slug:"blue",attr_slug:"blue",description:"",parent:0,count:4},{id:29,name:"Gray",slug:"gray",attr_slug:"gray",description:"",parent:0,count:3},{id:24,name:"Green",slug:"green",attr_slug:"green",description:"",parent:0,count:3},{id:25,name:"Red",slug:"red",attr_slug:"red",description:"",parent:0,count:4},{id:30,name:"Yellow",slug:"yellow",attr_slug:"yellow",description:"",parent:0,count:1}],le=(0,n.getSetting)("attributes",[]),ae=({onClick:e,isEditing:t})=>(0,a.createElement)(i.BlockControls,null,(0,a.createElement)(k.ToolbarGroup,{controls:[{icon:"edit",title:(0,c.__)("Edit","woocommerce"),onClick:e,isActive:t}]})),ce=({children:e,onClickToolbarEdit:t,isEditing:r,blockProps:o})=>(0,a.createElement)("div",{...o},(0,a.createElement)(ae,{onClick:t,isEditing:r}),e),se=({attributeId:e,setAttributeId:t,onClickDone:r})=>(0,a.createElement)(N,null,(0,a.createElement)("div",{className:"wc-block-attribute-filter__selection"},(0,a.createElement)(z,{isCompact:!1,attributeId:e,setAttributeId:t}),(0,a.createElement)(k.Button,{variant:"primary",onClick:r},(0,c.__)("Done","woocommerce")))),ie=(0,k.withSpokenMessages)((e=>{const{attributes:t,setAttributes:r,debouncedSpeak:o}=e,{attributeId:n,queryType:l,isPreview:u,displayStyle:m,showCounts:d}=t,p=function(e){if(e)return J.find((t=>t.id===e))}(n),[h,C]=(0,s.useState)(!n&&!u),[S,x]=(0,s.useState)([]),{results:N}=g({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==p?void 0:p.id)||0],shouldSelect:t.attributeId>0,query:{orderby:"menu_order"}}),{results:I}=(({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:l=!1})=>{let a=f();a=`${a}-collection-data`;const[c]=y(a),[i,u]=v("calculate_attribute_counts",[],a),[m,d]=v("calculate_price_range",null,a),[p,h]=v("calculate_stock_status_counts",null,a),[k,C]=v("calculate_rating_counts",null,a),S=b(e||{}),x=b(t),N=b(r),T=b(o);(0,s.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(i.find((e=>(0,_.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||u([...i,S]))}),[S,i,u]),(0,s.useEffect)((()=>{m!==x&&void 0!==x&&d(x)}),[x,d,m]),(0,s.useEffect)((()=>{p!==N&&void 0!==N&&h(N)}),[N,h,p]),(0,s.useEffect)((()=>{k!==T&&void 0!==T&&C(T)}),[T,C,k]);const[I,A]=(0,s.useState)(l),[O]=(0,w.d7)(I,200);I||A(!0);const P=(0,s.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,E.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return g({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...P},shouldSelect:O})})({queryAttribute:{taxonomy:(null==p?void 0:p.taxonomy)||"",queryType:l},queryState:{},isEditor:!0}),A=(0,i.useBlockProps)();(0,s.useEffect)((()=>{const e=(0,_.objectHasProp)(I,"attribute_counts")&&(t=I.attribute_counts,Array.isArray(t)&&t.every((e=>"term"in e&&"count"in e)))?I.attribute_counts.map((e=>e.term)):[];var t;if(0===e.length)return x([]);x(N.filter((t=>e.includes(t.id))))}),[N,I]);const O=(0,s.useCallback)((()=>{C(!1),o((0,c.__)("Now displaying a preview of the Filter Products by Attribute block.","woocommerce"))}),[C]),P=(0,s.useCallback)((e=>{r({attributeId:e})}),[r]),R=(0,s.useCallback)((()=>{C(!h)}),[h]);return u?(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(k.Disabled,null,(0,a.createElement)(ee,{showCounts:d,attributeTerms:ne}))):0===Object.keys(le).length?(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(T,null)):h?(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(se,{onClickDone:O,attributeId:n,setAttributeId:P})):n&&p?0===S.length?(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(k.Notice,{status:"warning",isDismissible:!1},(0,a.createElement)("p",null,(0,c.__)("There are no products with the selected attributes.","woocommerce")))):(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(W,{...e}),(0,a.createElement)(k.Disabled,null,"dropdown"===m?(0,a.createElement)(oe,{label:p.label||(0,c.__)("attribute","woocommerce")}):(0,a.createElement)(ee,{showCounts:d,attributeTerms:S})," ")):(0,a.createElement)(ce,{onClickToolbarEdit:R,isEditing:h,blockProps:A},(0,a.createElement)(k.Notice,{status:"warning",isDismissible:!1},(0,a.createElement)("p",null,(0,c.__)("Please select an attribute to use this filter!","woocommerce"))))}));(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,o.registerBlockType)(l,{edit:ie})},5400:()=>{},9642:()=>{},8137:()=>{},6636:()=>{},1609:e=>{"use strict";e.exports=window.React},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,l),r.exports}l.m=o,e=[],l.O=(t,r,o,n)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],c=!0,s=0;s<r.length;s++)(!1&n||a>=n)&&Object.keys(l.O).every((e=>l.O[e](r[s])))?r.splice(s--,1):(c=!1,n<a&&(a=n));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var a={};t=t||[null,r({}),r([]),r(r)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=r(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,l.d(n,a),n},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=2448,(()=>{var e={2448:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[a,c,s]=r,i=0;if(a.some((t=>0!==e[t]))){for(o in c)l.o(c,o)&&(l.m[o]=c[o]);if(s)var u=s(l)}for(t&&t(r);i<a.length;i++)n=a[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=l.O(void 0,[94],(()=>l(2943)));a=l.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-attribute"]=a})();