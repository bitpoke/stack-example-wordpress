(()=>{var e,t,r,o={3341:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,n=window.wc.wcSettings;var c=r(1609),i=r(5573);const s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-price","version":"1.0.0","title":"Price (Experimental)","description":"Let shoppers filter products by choosing a price range.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":3,"ancestor":["woocommerce/product-filters"],"supports":{"interactivity":true,"html":false},"usesContext":["query","filterParams"]}'),a=window.wp.blockEditor;var l=r(6087),u=r(4717);const p=window.wc.wcTypes;var d=r(5574),m=r(923),f=r.n(m);function w(e){const t=(0,l.useRef)(e);return f()(e,t.current)||(t.current=e),t.current}const y=window.wc.wcBlocksData,g=window.wp.data,_=(0,l.createContext)("page"),v=()=>(0,l.useContext)(_),C=(_.Provider,e=>{const t=v();e=e||t;const r=(0,g.useSelect)((t=>t(y.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,g.useDispatch)(y.QUERY_STATE_STORE_KEY);return[r,(0,l.useCallback)((t=>{o(e,t)}),[e,o])]}),b=(e,t,r)=>{const o=v();r=r||o;const n=(0,g.useSelect)((o=>o(y.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:c}=(0,g.useDispatch)(y.QUERY_STATE_STORE_KEY);return[n,(0,l.useCallback)((t=>{c(r,e,t)}),[r,e,c])]},E=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:c=!1})=>{let i=v();i=`${i}-collection-data`;const[s]=C(i),[a,m]=b("calculate_attribute_counts",[],i),[f,_]=b("calculate_price_range",null,i),[E,h]=b("calculate_stock_status_counts",null,i),[k,x]=b("calculate_rating_counts",null,i),S=w(e||{}),O=w(t),P=w(r),j=w(o);(0,l.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(a.find((e=>(0,p.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||m([...a,S]))}),[S,a,m]),(0,l.useEffect)((()=>{f!==O&&void 0!==O&&_(O)}),[O,_,f]),(0,l.useEffect)((()=>{E!==P&&void 0!==P&&h(P)}),[P,h,E]),(0,l.useEffect)((()=>{k!==j&&void 0!==j&&x(j)}),[j,x,k]);const[T,R]=(0,l.useState)(c),[B]=(0,u.d7)(T,200);T||R(!0);const q=(0,l.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,d.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(s)),[s]),{results:V,isLoading:L}=(e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:c=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const i=(0,l.useRef)({results:[],isLoading:!0}),s=w(n),a=w(o),u=(()=>{const[,e]=(0,l.useState)();return(0,l.useCallback)((t=>{e((()=>{throw t}))}),[])})(),d=(0,g.useSelect)((e=>{if(!c)return null;const o=e(y.COLLECTIONS_STORE_KEY),n=[t,r,s,a],i=o.getCollectionError(...n);if(i){if(!(0,p.isError)(i))throw new Error("TypeError: `error` object is not an instance of Error constructor");u(i)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,a,s,c,u]);return null!==d&&(i.current=d),i.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...q},shouldSelect:B});return{data:V,isLoading:L}};var h=r(7723);const k=(e=[])=>(0,o.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),x=window.wc.priceFormat;function S(e,t){return("number"==typeof e?e:parseInt(e,10))/10**t.minorUnit}function O(e){if(!(0,p.objectHasProp)(e,"price_range"))return{minPrice:0,maxPrice:0,minRange:0,maxRange:0};const t=(0,x.getCurrencyFromPriceResponse)(e.price_range),r=(0,p.objectHasProp)(e.price_range,"min_price")&&(0,p.isString)(e.price_range.min_price)?S(e.price_range.min_price,t):0,o=(0,p.objectHasProp)(e.price_range,"max_price")&&(0,p.isString)(e.price_range.max_price)?S(e.price_range.max_price,t):0;return{minPrice:r,maxPrice:o,minRange:r,maxRange:o}}r(9498);const P=({children:e})=>(0,c.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled"},(0,c.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e);(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,o.registerBlockType)(s,{icon:()=>(0,c.createElement)(i.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,c.createElement)("line",{x1:"4",y1:"15.25",x2:"20",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,c.createElement)("line",{x1:"4",y1:"19.25",x2:"13",y2:"19.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,c.createElement)(i.Circle,{cx:"8.75",cy:"7.75",r:"4.75",stroke:"currentColor",strokeWidth:"1.4",fill:"none"}),(0,c.createElement)(i.Path,{d:"M7.99278 6.34419C7.8133 6.46983 7.75717 6.60229 7.75717 6.7002C7.75717 6.79811 7.8133 6.93057 7.99278 7.0562C8.17091 7.18089 8.43983 7.27162 8.75717 7.27162C9.2288 7.27162 9.67418 7.40475 10.0131 7.64199C10.3506 7.87828 10.6143 8.24582 10.6143 8.7002C10.6143 9.15457 10.3506 9.52211 10.0131 9.7584C9.77922 9.92211 9.49465 10.0362 9.18574 10.0913V10.2716C9.18574 10.5083 8.99386 10.7002 8.75717 10.7002C8.52047 10.7002 8.3286 10.5083 8.3286 10.2716V10.0913C8.01968 10.0362 7.73512 9.92211 7.50125 9.7584C7.16369 9.52211 6.90002 9.15457 6.90002 8.70019C6.90002 8.4635 7.0919 8.27162 7.3286 8.27162C7.56529 8.27162 7.75717 8.4635 7.75717 8.7002C7.75717 8.79811 7.8133 8.93057 7.99278 9.0562C8.17091 9.18089 8.43983 9.27162 8.75717 9.27162C9.07451 9.27162 9.34342 9.18089 9.52155 9.0562C9.70103 8.93057 9.75717 8.79811 9.75717 8.7002C9.75717 8.60229 9.70103 8.46983 9.52155 8.34419C9.34342 8.2195 9.07451 8.12877 8.75717 8.12877C8.28553 8.12877 7.84016 7.99564 7.50125 7.7584C7.16369 7.52211 6.90002 7.15457 6.90002 6.7002C6.90002 6.24582 7.16369 5.87828 7.50125 5.64199C7.73512 5.47828 8.01969 5.36415 8.3286 5.30912V5.12877C8.3286 4.89207 8.52047 4.7002 8.75717 4.7002C8.99386 4.7002 9.18574 4.89207 9.18574 5.12877V5.30912C9.49465 5.36415 9.77922 5.47828 10.0131 5.64199C10.3506 5.87828 10.6143 6.24582 10.6143 6.7002C10.6143 6.93689 10.4224 7.12877 10.1857 7.12877C9.94905 7.12877 9.75717 6.93689 9.75717 6.7002C9.75717 6.60229 9.70103 6.46983 9.52155 6.34419C9.34342 6.2195 9.07451 6.12877 8.75717 6.12877C8.43983 6.12877 8.17091 6.2195 7.99278 6.34419Z",fill:"currentColor"})),edit:()=>{const e=(0,a.useBlockProps)(),{data:t,isLoading:r}=E({queryPrices:!0,queryState:{},isEditor:!0});return(0,c.createElement)("div",{...e},(0,c.createElement)(P,null,(0,c.createElement)(a.BlockContextProvider,{value:{filterData:{price:O(t),isLoading:r}}},(0,c.createElement)(a.InnerBlocks,{allowedBlocks:k(),template:[["core/heading",{level:4,content:(0,h.__)("Price","woocommerce"),style:{spacing:{margin:{bottom:"0.625rem",top:"0"}}}}],["woocommerce/product-filter-price-slider",{}]]}))))},save:()=>{const e=a.useBlockProps.save(),t=a.useInnerBlocksProps.save(e);return(0,c.createElement)("div",{...t})}})},9498:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function c(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,c),r.exports}c.m=o,e=[],c.O=(t,r,o,n)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],s=!0,a=0;a<r.length;a++)(!1&n||i>=n)&&Object.keys(c.O).every((e=>c.O[e](r[a])))?r.splice(a--,1):(s=!1,n<i&&(i=n));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);c.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(n,i),n},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=5303,(()=>{var e={5303:0};c.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,s,a]=r,l=0;if(i.some((t=>0!==e[t]))){for(o in s)c.o(s,o)&&(c.m[o]=s[o]);if(a)var u=a(c)}for(t&&t(r);l<i.length;l++)n=i[l],c.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return c.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=c.O(void 0,[94],(()=>c(3341)));i=c.O(i),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-price"]=i})();