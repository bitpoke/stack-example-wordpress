(()=>{var e,t,r,o={2547:(e,t,r)=>{"use strict";r.r(t);var o=r(1609);const n=window.wp.blocks;var c=r(7104),i=r(3576);const a=window.wc.wcSettings;r(261);const l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-price","version":"1.0.0","title":"Product Filter: Price (Experimental)","description":"Enable customers to filter the product collection by choosing a price range.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":2,"ancestor":["woocommerce/product-filter"],"supports":{"interactivity":true,"inserter":false},"usesContext":["query","queryId"],"attributes":{"showInputFields":{"type":"boolean","default":true},"inlineInput":{"type":"boolean","default":false}}}'),s=window.wp.blockEditor,u=window.wp.components;var p=r(6087),m=r(4717);const d=window.wc.wcTypes;var f=r(5574),w=r(923),g=r.n(w);function _(e){const t=(0,p.useRef)(e);return g()(e,t.current)||(t.current=e),t.current}const b=window.wc.wcBlocksData,y=window.wp.data,E=(0,p.createContext)("page"),v=()=>(0,p.useContext)(E),h=(E.Provider,e=>{const t=v();e=e||t;const r=(0,y.useSelect)((t=>t(b.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,y.useDispatch)(b.QUERY_STATE_STORE_KEY);return[r,(0,p.useCallback)((t=>{o(e,t)}),[e,o])]}),x=(e,t,r)=>{const o=v();r=r||o;const n=(0,y.useSelect)((o=>o(b.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:c}=(0,y.useDispatch)(b.QUERY_STATE_STORE_KEY);return[n,(0,p.useCallback)((t=>{c(r,e,t)}),[r,e,c])]},k=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:c=!1})=>{let i=v();i=`${i}-collection-data`;const[a]=h(i),[l,s]=x("calculate_attribute_counts",[],i),[u,w]=x("calculate_price_range",null,i),[g,E]=x("calculate_stock_status_counts",null,i),[k,P]=x("calculate_rating_counts",null,i),S=_(e||{}),O=_(t),C=_(r),T=_(o);(0,p.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(l.find((e=>(0,d.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||s([...l,S]))}),[S,l,s]),(0,p.useEffect)((()=>{u!==O&&void 0!==O&&w(O)}),[O,w,u]),(0,p.useEffect)((()=>{g!==C&&void 0!==C&&E(C)}),[C,E,g]),(0,p.useEffect)((()=>{k!==T&&void 0!==T&&P(T)}),[T,P,k]);const[j,R]=(0,p.useState)(c),[N]=(0,m.d7)(j,200);j||R(!0);const q=(0,p.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,f.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(a)),[a]);return(e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:c=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const i=(0,p.useRef)({results:[],isLoading:!0}),a=_(n),l=_(o),s=(()=>{const[,e]=(0,p.useState)();return(0,p.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,y.useSelect)((e=>{if(!c)return null;const o=e(b.COLLECTIONS_STORE_KEY),n=[t,r,a,l],i=o.getCollectionError(...n);if(i){if(!(0,d.isError)(i))throw new Error("TypeError: `error` object is not an instance of Error constructor");s(i)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,l,a,c]);return null!==u&&(i.current=u),i.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...q},shouldSelect:N})};var P=r(851);const S=window.wc.priceFormat;function O(e,t){return("number"==typeof e?e:parseInt(e,10))/10**t.minorUnit}const C=({attributes:e})=>{const{inlineInput:t,showInputFields:r}=e,{results:n,isLoading:c}=k({queryPrices:!0,queryState:{},isEditor:!0});if(c)return null;const{minPrice:i,maxPrice:a,formattedMinPrice:l,formattedMaxPrice:s}=function(e){const t=(0,S.getCurrency)({minorUnit:0});if(!(0,d.objectHasProp)(e,"price_range"))return{minPrice:0,maxPrice:0,minRange:0,maxRange:0,formattedMinPrice:(0,S.formatPrice)(0,t),formattedMaxPrice:(0,S.formatPrice)(0,t)};const r=(0,S.getCurrencyFromPriceResponse)(e.price_range),o=(0,d.objectHasProp)(e.price_range,"min_price")&&(0,d.isString)(e.price_range.min_price)?O(e.price_range.min_price,r):0,n=(0,d.objectHasProp)(e.price_range,"max_price")&&(0,d.isString)(e.price_range.max_price)?O(e.price_range.max_price,r):0;return{minPrice:o,maxPrice:n,minRange:o,maxRange:n,formattedMinPrice:(0,S.formatPrice)(o,t),formattedMaxPrice:(0,S.formatPrice)(n,t)}}(n),u=()=>null,p=r?(0,o.createElement)("input",{className:"min",type:"text",value:l,onChange:u}):(0,o.createElement)("span",null,l),m=r?(0,o.createElement)("input",{className:"max",type:"text",value:s,onChange:u}):(0,o.createElement)("span",null,s);return(0,o.createElement)("div",{className:(0,P.A)("wp-block-woocommerce-product-filter-price-content",{"wp-block-woocommerce-product-filter-price-content--inline":t&&r})},(0,o.createElement)("div",{className:"wp-block-woocommerce-product-filter-price-content-left-input text"},p),(0,o.createElement)("div",{className:"wp-block-woocommerce-product-filter-price-content-price-range-slider range"},(0,o.createElement)("div",{className:"range-bar"}),(0,o.createElement)("input",{type:"range",className:"min",min:i,max:a,value:i,onChange:u}),(0,o.createElement)("input",{type:"range",className:"max",min:i,max:a,value:a,onChange:u})),(0,o.createElement)("div",{className:"wp-block-woocommerce-product-filter-price-content-right-input text"},m))};var T=r(7723);const j=({attributes:e,setAttributes:t})=>{const{showInputFields:r,inlineInput:n}=e;return(0,o.createElement)(s.InspectorControls,null,(0,o.createElement)(u.PanelBody,{title:(0,T.__)("Settings","woocommerce")},(0,o.createElement)(u.__experimentalToggleGroupControl,{label:(0,T.__)("Price Slider","woocommerce"),value:r?"editable":"text",onChange:e=>t({showInputFields:"editable"===e}),className:"wc-block-price-filter__price-range-toggle"},(0,o.createElement)(u.__experimentalToggleGroupControlOption,{value:"editable",label:(0,T.__)("Editable","woocommerce")}),(0,o.createElement)(u.__experimentalToggleGroupControlOption,{value:"text",label:(0,T.__)("Text","woocommerce")})),r&&(0,o.createElement)(u.ToggleControl,{label:(0,T.__)("Inline input fields","woocommerce"),checked:n,onChange:()=>t({inlineInput:!n}),help:(0,T.__)("Show input fields inline with the slider.","woocommerce")})))};(()=>{const{experimentalBlocksEnabled:e}=(0,a.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,n.registerBlockType)(l,{icon:{src:(0,o.createElement)(c.A,{icon:i.A,className:"wc-block-editor-components-block-icon"})},edit:e=>{const t=(0,s.useBlockProps)();return(0,o.createElement)("div",{...t},(0,o.createElement)(j,{...e}),(0,o.createElement)(u.Disabled,null,(0,o.createElement)(C,{...e})))}})},261:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function c(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,c),r.exports}c.m=o,e=[],c.O=(t,r,o,n)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],a=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(c.O).every((e=>c.O[e](r[l])))?r.splice(l--,1):(a=!1,n<i&&(i=n));if(a){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);c.r(n);var i={};t=t||[null,r({}),r([]),r(r)];for(var a=2&o&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(n,i),n},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=5303,(()=>{var e={5303:0};c.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[i,a,l]=r,s=0;if(i.some((t=>0!==e[t]))){for(o in a)c.o(a,o)&&(c.m[o]=a[o]);if(l)var u=l(c)}for(t&&t(r);s<i.length;s++)n=i[s],c.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return c.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=c.O(void 0,[94],(()=>c(2547)));i=c.O(i),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-price"]=i})();