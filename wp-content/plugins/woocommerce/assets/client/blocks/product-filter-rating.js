(()=>{var e,t,r,o={9030:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,n=window.wc.wcSettings;var a=r(1609),l=r(5573);var c=r(7723),s=r(851);const i=window.wp.blockEditor;r(8887);const u=({className:e,rating:t,ratedProductsCount:r})=>{const o=(0,s.A)("wc-block-components-product-rating",e),n={width:t/5*100+"%"},l=(0,c.sprintf)(/* translators: %f is referring to the average rating value */ /* translators: %f is referring to the average rating value */
(0,c.__)("Rated %f out of 5","woocommerce"),t),i={__html:(0,c.sprintf)(/* translators: %s is the rating value wrapped in HTML strong tags. */ /* translators: %s is the rating value wrapped in HTML strong tags. */
(0,c.__)("Rated %s out of 5","woocommerce"),(0,c.sprintf)('<strong class="rating">%f</strong>',t))};return(0,a.createElement)("div",{className:o},(0,a.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":l},(0,a.createElement)("span",{style:n,dangerouslySetInnerHTML:i})),null!==r?(0,a.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",r,")"):null)},d=window.wc.wcBlocksData,m=window.wp.data;var p=r(6087),w=r(923),f=r.n(w);const g=(0,p.createContext)("page"),b=()=>(0,p.useContext)(g),v=(g.Provider,e=>{const t=b();e=e||t;const r=(0,m.useSelect)((t=>t(d.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[r,(0,p.useCallback)((t=>{o(e,t)}),[e,o])]}),y=(e,t,r)=>{const o=b();r=r||o;const n=(0,m.useSelect)((o=>o(d.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:a}=(0,m.useDispatch)(d.QUERY_STATE_STORE_KEY);return[n,(0,p.useCallback)((t=>{a(r,e,t)}),[r,e,a])]};var _=r(4717);const E=window.wc.wcTypes;var h=r(5574);function k(e){const t=(0,p.useRef)(e);return f()(e,t.current)||(t.current=e),t.current}const C=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:a=!1})=>{let l=b();l=`${l}-collection-data`;const[c]=v(l),[s,i]=y("calculate_attribute_counts",[],l),[u,w]=y("calculate_price_range",null,l),[f,g]=y("calculate_stock_status_counts",null,l),[C,x]=y("calculate_rating_counts",null,l),S=k(e||{}),P=k(t),O=k(r),L=k(o);(0,p.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(s.find((e=>(0,E.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||i([...s,S]))}),[S,s,i]),(0,p.useEffect)((()=>{u!==P&&void 0!==P&&w(P)}),[P,w,u]),(0,p.useEffect)((()=>{f!==O&&void 0!==O&&g(O)}),[O,g,f]),(0,p.useEffect)((()=>{C!==L&&void 0!==L&&x(L)}),[L,x,C]);const[T,R]=(0,p.useState)(a),[j]=(0,_.d7)(T,200);T||R(!0);const B=(0,p.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,h.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]),{results:N,isLoading:q}=(e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:a=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const l=(0,p.useRef)({results:[],isLoading:!0}),c=k(n),s=k(o),i=(()=>{const[,e]=(0,p.useState)();return(0,p.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,m.useSelect)((e=>{if(!a)return null;const o=e(d.COLLECTIONS_STORE_KEY),n=[t,r,c,s],l=o.getCollectionError(...n);if(l){if(!(0,E.isError)(l))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(l)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,s,c,a,i]);return null!==u&&(l.current=u),l.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...B},shouldSelect:j});return{data:N,isLoading:q}},x=window.wp.components,S=[{label:(0,a.createElement)(u,{key:5,rating:5,ratedProductsCount:null}),value:"5"},{label:(0,a.createElement)(u,{key:4,rating:4,ratedProductsCount:null}),value:"4"},{label:(0,a.createElement)(u,{key:3,rating:3,ratedProductsCount:null}),value:"3"},{label:(0,a.createElement)(u,{key:2,rating:2,ratedProductsCount:null}),value:"2"},{label:(0,a.createElement)(u,{key:1,rating:1,ratedProductsCount:null}),value:"1"}],P=window.wp.url;(0,n.getSettingWithCoercion)("isRenderingPhpTemplate",!1,E.isBoolean);function O({stars:e=5,size:t=24,color:r="black",gap:o=0}){const n=e*t+(e-1)*o;return(0,a.createElement)(x.SVG,{width:n,height:t,viewBox:`0 0 ${n} 24`,fill:r,"aria-hidden":"true",focusable:"false"},Array.from({length:e},((e,r)=>(0,a.createElement)(x.Path,{key:r,d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",transform:`translate(${r*(t+o)}, 0)`}))))}function L({stars:e,ariaLabel:t}){return(0,a.createElement)(x.Flex,{title:t,"aria-label":t,justify:"flex-start",gap:1},(0,a.createElement)(x.FlexItem,null,(0,a.createElement)(O,{stars:e})),(0,a.createElement)(x.FlexItem,null,(0,c.__)("& up","woocommerce")))}const T=({attributes:e,setAttributes:t})=>{const{showCounts:r,minRating:o}=e;return(0,a.createElement)(i.InspectorControls,{key:"inspector"},(0,a.createElement)(x.PanelBody,{title:(0,c.__)("Display","woocommerce")},(0,a.createElement)(x.ToggleControl,{label:(0,c.__)("Display product count","woocommerce"),checked:r,onChange:function(e){t({showCounts:e})}})),(0,a.createElement)(x.PanelBody,{title:(0,c.__)("Minimum rating","woocommerce")},(0,a.createElement)(x.RadioControl,{selected:o,className:"wc-block-rating-filter__rating-control",options:[{label:(0,a.createElement)(L,{stars:4,ariaLabel:(0,c.__)("Four stars and up","woocommerce")}),value:"4"},{label:(0,a.createElement)(L,{stars:3,ariaLabel:(0,c.__)("Three stars and up","woocommerce")}),value:"3"},{label:(0,a.createElement)(L,{stars:2,ariaLabel:(0,c.__)("Two stars and up","woocommerce")}),value:"2"},{label:(0,c.__)("No limit","woocommerce"),value:"0"}],onChange:function(e){t({minRating:e})}})))},R=(e=[])=>(0,o.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),j=["woocommerce/product-filters","woocommerce/product-filter-attribute","woocommerce/product-filter-active","woocommerce/product-filter-price","woocommerce/product-filter-status","woocommerce/product-collection","core/query"];var B=r(2478);r(1925);const N=({children:e})=>(0,a.createElement)("div",{className:"wc-block-product-filter-components-notice"},(0,a.createElement)(x.Icon,{className:"wc-block-product-filter-components-notice__icon",icon:B.A}),(0,a.createElement)("div",{className:"wc-block-product-filter-components-notice__content"},e));r(2252),r(9498);const q=({children:e})=>(0,a.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled"},(0,a.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e),A=(0,x.withSpokenMessages)((e=>{var t;const{attributes:r,setAttributes:o,clientId:l}=e,{isPreview:d,showCounts:m,minRating:w}=r,{children:f,...g}=(0,i.useInnerBlocksProps)((0,i.useBlockProps)(),{allowedBlocks:R(j),template:[["core/heading",{level:4,content:(0,c.__)("Rating","woocommerce"),style:{spacing:{margin:{bottom:"0.625rem",top:"0"}}}}],["woocommerce/product-filter-checkbox-list"]]}),[b]=v(),{data:_,isLoading:h}=C({queryRating:!0,queryState:b,isEditor:!0}),[k,x]=(0,p.useState)(d?S:[]),O=!d&&h&&0===k.length,L=(0,p.useMemo)((()=>((e="filter_rating")=>{const t=(r=e,window?(0,P.getQueryArg)(window.location.href,r):null);var r;return t?(0,E.isString)(t)?t.split(","):t:[]})("rating_filter")),[]),[B]=y("rating",L);if((0,p.useEffect)((()=>{var e,t;if(h||d)return;if(null==_||!_.rating_counts||0===(null==_||null===(e=_.rating_counts)||void 0===e?void 0:e.length))return void x(S);const r="string"==typeof w?parseFloat(w):0,o=null!=_&&null!==(t=_.rating_counts)&&void 0!==t&&t.length?_.rating_counts.sort(((e,t)=>t.rating-e.rating)).filter((({rating:e})=>e>=r)).map((({rating:e,count:t},r)=>({label:(0,a.createElement)(u,{key:e,rating:e,ratedProductsCount:m?t:null}),value:null==e?void 0:e.toString(),selected:0===r}))):[];x(o)}),[m,d,_,h,B,w]),!h&&0===k.length)return null;if(!(0,n.getSettingWithCoercion)("hasFilterableProducts",!1,E.isBoolean))return null;const A=!(h||null!==(t=_.rating_counts)&&void 0!==t&&t.length);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(T,{clientId:l,attributes:r,setAttributes:o}),(0,a.createElement)("div",{...g},(0,a.createElement)(q,null,A&&(0,a.createElement)(N,null,(0,c.__)("Your store doesn't have any products with ratings yet. This filter option will display when a product receives a review.","woocommerce")),(0,a.createElement)("div",{className:(0,s.A)({"is-loading":O})},(0,a.createElement)(i.BlockContextProvider,{value:{filterData:{items:k,isLoading:O}}},f)))))})),M=JSON.parse('{"name":"woocommerce/product-filter-rating","version":"1.0.0","title":"Rating (Experimental)","description":"Enable customers to filter the product collection by rating.","category":"woocommerce","keywords":[],"supports":{"interactivity":true,"color":{"background":false,"text":true}},"ancestor":["woocommerce/product-filters"],"usesContext":["query","filterParams"],"attributes":{"className":{"type":"string","default":""},"showCounts":{"type":"boolean","default":false},"minRating":{"type":"string","default":"0"},"isPreview":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}');(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,o.registerBlockType)(M,{icon:()=>(0,a.createElement)(l.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)("line",{x1:"4",y1:"15.25",x2:"20",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,a.createElement)("line",{x1:"4",y1:"19.25",x2:"13",y2:"19.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,a.createElement)(l.Path,{d:"M8.92572 3.95425C9.01742 3.76843 9.28238 3.76844 9.37409 3.95425L10.4877 6.21072C10.5241 6.28451 10.5945 6.33565 10.676 6.34748L13.1661 6.70933C13.3712 6.73912 13.4531 6.99112 13.3047 7.13575L11.5028 8.89217C11.4439 8.94961 11.417 9.03236 11.4309 9.11346L11.8563 11.5936C11.8913 11.7978 11.6769 11.9535 11.4935 11.8571L9.26624 10.6862C9.19341 10.6479 9.1064 10.6479 9.03357 10.6862L6.80629 11.8571C6.62288 11.9535 6.40853 11.7978 6.44355 11.5936L6.86893 9.11346C6.88283 9.03236 6.85595 8.94961 6.79703 8.89217L4.99512 7.13575C4.84674 6.99112 4.92862 6.73912 5.13367 6.70933L7.62385 6.34748C7.70527 6.33565 7.77566 6.28451 7.81208 6.21072L8.92572 3.95425Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:"none"})),attributes:{...M.attributes},edit:A,save:()=>{const e=i.useBlockProps.save(),t=i.useInnerBlocksProps.save(e);return(0,a.createElement)("div",{...t})}})},8887:()=>{},9498:()=>{},1925:()=>{},2252:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}};return o[e].call(r.exports,r,r.exports,a),r.exports}a.m=o,e=[],a.O=(t,r,o,n)=>{if(!r){var l=1/0;for(u=0;u<e.length;u++){for(var[r,o,n]=e[u],c=!0,s=0;s<r.length;s++)(!1&n||l>=n)&&Object.keys(a.O).every((e=>a.O[e](r[s])))?r.splice(s--,1):(c=!1,n<l&&(l=n));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var l={};t=t||[null,r({}),r([]),r(r)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=r(c))Object.getOwnPropertyNames(c).forEach((t=>l[t]=()=>e[t]));return l.default=()=>e,a.d(n,l),n},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=1631,(()=>{var e={1631:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[l,c,s]=r,i=0;if(l.some((t=>0!==e[t]))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var u=s(a)}for(t&&t(r);i<l.length;i++)n=l[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var l=a.O(void 0,[94],(()=>a(9030)));l=a.O(l),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-rating"]=l})();