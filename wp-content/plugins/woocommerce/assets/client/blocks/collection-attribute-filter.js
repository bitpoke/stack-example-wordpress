(()=>{var e,t={2621:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks,n=window.wc.wcSettings;var l,a,c,s,i,u,m,d,p,_;const b=(0,n.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),g=(b.pluginUrl,b.pluginUrl,b.buildPhase),w=(null===(l=n.STORE_PAGES.shop)||void 0===l||l.permalink,null===(a=n.STORE_PAGES.checkout)||void 0===a||a.id,null===(c=n.STORE_PAGES.checkout)||void 0===c||c.permalink,null===(s=n.STORE_PAGES.privacy)||void 0===s||s.permalink,null===(i=n.STORE_PAGES.privacy)||void 0===i||i.title,null===(u=n.STORE_PAGES.terms)||void 0===u||u.permalink,null===(m=n.STORE_PAGES.terms)||void 0===m||m.title,null===(d=n.STORE_PAGES.cart)||void 0===d||d.id,null===(p=n.STORE_PAGES.cart)||void 0===p||p.permalink,null!==(_=n.STORE_PAGES.myaccount)&&void 0!==_&&_.permalink?n.STORE_PAGES.myaccount.permalink:(0,n.getSetting)("wpLoginUrl","/wp-login.php"),(0,n.getSetting)("localPickupEnabled",!1),(0,n.getSetting)("countries",{})),E=(0,n.getSetting)("countryData",{}),h=(Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowBilling)).map((e=>[e,w[e]||""]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowBilling)).map((e=>[e,E[e].states||[]]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowShipping)).map((e=>[e,w[e]||""]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowShipping)).map((e=>[e,E[e].states||[]]))),Object.fromEntries(Object.keys(E).map((e=>[e,E[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],additional:[]});(0,n.getSetting)("addressFieldsLocations",h).address,(0,n.getSetting)("addressFieldsLocations",h).contact,(0,n.getSetting)("addressFieldsLocations",h).additional,r(4170);const y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/collection-attribute-filter","version":"1.0.0","title":"Collection Attribute Filter","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":2,"ancestor":["woocommerce/collection-filters"],"supports":{"interactivity":true},"usesContext":["collectionData"],"attributes":{"queryParam":{"type":"object","default":{}},"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":false},"queryType":{"type":"string","default":"or"},"displayStyle":{"type":"string","default":"list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false}}}');var f=r(9196),v=r(5736),S=r(9307);const k=window.wp.blockEditor,C=window.wc.wcBlocksData,x=window.wp.data;var T=r(9127),O=r.n(T);function N(e){const t=(0,S.useRef)(e);return O()(e,t.current)||(t.current=e),t.current}const I=e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:n={},shouldSelect:l=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const a=(0,S.useRef)({results:[],isLoading:!0}),c=N(n),s=N(o),i=(()=>{const[,e]=(0,S.useState)();return(0,S.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,x.useSelect)((e=>{if(!l)return null;const o=e(C.COLLECTIONS_STORE_KEY),n=[t,r,c,s],a=o.getCollectionError(...n);if(a){if(!(a instanceof Error))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(a)}return{results:o.getCollection(...n),isLoading:!o.hasFinishedResolution("getCollection",n)}}),[t,r,s,c,l]);return null!==u&&(a.current=u),a.current};var P=r(2600);function A(e,t){return!(e=>null===e)(r=e)&&r instanceof Object&&r.constructor===Object&&t in e;var r}var R=r(4167);const j=(0,S.createContext)("page"),q=()=>(0,S.useContext)(j),F=(j.Provider,e=>{const t=q();e=e||t;const r=(0,x.useSelect)((t=>t(C.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,x.useDispatch)(C.QUERY_STATE_STORE_KEY);return[r,(0,S.useCallback)((t=>{o(e,t)}),[e,o])]}),L=(e,t,r)=>{const o=q();r=r||o;const n=(0,x.useSelect)((o=>o(C.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:l}=(0,x.useDispatch)(C.QUERY_STATE_STORE_KEY);return[n,(0,S.useCallback)((t=>{l(r,e,t)}),[r,e,l])]},G=window.wp.components;var B=r(2911),D=r(3743),Y=r(5656);const $=({children:e})=>(0,f.createElement)(G.Placeholder,{className:"wc-block-attribute-filter",icon:(0,f.createElement)(B.Z,{icon:D.Z}),label:(0,v.__)("Filter by Attribute","woocommerce"),instructions:(0,v.__)("Enable customers to filter the product grid by selecting one or more attributes, such as color.","woocommerce")},e),Z=()=>(0,f.createElement)($,null,(0,f.createElement)("p",null,(0,v.__)("Attributes are needed for filtering your products. You haven't created any attributes yet.","woocommerce")),(0,f.createElement)(G.Button,{className:"wc-block-attribute-filter__add-attribute-button",variant:"secondary",href:(0,n.getAdminLink)("edit.php?post_type=product&page=product_attributes"),target:"_top"},(0,v.__)("Add new attribute","woocommerce")+" ",(0,f.createElement)(B.Z,{icon:Y.Z})),(0,f.createElement)(G.Button,{className:"wc-block-attribute-filter__read_more_button",variant:"tertiary",href:"https://docs.woocommerce.com/document/managing-product-taxonomies/",target:"_blank"},(0,v.__)("Learn more","woocommerce")));var M=r(2720),V=r(3849),Q=r.n(V),U=r(4333);const K={clear:(0,v.__)("Clear all selected items","woocommerce"),noItems:(0,v.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,v.__)("No results for %s","woocommerce"),search:(0,v.__)("Search for items","woocommerce"),selected:e=>(0,v.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,v._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,v.__)("Search results updated.","woocommerce")},H=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),o=("id",t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{}));const n=["0"],l=(e={})=>e.parent?[...l(o[e.parent]),e.name]:e.name?[e.name]:[],a=e=>e.map((e=>{const t=r[e.id];return n.push(""+e.id),{...e,breadcrumbs:l(o[e.parent]),children:t&&t.length?a(t):[]}})),c=a(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{n.includes(e)||c.push(...a(t||[]))})),c},J=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,f.createElement)("strong",{key:t},e):(0,f.createElement)(S.Fragment,{key:t},e)))};function W(e,t,r){const o=new Set(t.map((e=>e[r])));return e.filter((e=>!o.has(e[r])))}const z=window.wp.htmlEntities,X=({label:e})=>(0,f.createElement)("span",{className:"woocommerce-search-list__item-count"},e),ee=e=>{const{item:t,search:r}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,f.createElement)("span",{className:"woocommerce-search-list__item-label"},o?(0,f.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(n=t.breadcrumbs).length?n.slice(0,1).toString():2===n.length?n.slice(0,1).toString()+" › "+n.slice(-1).toString():n.slice(0,1).toString()+" … "+n.slice(-1).toString()):null,(0,f.createElement)("span",{className:"woocommerce-search-list__item-name"},J((0,z.decodeEntities)(t.name),r)));var n},te=({countLabel:e,className:t,depth:r=0,controlId:o="",item:n,isSelected:l,isSingle:a,onSelect:c,search:s="",selected:i,useExpandedPanelId:u,...m})=>{var d,p;const[_,b]=u,g=null!=e&&void 0!==n.count&&null!==n.count,w=!(null===(d=n.breadcrumbs)||void 0===d||!d.length),E=!(null===(p=n.children)||void 0===p||!p.length),h=_===n.id,y=Q()(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":w,"has-children":E,"has-count":g,"is-expanded":h,"is-radio-button":a}),v=m.name||`search-list-item-${o}`,k=`${v}-${n.id}`,C=(0,S.useCallback)((()=>{b(h?-1:Number(n.id))}),[h,n.id,b]);return E?(0,f.createElement)("div",{className:y,onClick:C,onKeyDown:e=>"Enter"===e.key||" "===e.key?C():null,role:"treeitem",tabIndex:0},a?(0,f.createElement)(f.Fragment,null,(0,f.createElement)("input",{type:"radio",id:k,name:v,value:n.value,onChange:c(n),onClick:e=>e.stopPropagation(),checked:l,className:"woocommerce-search-list__item-input",...m}),(0,f.createElement)(ee,{item:n,search:s}),g?(0,f.createElement)(X,{label:e||n.count}):null):(0,f.createElement)(f.Fragment,null,(0,f.createElement)(G.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:l,...!l&&n.children.some((e=>i.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:J((0,z.decodeEntities)(n.name),s),onChange:()=>{l?c(W(i,n.children,"id"))():c(function(e,t,r){const o=W(t,e,"id");return[...e,...o]}(i,n.children))()},onClick:e=>e.stopPropagation()}),g?(0,f.createElement)(X,{label:e||n.count}):null)):(0,f.createElement)("label",{htmlFor:k,className:y},a?(0,f.createElement)(f.Fragment,null,(0,f.createElement)("input",{...m,type:"radio",id:k,name:v,value:n.value,onChange:c(n),checked:l,className:"woocommerce-search-list__item-input"}),(0,f.createElement)(ee,{item:n,search:s})):(0,f.createElement)(G.CheckboxControl,{...m,id:k,name:v,className:"woocommerce-search-list__item-input",value:(0,z.decodeEntities)(n.value),label:J((0,z.decodeEntities)(n.name),s),onChange:c(n),checked:l}),g?(0,f.createElement)(X,{label:e||n.count}):null)};var re=r(837);r(1058);const oe=({id:e,label:t,popoverContents:r,remove:o,screenReaderLabel:n,className:l=""})=>{const[a,c]=(0,S.useState)(!1),s=(0,U.useInstanceId)(oe);if(n=n||t,!t)return null;t=(0,z.decodeEntities)(t);const i=Q()("woocommerce-tag",l,{"has-remove":!!o}),u=`woocommerce-tag__label-${s}`,m=(0,f.createElement)(f.Fragment,null,(0,f.createElement)("span",{className:"screen-reader-text"},n),(0,f.createElement)("span",{"aria-hidden":"true"},t));return(0,f.createElement)("span",{className:i},r?(0,f.createElement)(G.Button,{className:"woocommerce-tag__text",id:u,onClick:()=>c(!0)},m):(0,f.createElement)("span",{className:"woocommerce-tag__text",id:u},m),r&&a&&(0,f.createElement)(G.Popover,{onClose:()=>c(!1)},r),o&&(0,f.createElement)(G.Button,{className:"woocommerce-tag__remove",onClick:o(e),label:(0,v.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,v.__)("Remove %s","woocommerce"),t),"aria-describedby":u},(0,f.createElement)(B.Z,{icon:re.Z,size:20,className:"clear-icon",role:"img"})))},ne=oe;r(9658);const le=e=>(0,f.createElement)(te,{...e}),ae=e=>{const{list:t,selected:r,renderItem:o,depth:n=0,onSelect:l,instanceId:a,isSingle:c,search:s,useExpandedPanelId:i}=e,[u]=i;return t?(0,f.createElement)(S.Fragment,null,t.map((t=>{var m,d;const p=null!==(m=t.children)&&void 0!==m&&m.length&&!c?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),_=(null===(d=t.children)||void 0===d?void 0:d.length)&&u===t.id;return(0,f.createElement)(S.Fragment,{key:t.id},(0,f.createElement)("li",null,o({item:t,isSelected:p,onSelect:l,isSingle:c,selected:r,search:s,depth:n,useExpandedPanelId:i,controlId:a})),_?(0,f.createElement)(ae,{...e,list:t.children,depth:n+1}):null)}))):null},ce=({isLoading:e,isSingle:t,selected:r,messages:o,onChange:n,onRemove:l})=>{if(e||t||!r)return null;const a=r.length;return(0,f.createElement)("div",{className:"woocommerce-search-list__selected"},(0,f.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,f.createElement)("strong",null,o.selected(a)),a>0?(0,f.createElement)(G.Button,{variant:"link",isDestructive:!0,onClick:()=>n([]),"aria-label":o.clear},(0,v.__)("Clear all","woocommerce")):null),a>0?(0,f.createElement)("ul",null,r.map(((e,t)=>(0,f.createElement)("li",{key:t},(0,f.createElement)(ne,{label:e.name,id:e.id,remove:l}))))):null)},se=({filteredList:e,search:t,onSelect:r,instanceId:o,useExpandedPanelId:n,...l})=>{const{messages:a,renderItem:c,selected:s,isSingle:i}=l,u=c||le;return 0===e.length?(0,f.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,f.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,f.createElement)(B.Z,{icon:M.Z,role:"img"})),(0,f.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,v.sprintf)(a.noResults,t):a.noItems)):(0,f.createElement)("ul",{className:"woocommerce-search-list__list"},(0,f.createElement)(ae,{useExpandedPanelId:n,list:e,selected:s,renderItem:u,onSelect:r,instanceId:o,isSingle:i,search:t}))},ie=e=>{const{className:t="",isCompact:r,isHierarchical:o,isLoading:n,isSingle:l,list:a,messages:c=K,onChange:s,onSearch:i,selected:u,type:m="text",debouncedSpeak:d}=e,[p,_]=(0,S.useState)(""),b=(0,S.useState)(-1),g=(0,U.useInstanceId)(ie),w=(0,S.useMemo)((()=>({...K,...c})),[c]),E=(0,S.useMemo)((()=>((e,t,r)=>{if(!t)return r?H(e):e;const o=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),n=e.map((e=>!!o.test(e.name)&&e)).filter(Boolean);return r?H(n,e):n})(a,p,o)),[a,p,o]);(0,S.useEffect)((()=>{d&&d(w.updated)}),[d,w]),(0,S.useEffect)((()=>{"function"==typeof i&&i(p)}),[p,i]);const h=(0,S.useCallback)((e=>()=>{l&&s([]);const t=u.findIndex((({id:t})=>t===e));s([...u.slice(0,t),...u.slice(t+1)])}),[l,u,s]),y=(0,S.useCallback)((e=>()=>{Array.isArray(e)?s(e):-1===u.findIndex((({id:t})=>t===e.id))?s(l?[e]:[...u,e]):h(e.id)()}),[l,h,s,u]),k=(0,S.useCallback)((e=>{const[t]=u.filter((t=>!e.find((e=>t.id===e.id))));h(t.id)()}),[h,u]);return(0,f.createElement)("div",{className:Q()("woocommerce-search-list",t,{"is-compact":r,"is-loading":n,"is-token":"token"===m})},"text"===m&&(0,f.createElement)(ce,{...e,onRemove:h,messages:w}),(0,f.createElement)("div",{className:"woocommerce-search-list__search"},"text"===m?(0,f.createElement)(G.TextControl,{label:w.search,type:"search",value:p,onChange:e=>_(e)}):(0,f.createElement)(G.FormTokenField,{disabled:n,label:w.search,onChange:k,onInputChange:e=>_(e),suggestions:[],__experimentalValidateInput:()=>!1,value:n?[(0,v.__)("Loading…","woocommerce")]:u.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),n?(0,f.createElement)("div",{className:"woocommerce-search-list__list"},(0,f.createElement)(G.Spinner,null)):(0,f.createElement)(se,{...e,search:p,filteredList:E,messages:w,onSelect:y,instanceId:g,useExpandedPanelId:b}))},ue=((0,G.withSpokenMessages)(ie),(0,n.getSetting)("attributes",[])),me=({isCompact:e,setAttributeId:t,attributeId:r})=>{const o={clear:(0,v.__)("Clear selected attribute","woocommerce"),list:(0,v.__)("Product Attributes","woocommerce"),noItems:(0,v.__)("Your store doesn't have any product attributes.","woocommerce"),search:(0,v.__)("Search for a product attribute:","woocommerce"),selected:e=>(0,v.sprintf)(/* translators: %d is the number of attributes selected. */ /* translators: %d is the number of attributes selected. */
(0,v._n)("%d attribute selected","%d attributes selected",e,"woocommerce"),e),updated:(0,v.__)("Product attribute search results updated.","woocommerce")},n=(0,R.DY)(ue.map((e=>({id:parseInt(e.attribute_id,10),name:e.attribute_label})))).asc("name");return(0,f.createElement)(ie,{className:"woocommerce-product-attributes",list:n,selected:n.filter((({id:e})=>e===r)),onChange:e=>{if(!e||!e.length)return;const o=e[0].id;ue.find((e=>e.attribute_id===o.toString()))&&r!==o&&t(o)},messages:o,isSingle:!0,isCompact:e})},de=(0,n.getSetting)("attributes",[]).reduce(((e,t)=>{const r=(o=t)&&o.attribute_name?{id:parseInt(o.attribute_id,10),name:o.attribute_name,taxonomy:"pa_"+o.attribute_name,label:o.attribute_label}:null;var o;return r&&r.id&&e.push(r),e}),[]),pe=({attributes:e,setAttributes:t})=>{const{attributeId:r,showCounts:o,queryType:n,displayStyle:l,selectType:a}=e;return(0,f.createElement)(k.InspectorControls,{key:"inspector"},(0,f.createElement)(G.PanelBody,{title:(0,v.__)("Display Settings","woocommerce")},(0,f.createElement)(G.ToggleControl,{label:(0,v.__)("Display product count","woocommerce"),checked:o,onChange:()=>t({showCounts:!o})}),(0,f.createElement)(G.__experimentalToggleGroupControl,{label:(0,v.__)("Allow selecting multiple options?","woocommerce"),value:a||"multiple",onChange:e=>t({selectType:e}),className:"wc-block-attribute-filter__multiple-toggle"},(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"multiple",label:(0,v.__)("Multiple","woocommerce")}),(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"single",label:(0,v.__)("Single","woocommerce")})),"multiple"===a&&(0,f.createElement)(G.__experimentalToggleGroupControl,{label:(0,v.__)("Filter Conditions","woocommerce"),help:"and"===n?(0,v.__)("Choose to return filter results for all of the attributes selected.","woocommerce"):(0,v.__)("Choose to return filter results for any of the attributes selected.","woocommerce"),value:n,onChange:e=>t({queryType:e}),className:"wc-block-attribute-filter__conditions-toggle"},(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"and",label:(0,v.__)("All","woocommerce")}),(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"or",label:(0,v.__)("Any","woocommerce")})),(0,f.createElement)(G.__experimentalToggleGroupControl,{label:(0,v.__)("Display Style","woocommerce"),value:l,onChange:e=>t({displayStyle:e}),className:"wc-block-attribute-filter__display-toggle"},(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"list",label:(0,v.__)("List","woocommerce")}),(0,f.createElement)(G.__experimentalToggleGroupControlOption,{value:"dropdown",label:(0,v.__)("Dropdown","woocommerce")}))),(0,f.createElement)(G.PanelBody,{title:(0,v.__)("Content Settings","woocommerce"),initialOpen:!1},(0,f.createElement)(me,{isCompact:!0,attributeId:r,setAttributes:t})))},_e=window.wc.blocksComponents;r(479);const be=({name:e,count:t})=>(0,f.createElement)(f.Fragment,null,e,null!==t&&Number.isFinite(t)&&(0,f.createElement)(_e.Label,{label:t.toString(),screenReaderLabel:(0,v.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,v._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}})),ge=({attributeTerms:e,showCounts:t})=>(0,f.createElement)(_e.CheckboxList,{className:"wc-block-attribute-filter style-list",onChange:()=>null,options:e.map((e=>({label:(0,f.createElement)(be,{name:e.name,count:t?e.count:null}),value:e.slug})))});var we=r(1394);r(9027);const Ee=({className:e,style:t,suggestions:r,multiple:o=!0,saveTransform:n=(e=>e.trim().replace(/\s/g,"-")),messages:l={},validateInput:a=(e=>r.includes(e)),label:c="",...s})=>(0,f.createElement)("div",{className:Q()("wc-blocks-components-form-token-field-wrapper",e,{"single-selection":!o}),style:t},(0,f.createElement)(we.Z,{label:c,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:a,saveTransform:n,maxLength:o?void 0:1,suggestions:r,messages:l,...s}));var he=r(7642);const ye=({label:e})=>(0,f.createElement)("div",{className:"wc-block-attribute-filter style-dropdown"},(0,f.createElement)(Ee,{suggestions:[],placeholder:(0,v.sprintf)(/* translators: %s attribute name. */ /* translators: %s attribute name. */
(0,v.__)("Select %s","woocommerce"),e),onChange:()=>null,value:[]}),(0,f.createElement)(B.Z,{icon:he.Z,size:30})),fe=(0,n.getSetting)("attributes",[]),ve=(0,G.withSpokenMessages)((e=>{const{attributes:t,setAttributes:r,debouncedSpeak:o}=e,{attributeId:n,queryParam:l,queryType:a,isPreview:c,displayStyle:s,showCounts:i}=t,u=function(e){if(e)return de.find((t=>t.id===e))}(n),[m,d]=(0,S.useState)(!n&&!c),[p,_]=(0,S.useState)([]),{results:b}=I({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==u?void 0:u.id)||0],shouldSelect:t.attributeId>0,query:{orderby:"menu_order"}}),{results:g}=(({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:n,isEditor:l=!1})=>{let a=q();a=`${a}-collection-data`;const[c]=F(a),[s,i]=L("calculate_attribute_counts",[],a),[u,m]=L("calculate_price_range",null,a),[d,p]=L("calculate_stock_status_counts",null,a),[_,b]=L("calculate_rating_counts",null,a),g=N(e||{}),w=N(t),E=N(r),h=N(o);(0,S.useEffect)((()=>{"object"==typeof g&&Object.keys(g).length&&(s.find((e=>A(g,"taxonomy")&&e.taxonomy===g.taxonomy))||i([...s,g]))}),[g,s,i]),(0,S.useEffect)((()=>{u!==w&&void 0!==w&&m(w)}),[w,m,u]),(0,S.useEffect)((()=>{d!==E&&void 0!==E&&p(E)}),[E,p,d]),(0,S.useEffect)((()=>{_!==h&&void 0!==h&&b(h)}),[h,b,_]);const[y,f]=(0,S.useState)(l),[v]=(0,P.Nr)(y,200);y||f(!0);const k=(0,S.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,R.DY)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]);return I({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...k},shouldSelect:v})})({queryAttribute:{taxonomy:(null==u?void 0:u.taxonomy)||"",queryType:t.queryType},queryState:{},isEditor:!0}),w=(0,k.useBlockProps)();(0,S.useEffect)((()=>{if(null==u||!u.taxonomy)return;const e={calculate_attribute_counts:{taxonomy:u.taxonomy,queryType:a}};A(l,"calculate_attribute_counts")&&A(l.calculate_attribute_counts,"taxonomy")&&A(l.calculate_attribute_counts,"queryType")&&l.calculate_attribute_counts.taxonomy===u.taxonomy&&l.calculate_attribute_counts.queryType===a||r({queryParam:e})}),[l,a,r,null==u?void 0:u.taxonomy]),(0,S.useEffect)((()=>{const e=A(g,"attribute_counts")&&(t=g.attribute_counts,Array.isArray(t)&&t.every((e=>"term"in e&&"count"in e)))?g.attribute_counts.map((e=>e.term)):[];var t;if(0===e.length)return _([]);_(b.filter((t=>e.includes(t.id))))}),[b,g]);const E=()=>(0,f.createElement)(k.BlockControls,null,(0,f.createElement)(G.ToolbarGroup,{controls:[{icon:"edit",title:(0,v.__)("Edit","woocommerce"),onClick:()=>d(!m),isActive:m}]})),h=({children:e})=>(0,f.createElement)("div",{...w},(0,f.createElement)(E,null),e);return 0===Object.keys(fe).length?(0,f.createElement)(h,null,(0,f.createElement)(Z,null)):m?(0,f.createElement)(h,null,(0,f.createElement)((()=>(0,f.createElement)($,null,(0,f.createElement)("div",{className:"wc-block-attribute-filter__selection"},(0,f.createElement)(me,{isCompact:!1,attributeId:n,setAttributeId:e=>r({attributeId:e})}),(0,f.createElement)(G.Button,{variant:"primary",onClick:()=>{d(!1),o((0,v.__)("Now displaying a preview of the Filter Products by Attribute block.","woocommerce"))}},(0,v.__)("Done","woocommerce"))))),null)):n&&u?0===p.length?(0,f.createElement)(h,null,(0,f.createElement)(G.Notice,{status:"warning",isDismissible:!1},(0,f.createElement)("p",null,(0,v.__)("There are no products with the selected attributes.","woocommerce")))):(0,f.createElement)(h,null,(0,f.createElement)(pe,{...e}),(0,f.createElement)(G.Disabled,null,"dropdown"===s?(0,f.createElement)(ye,{label:u.label||(0,v.__)("attribute","woocommerce")}):(0,f.createElement)(ge,{showCounts:i,attributeTerms:p})," ")):(0,f.createElement)(h,null,(0,f.createElement)(G.Notice,{status:"warning",isDismissible:!1},(0,f.createElement)("p",null,(0,v.__)("Please select an attribute to use this filter!","woocommerce"))))}));g>2&&(0,o.registerBlockType)(y,{edit:ve})},479:()=>{},9027:()=>{},4170:()=>{},9658:()=>{},1058:()=>{},9196:e=>{"use strict";e.exports=window.React},2819:e=>{"use strict";e.exports=window.lodash},5158:e=>{"use strict";e.exports=window.wp.a11y},4333:e=>{"use strict";e.exports=window.wp.compose},7180:e=>{"use strict";e.exports=window.wp.deprecated},5904:e=>{"use strict";e.exports=window.wp.dom},9307:e=>{"use strict";e.exports=window.wp.element},5736:e=>{"use strict";e.exports=window.wp.i18n},9127:e=>{"use strict";e.exports=window.wp.isShallowEqual},9630:e=>{"use strict";e.exports=window.wp.keycodes},444:e=>{"use strict";e.exports=window.wp.primitives},2560:e=>{"use strict";e.exports=window.wp.warning}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var l=r[e]={exports:{}};return t[e].call(l.exports,l,l.exports,o),l.exports}o.m=t,e=[],o.O=(t,r,n,l)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,n,l]=e[u],c=!0,s=0;s<r.length;s++)(!1&l||a>=l)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(c=!1,l<a&&(a=l));if(c){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,n,l]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=5025,(()=>{var e={5025:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,l,[a,c,s]=r,i=0;if(a.some((t=>0!==e[t]))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(s)var u=s(o)}for(t&&t(r);i<a.length;i++)l=a[i],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(u)},r=self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=o.O(void 0,[2869],(()=>o(2621)));n=o.O(n),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["collection-attribute-filter"]=n})();