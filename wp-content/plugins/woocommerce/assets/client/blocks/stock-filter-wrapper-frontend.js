(globalThis.webpackChunkwebpackWcBlocksFrontendJsonp=globalThis.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[660],{3434:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var o=s(7723),r=s(4656),n=(s(8502),s(790));const c=({name:e,count:t})=>(0,n.jsxs)(n.Fragment,{children:[e,null!==t&&Number.isFinite(t)&&(0,n.jsx)(r.Label,{label:t.toString(),screenReaderLabel:(0,o.sprintf)(/* translators: %s number of products. */ /* translators: %s number of products. */
(0,o._n)("%s product","%s products",t,"woocommerce"),t),wrapperElement:"span",wrapperProps:{className:"wc-filter-element-label-list-count"}})]})},3076:(e,t,s)=>{"use strict";s.d(t,{A:()=>r}),s(9300);var o=s(790);const r=({children:e})=>(0,o.jsx)("div",{className:"wc-block-filter-title-placeholder",children:e})},4559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var o=s(7723),r=s(4921),n=s(4656),c=(s(7165),s(790));const a=({className:e,
/* translators: Reset button text for filters. */
label:t=(0,o.__)("Reset","woocommerce"),onClick:s,screenReaderLabel:a=(0,o.__)("Reset filter","woocommerce")})=>(0,c.jsx)("button",{className:(0,r.A)("wc-block-components-filter-reset-button",e),onClick:s,children:(0,c.jsx)(n.Label,{label:t,screenReaderLabel:a})})},18:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var o=s(7723),r=s(4921),n=s(4656),c=(s(874),s(790));const a=({className:e,isLoading:t,disabled:s,
/* translators: Submit button text for filters. */
label:a=(0,o.__)("Apply","woocommerce"),onClick:l,screenReaderLabel:i=(0,o.__)("Apply filter","woocommerce")})=>(0,c.jsx)("button",{type:"submit",className:(0,r.A)("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":t},e),disabled:s,onClick:l,children:(0,c.jsx)(n.Label,{label:a,screenReaderLabel:i})})},4467:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var o=s(4642),r=s(4921),n=(s(4357),s(790));const c=({className:e,style:t,suggestions:s,multiple:c=!0,saveTransform:a=e=>e.trim().replace(/\s/g,"-"),messages:l={},validateInput:i=e=>s.includes(e),label:u="",...d})=>(0,n.jsx)("div",{className:(0,r.A)("wc-blocks-components-form-token-field-wrapper",e,{"single-selection":!c}),style:t,children:(0,n.jsx)(o.A,{label:u,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:i,saveTransform:a,maxLength:c?void 0:1,suggestions:s,messages:l,...d})})},5168:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var o=s(6087),r=s(4347),n=s(3993),c=s(9456),a=s(4556),l=s(9415),i=s(5479),u=s(2233);const d=({queryAttribute:e,queryTaxonomy:t,queryPrices:s,queryStock:d,queryRating:m,queryState:f,isEditor:g=!1})=>{let p=(0,u._)();p=`${p}-collection-data`;const[h]=(0,l.dJ)(p),[y,b]=(0,l.xd)("calculate_attribute_counts",[],p),[_,k]=(0,l.xd)("calculate_taxonomy_counts",[],p),[v,w]=(0,l.xd)("calculate_price_range",null,p),[x,S]=(0,l.xd)("calculate_stock_status_counts",null,p),[A,E]=(0,l.xd)("calculate_rating_counts",null,p),C=(0,a.c)(e||{}),j=(0,a.c)(t),N=(0,a.c)(s),L=(0,a.c)(d),R=(0,a.c)(m);(0,o.useEffect)((()=>{"object"==typeof C&&Object.keys(C).length&&(y.find((e=>(0,n.objectHasProp)(C,"taxonomy")&&e.taxonomy===C.taxonomy))||b([...y,C]))}),[C,y,b]),(0,o.useEffect)((()=>{j&&!_.includes(j)&&k([..._,j])}),[j,_,k]),(0,o.useEffect)((()=>{v!==N&&void 0!==N&&w(N)}),[N,w,v]),(0,o.useEffect)((()=>{x!==L&&void 0!==L&&S(L)}),[L,S,x]),(0,o.useEffect)((()=>{A!==R&&void 0!==R&&E(R)}),[R,E,A]);const[T,O]=(0,o.useState)(g),[F]=(0,r.d7)(T,200);T||O(!0);const P=(0,o.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,c.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),Array.isArray(e.calculate_taxonomy_counts)&&(t.calculate_taxonomy_counts=e.calculate_taxonomy_counts),t})(h)),[h]),{results:Q,isLoading:q}=(0,i.G)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...f,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...P},shouldSelect:F});return{data:Q,isLoading:q}}},5479:(e,t,s)=>{"use strict";s.d(t,{G:()=>i});var o=s(7594),r=s(7143),n=s(6087),c=s(4556),a=s(3578),l=s(3993);const i=e=>{const{namespace:t,resourceName:s,resourceValues:i=[],query:u={},shouldSelect:d=!0}=e;if(!t||!s)throw new Error("The options object must have valid values for the namespace and the resource properties.");const m=(0,n.useRef)({results:[],isLoading:!0}),f=(0,c.c)(u),g=(0,c.c)(i),p=(0,a.a)(),h=(0,r.useSelect)((e=>{if(!d)return null;const r=e(o.COLLECTIONS_STORE_KEY),n=[t,s,f,g],c=r.getCollectionError(...n);if(c){if(!(0,l.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");p(c)}return{results:r.getCollection(...n),isLoading:!r.hasFinishedResolution("getCollection",n)}}),[t,s,g,f,d,p]);return null!==h&&(m.current=h),m.current}},9415:(e,t,s)=>{"use strict";s.d(t,{dJ:()=>a,xd:()=>l});var o=s(7594),r=s(7143),n=s(6087),c=(s(923),s(2233));const a=e=>{const t=(0,c._)();e=e||t;const s=(0,r.useSelect)((t=>t(o.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:a}=(0,r.useDispatch)(o.QUERY_STATE_STORE_KEY);return[s,(0,n.useCallback)((t=>{a(e,t)}),[e,a])]},l=(e,t,s)=>{const a=(0,c._)();s=s||a;const l=(0,r.useSelect)((r=>r(o.QUERY_STATE_STORE_KEY).getValueForQueryKey(s,e,t)),[s,e]),{setQueryValue:i}=(0,r.useDispatch)(o.QUERY_STATE_STORE_KEY);return[l,(0,n.useCallback)((t=>{i(s,e,t)}),[s,e,i])]}},2233:(e,t,s)=>{"use strict";s.d(t,{_:()=>n});var o=s(6087);const r=(0,o.createContext)("page"),n=()=>(0,o.useContext)(r);r.Provider},9464:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var o=s(6087);function r(e,t){const s=(0,o.useRef)();return(0,o.useEffect)((()=>{s.current===e||t&&!t(e,s.current)||(s.current=e)}),[e,t]),s.current}},4556:(e,t,s)=>{"use strict";s.d(t,{c:()=>c});var o=s(6087),r=s(923),n=s.n(r);function c(e){const t=(0,o.useRef)(e);return n()(e,t.current)||(t.current=e),t.current}},41:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var o=s(4921),r=s(3993),n=s(7356),c=s(9786);function a(e={}){const t={};return(0,c.getCSSRules)(e,{selector:""}).forEach((e=>{t[e.key]=e.value})),t}function l(e,t){return e&&t?`has-${(0,n.c)(t)}-${e}`:""}const i=e=>{const t=(e=>{const t=(0,r.isObject)(e)?e:{style:{}};let s=t.style;return(0,r.isString)(s)&&(s=JSON.parse(s)||{}),(0,r.isObject)(s)||(s={}),{...t,style:s}})(e),s=function(e){const{backgroundColor:t,textColor:s,gradient:n,style:c}=e,i=l("background-color",t),u=l("color",s),d=function(e){if(e)return`has-${e}-gradient-background`}(n),m=d||c?.color?.gradient;return{className:(0,o.A)(u,d,{[i]:!m&&!!i,"has-text-color":s||c?.color?.text,"has-background":t||c?.color?.background||n||c?.color?.gradient,"has-link-color":(0,r.isObject)(c?.elements?.link)?c?.elements?.link?.color:void 0}),style:a({color:c?.color||{}})}}(t),n=function(e){const t=e.style?.border||{};return{className:function(e){const{borderColor:t,style:s}=e,r=t?l("border-color",t):"";return(0,o.A)({"has-border-color":!!t||!!s?.border?.color,[r]:!!r})}(e),style:a({border:t})}}(t),c=function(e){return{className:void 0,style:a({spacing:e.style?.spacing||{}})}}(t),i=(e=>{const t=(0,r.isObject)(e.style.typography)?e.style.typography:{},s=(0,r.isString)(t.fontFamily)?t.fontFamily:"";return{className:e.fontFamily?`has-${e.fontFamily}-font-family`:s,style:{fontSize:e.fontSize?`var(--wp--preset--font-size--${e.fontSize})`:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,textDecoration:t.textDecoration,textTransform:t.textTransform}}})(t);return{className:(0,o.A)(i.className,s.className,n.className,c.className),style:{...i.style,...s.style,...n.style,...c.style}}}},3578:(e,t,s)=>{"use strict";s.d(t,{a:()=>r});var o=s(6087);const r=()=>{const[,e]=(0,o.useState)();return(0,o.useCallback)((t=>{e((()=>{throw t}))}),[])}},3743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var o=s(4921),r=s(41),n=s(3993),c=s(7723),a=s(195),l=s(4530),i=s(2174),u=s(4556),d=s(9464),m=s(9415),f=s(5168),g=s(5703),p=s(6087),h=s(4656),y=s(18),b=s(4559),_=s(3076),k=s(3434),v=s(4467),w=s(923),x=s.n(w),S=s(8537),A=s(3832),E=s(5009),C=s(1340),j=s(790);const N=[{value:"preview-1",name:"In Stock",label:(0,j.jsx)(k.A,{name:"In Stock",count:3}),textLabel:"In Stock (3)"},{value:"preview-2",name:"Out of stock",label:(0,j.jsx)(k.A,{name:"Out of stock",count:3}),textLabel:"Out of stock (3)"},{value:"preview-3",name:"On backorder",label:(0,j.jsx)(k.A,{name:"On backorder",count:2}),textLabel:"On backorder (2)"}];s(8071);const L=JSON.parse('{"uK":{"F8":{"A":3},"Ox":{"A":"list"},"dc":{"A":"multiple"}}}'),R=e=>e.trim().replace(/\s/g,"").replace(/_/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9-]/g,"");var T=s(5179);const O=E.nD+"stock_status",F=({attributes:e,isEditor:t=!1})=>{const s=(0,T.LY)(),r=(0,g.getSettingWithCoercion)("isRenderingPhpTemplate",!1,n.isBoolean),[w,L]=(0,p.useState)(!1),{outofstock:F,...P}=(0,g.getSetting)("stockStatusOptions",{}),Q=(0,p.useRef)((0,g.getSetting)("hideOutOfStockItems",!1)?P:{outofstock:F,...P}),q=(0,p.useMemo)((()=>((e,t="filter_stock_status")=>{const s=(0,E.Vf)(t);if(!s)return[];const o=(0,n.isString)(s)?s.split(","):s,r=Object.keys(e);return o.filter((e=>r.includes(e)))})(Q.current,O)),[]),[I,B]=(0,p.useState)(q),[$,K]=(0,p.useState)(e.isPreview?N:[]),[Y]=(0,p.useState)(Object.entries(Q.current).map((([e,t])=>({slug:e,name:t}))).filter((e=>!!e.name)).sort(((e,t)=>e.slug.localeCompare(t.slug)))),[D]=(0,m.dJ)(),[H,V]=(0,m.xd)("stock_status",q),{data:z,isLoading:J}=(0,f.A)({queryStock:!0,queryState:D,isEditor:t}),W=(0,p.useCallback)((e=>(0,n.objectHasProp)(z,"stock_status_counts")&&Array.isArray(z.stock_status_counts)?z.stock_status_counts.find((({status:t,count:s})=>t===e&&0!==Number(s))):null),[z]),[M,U]=(0,p.useState)((0,C.I)());(0,p.useEffect)((()=>{if(J||e.isPreview)return;const t=Y.map((t=>{const s=W(t.slug);if(!(s||I.includes(t.slug)||(o=t.slug,D?.stock_status&&D.stock_status.some((({status:e=[]})=>e.includes(o))))))return null;var o;const r=s?Number(s.count):0;return{value:t.slug,name:(0,S.decodeEntities)(t.name),label:(0,j.jsx)(k.A,{name:(0,S.decodeEntities)(t.name),count:e.showCounts?r:null}),textLabel:e.showCounts?`${(0,S.decodeEntities)(t.name)} (${r})`:(0,S.decodeEntities)(t.name)}})).filter((e=>!!e));K(t),U((0,C.I)())}),[e.showCounts,e.isPreview,J,W,I,D.stock_status,Y]);const Z="single"!==e.selectType,G=(0,p.useCallback)((e=>{t||(e&&!r&&V(e),(e=>{if(!window)return;if(0===e.length){const e=(0,A.removeQueryArgs)(window.location.href,O);return void(e!==(0,E.Q)(window.location.href)&&(0,E.CH)(e))}const t=(0,A.addQueryArgs)(window.location.href,{[O]:e.join(",")});t!==(0,E.Q)(window.location.href)&&(0,E.CH)(t)})(e))}),[t,V,r]);(0,p.useEffect)((()=>{e.showFilterButton||G(I)}),[e.showFilterButton,I,G]);const X=(0,p.useMemo)((()=>H),[H]),ee=(0,u.c)(X),te=(0,d.Z)(ee);(0,p.useEffect)((()=>{x()(te,ee)||x()(I,ee)||B(ee)}),[I,ee,te]),(0,p.useEffect)((()=>{w||(V(q),L(!0))}),[V,w,L,q]);const se=(0,p.useCallback)((e=>{const t=e=>{const t=$.find((t=>t.value===e));return t?t.name:null},s=({filterAdded:e,filterRemoved:s})=>{const o=e?t(e):null,r=s?t(s):null;o?(0,a.speak)((0,c.sprintf)(/* translators: %s stock statuses (for example: 'instock'...) */ /* translators: %s stock statuses (for example: 'instock'...) */
(0,c.__)("%s filter added.","woocommerce"),o)):r&&(0,a.speak)((0,c.sprintf)(/* translators: %s stock statuses (for example:'instock'...) */ /* translators: %s stock statuses (for example:'instock'...) */
(0,c.__)("%s filter removed.","woocommerce"),r))},o=I.includes(e);if(!Z){const t=o?[]:[e];return s(o?{filterRemoved:e}:{filterAdded:e}),void B(t)}if(o){const t=I.filter((t=>t!==e));return s({filterRemoved:e}),void B(t)}const r=[...I,e].sort();s({filterAdded:e}),B(r)}),[I,Z,$]);if(!J&&0===$.length)return s(!1),null;const oe=`h${e.headingLevel}`,re=!e.isPreview&&!Q.current||0===$.length,ne=!e.isPreview&&J;if(!(0,g.getSettingWithCoercion)("hasFilterableProducts",!1,n.isBoolean))return s(!1),null;const ce=Z?!re&&I.length<$.length:!re&&0===I.length,ae=(0,j.jsx)(oe,{className:"wc-block-stock-filter__title",children:e.heading}),le=re?(0,j.jsx)(_.A,{children:ae}):ae;return s(!0),(0,j.jsxs)(j.Fragment,{children:[!t&&e.heading&&le,(0,j.jsx)("div",{className:(0,o.A)("wc-block-stock-filter",`style-${e.displayStyle}`,{"is-loading":re}),children:"dropdown"===e.displayStyle?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(v.A,{className:(0,o.A)({"single-selection":!Z,"is-loading":re}),suggestions:$.filter((e=>!I.includes(e.value))).map((e=>e.value)),disabled:re,placeholder:(0,c.__)("Select stock status","woocommerce"),onChange:e=>{!Z&&e.length>1&&(e=e.slice(-1));const t=[e=e.map((e=>{const t=$.find((t=>t.value===e));return t?t.value:e})),I].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));if(1===t.length)return se(t[0]);const s=[I,e].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));1===s.length&&se(s[0])},value:I,displayTransform:e=>{const t=$.find((t=>t.value===e));return t?t.textLabel:e},saveTransform:R,messages:{added:(0,c.__)("Stock filter added.","woocommerce"),removed:(0,c.__)("Stock filter removed.","woocommerce"),remove:(0,c.__)("Remove stock filter.","woocommerce"),__experimentalInvalid:(0,c.__)("Invalid stock filter.","woocommerce")}},M),ce&&(0,j.jsx)(l.A,{icon:i.A,size:30})]}):(0,j.jsx)(h.CheckboxList,{className:"wc-block-stock-filter-list",options:$,checked:I,onChange:se,isLoading:re,isDisabled:ne})}),(0,j.jsxs)("div",{className:"wc-block-stock-filter__actions",children:[(I.length>0||t)&&!re&&(0,j.jsx)(b.A,{onClick:()=>{B([]),G([])},screenReaderLabel:(0,c.__)("Reset stock filter","woocommerce")}),e.showFilterButton&&(0,j.jsx)(y.A,{className:"wc-block-stock-filter__button",isLoading:re,disabled:re||ne,onClick:()=>G(I),screenReaderLabel:(0,c.__)("Apply stock filter","woocommerce")})]})]})},P=e=>{const t=(0,r.p)(e),s=(c=e,{heading:(0,n.isString)(c?.heading)?c.heading:"",headingLevel:(0,n.isString)(c?.headingLevel)&&parseInt(c.headingLevel,10)||L.uK.F8.A,showFilterButton:"true"===c?.showFilterButton,showCounts:"true"===c?.showCounts,isPreview:!1,displayStyle:(0,n.isString)(c?.displayStyle)&&c.displayStyle||L.uK.Ox.A,selectType:(0,n.isString)(c?.selectType)&&c.selectType||L.uK.dc.A});var c;return(0,j.jsx)("div",{className:(0,o.A)((0,n.isString)(e.className)?e.className:"",t.className),style:t.style,children:(0,j.jsx)(F,{isEditor:!1,attributes:s})})}},5009:(e,t,s)=>{"use strict";s.d(t,{CH:()=>u,Q:()=>d,Vf:()=>i,nD:()=>l,xB:()=>a});var o=s(3832),r=s(5703),n=s(3993);const c=(0,r.getSettingWithCoercion)("isRenderingPhpTemplate",!1,n.isBoolean),a="query_type_",l="filter_";function i(e){return window?(0,o.getQueryArg)(window.location.href,e):null}function u(e){if(c){const t=new URL(e);t.pathname=t.pathname.replace(/\/page\/[0-9]+/i,""),t.searchParams.delete("paged"),t.searchParams.forEach(((e,s)=>{s.match(/^query(?:-[0-9]+)?-page$/)&&t.searchParams.delete(s)})),window.location.href=t.href}else window.history.replaceState({},"",e)}const d=e=>{const t=(0,o.getQueryArgs)(e);return(0,o.addQueryArgs)(e,t)}},1340:(e,t,s)=>{"use strict";function o(){return Math.floor(Math.random()*Date.now())}s.d(t,{I:()=>o})},8502:()=>{},9300:()=>{},7165:()=>{},874:()=>{},4357:()=>{},8071:()=>{}}]);