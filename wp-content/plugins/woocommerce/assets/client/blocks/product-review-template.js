(()=>{var e,t,o,r={5047:(e,t,o)=>{"use strict";const r=window.wp.blocks;var n=o(5534);const s=JSON.parse('{"UU":"woocommerce/product-review-template"}');var c=o(6087);const i=window.wp.data;var m=o(7723);const a=window.wp.components,l=window.wp.coreData,d=window.wp.blockEditor,p=window.wp.url,u=window.wp.apiFetch;var w=o.n(u),v=o(790);const f=[["core/avatar"],["woocommerce/product-review-author-name"],["woocommerce/product-review-date"],["woocommerce/product-review-content"]],g=(0,c.memo)((({blocks:e,commentId:t,setActiveCommentId:o,isHidden:r})=>{const n=(0,d.__experimentalUseBlockPreview)({blocks:e}),s=()=>{o(t)},c={display:r?"none":void 0};return(0,v.jsx)("div",{...n,tabIndex:0,role:"button",style:c,onClick:s,onKeyDown:s})})),b=(0,c.memo)((function({comment:e,activeCommentId:t,setActiveCommentId:o,firstCommentId:r,blocks:n}){const{children:s,...c}=(0,d.useInnerBlocksProps)({},{template:f});return(0,v.jsxs)("li",{...c,children:[e.commentId===(t||r)?s:null,(0,v.jsx)(g,{blocks:n,commentId:e.commentId,setActiveCommentId:o,isHidden:e.commentId===(t||r)})]})}));o(9951),(0,r.registerBlockType)(s.UU,{icon:n.A,edit:function({clientId:e,context:{postId:t}}){const o=(0,d.useBlockProps)(),[r,n]=(0,c.useState)(0),{commentOrder:s,commentsPerPage:u,pageComments:f}=(0,i.useSelect)((e=>{const{getSettings:t}=e(d.store);return t().__experimentalDiscussionSettings}),[]),g=(({postId:e})=>{const t=(0,c.useMemo)((()=>({status:"approve",order:"asc",context:"embed",parent:0,type:"review"})),[]),{pageComments:o,commentsPerPage:r,defaultCommentsPage:n}=(0,i.useSelect)((e=>{const{getSettings:t}=e(d.store),{__experimentalDiscussionSettings:o}=t();return o}),[]),s=o?Math.min(r,100):100,m=(({defaultPage:e,postId:t,perPage:o,queryArgs:r})=>{const[n,s]=(0,c.useState)({}),i=`${t}_${o}`,m=n[i]||0;return(0,c.useEffect)((()=>{m||"newest"!==e||w()({path:(0,p.addQueryArgs)("/wp/v2/comments",{...r,post:t,per_page:o,_fields:"id"}),method:"HEAD",parse:!1}).then((e=>{const t=parseInt(e.headers.get("X-WP-TotalPages")||"1",10);s({...n,[i]:t<=1?1:t})})).catch((()=>{s({...n,[i]:1})}))}),[e,t,o,s,m,r,n,i]),"newest"===e?m:1})({defaultPage:n,postId:e,perPage:s,queryArgs:t});return(0,c.useMemo)((()=>m?{...t,post:e,per_page:s,page:m}:null),[m,t,e,s])})({postId:null!=t?t:0}),{topLevelComments:h,blocks:I}=(0,i.useSelect)((t=>{const{getEntityRecords:o}=t(l.store),{getBlocks:r}=t(d.store);return{topLevelComments:g?o("root","comment",g):null,blocks:r(e)}}),[e,g]);let k=(e=>(0,c.useMemo)((()=>e?.map((({id:e})=>({commentId:e})))),[e]))("desc"===s&&h?[...h].reverse():h);return h?(t||(k=(({perPage:e,pageComments:t})=>{const o=t?Math.min(e,3):3;return Array.from({length:o},((e,t)=>({commentId:-(t+1)})))})({perPage:u,pageComments:f})),k.length?(0,v.jsx)("ol",{...o,children:k&&k.map((({commentId:e},t)=>(0,v.jsx)(d.BlockContextProvider,{value:{commentId:e<0?null:e},children:(0,v.jsx)(b,{comment:{commentId:e},activeCommentId:r,setActiveCommentId:n,blocks:I,firstCommentId:k[0]?.commentId})},e||t)))}):(0,v.jsx)("p",{...o,children:(0,m.__)("No results found.","woocommerce")})):(0,v.jsx)("p",{...o,children:(0,v.jsx)(a.Spinner,{})})},save:function(){return(0,v.jsx)(d.InnerBlocks.Content,{})}})},9951:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,s),o.exports}s.m=r,e=[],s.O=(t,o,r,n)=>{if(!o){var c=1/0;for(l=0;l<e.length;l++){for(var[o,r,n]=e[l],i=!0,m=0;m<o.length;m++)(!1&n||c>=n)&&Object.keys(s.O).every((e=>s.O[e](o[m])))?o.splice(m--,1):(i=!1,n<c&&(c=n));if(i){e.splice(l--,1);var a=r();void 0!==a&&(t=a)}}return t}n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[o,r,n]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var c={};t=t||[null,o({}),o([]),o(o)];for(var i=2&r&&e;"object"==typeof i&&!~t.indexOf(i);i=o(i))Object.getOwnPropertyNames(i).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,s.d(n,c),n},s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=6732,(()=>{var e={6732:0};s.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[c,i,m]=o,a=0;if(c.some((t=>0!==e[t]))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(m)var l=m(s)}for(t&&t(o);a<c.length;a++)n=c[a],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(l)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=s.O(void 0,[94],(()=>s(5047)));c=s.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-review-template"]=c})();