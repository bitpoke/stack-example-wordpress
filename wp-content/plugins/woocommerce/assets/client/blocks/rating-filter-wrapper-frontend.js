(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[9206],{390:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(9196),o=r(5736),s=r(7608),l=r.n(s),a=r(711);r(2728);const c=({className:e,
/* translators: Reset button text for filters. */
label:t=(0,o.__)("Reset","woocommerce"),onClick:r,screenReaderLabel:s=(0,o.__)("Reset filter","woocommerce")})=>(0,n.createElement)("button",{className:l()("wc-block-components-filter-reset-button",e),onClick:r},(0,n.createElement)(a.Label,{label:t,screenReaderLabel:s}))},6977:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(9196),o=r(5736),s=r(7608),l=r.n(s),a=r(711);r(6099);const c=({className:e,isLoading:t,disabled:r,
/* translators: Submit button text for filters. */
label:s=(0,o.__)("Apply","woocommerce"),onClick:c,screenReaderLabel:i=(0,o.__)("Apply filter","woocommerce")})=>(0,n.createElement)("button",{type:"submit",className:l()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":t},e),disabled:r,onClick:c},(0,n.createElement)(a.Label,{label:s,screenReaderLabel:i}))},2045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9196),o=r(1394),s=r(7608),l=r.n(s);r(9027);const a=({className:e,style:t,suggestions:r,multiple:s=!0,saveTransform:a=(e=>e.trim().replace(/\s/g,"-")),messages:c={},validateInput:i=(e=>r.includes(e)),label:u="",...d})=>(0,n.createElement)("div",{className:l()("wc-blocks-components-form-token-field-wrapper",e,{"single-selection":!s}),style:t},(0,n.createElement)(o.Z,{label:u,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__experimentalValidateInput:i,saveTransform:a,maxLength:s?void 0:1,suggestions:r,messages:c,...d}))},6621:(e,t,r)=>{"use strict";r.d(t,{d:()=>d});var n=r(9307),o=r(2600),s=r(6946),l=r(4167),a=r(9530),c=r(2785),i=r(1720),u=r(7218);const d=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:d,queryState:m,isEditor:g=!1})=>{let f=(0,u.s)();f=`${f}-collection-data`;const[p]=(0,c.$p)(f),[v,y]=(0,c.kX)("calculate_attribute_counts",[],f),[b,_]=(0,c.kX)("calculate_price_range",null,f),[h,w]=(0,c.kX)("calculate_stock_status_counts",null,f),[E,k]=(0,c.kX)("calculate_rating_counts",null,f),S=(0,a.s)(e||{}),C=(0,a.s)(t),N=(0,a.s)(r),R=(0,a.s)(d);(0,n.useEffect)((()=>{"object"==typeof S&&Object.keys(S).length&&(v.find((e=>(0,s.objectHasProp)(S,"taxonomy")&&e.taxonomy===S.taxonomy))||y([...v,S]))}),[S,v,y]),(0,n.useEffect)((()=>{b!==C&&void 0!==C&&_(C)}),[C,_,b]),(0,n.useEffect)((()=>{h!==N&&void 0!==N&&w(N)}),[N,w,h]),(0,n.useEffect)((()=>{E!==R&&void 0!==R&&k(R)}),[R,k,E]);const[T,P]=(0,n.useState)(g),[x]=(0,o.Nr)(T,200);T||P(!0);const F=(0,n.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,l.DY)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(p)),[p]);return(0,i.K)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...m,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...F},shouldSelect:x})}},1720:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(4801),o=r(9818),s=r(9307),l=r(9530),a=r(5280),c=r(6946);const i=e=>{const{namespace:t,resourceName:r,resourceValues:i=[],query:u={},shouldSelect:d=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const m=(0,s.useRef)({results:[],isLoading:!0}),g=(0,l.s)(u),f=(0,l.s)(i),p=(0,a._)(),v=(0,o.useSelect)((e=>{if(!d)return null;const o=e(n.COLLECTIONS_STORE_KEY),s=[t,r,g,f],l=o.getCollectionError(...s);if(l){if(!(0,c.isError)(l))throw new Error("TypeError: `error` object is not an instance of Error constructor");p(l)}return{results:o.getCollection(...s),isLoading:!o.hasFinishedResolution("getCollection",s)}}),[t,r,f,g,d]);return null!==v&&(m.current=v),m.current}},2785:(e,t,r)=>{"use strict";r.d(t,{$p:()=>a,kX:()=>c});var n=r(4801),o=r(9818),s=r(9307),l=(r(9127),r(7218));const a=e=>{const t=(0,l.s)();e=e||t;const r=(0,o.useSelect)((t=>t(n.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:a}=(0,o.useDispatch)(n.QUERY_STATE_STORE_KEY);return[r,(0,s.useCallback)((t=>{a(e,t)}),[e,a])]},c=(e,t,r)=>{const a=(0,l.s)();r=r||a;const c=(0,o.useSelect)((o=>o(n.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:i}=(0,o.useDispatch)(n.QUERY_STATE_STORE_KEY);return[c,(0,s.useCallback)((t=>{i(r,e,t)}),[r,e,i])]}},7218:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(9307);const o=(0,n.createContext)("page"),s=()=>(0,n.useContext)(o);o.Provider},8161:(e,t,r)=>{"use strict";r.d(t,{D:()=>o});var n=r(9307);function o(e,t){const r=(0,n.useRef)();return(0,n.useEffect)((()=>{r.current===e||t&&!t(e,r.current)||(r.current=e)}),[e,t]),r.current}},9530:(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var n=r(9307),o=r(9127),s=r.n(o);function l(e){const t=(0,n.useRef)(e);return s()(e,t.current)||(t.current=e),t.current}},947:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var n=r(7608),o=r.n(n),s=r(6946),l=r(3392),a=r(172);const c=e=>{const t=(e=>{const t=(0,s.isObject)(e)?e:{style:{}};let r=t.style;return(0,s.isString)(r)&&(r=JSON.parse(r)||{}),(0,s.isObject)(r)||(r={}),{...t,style:r}})(e),r=(0,a.vc)(t),n=(0,a.l8)(t),c=(0,a.su)(t),i=(0,l.f)(t);return{className:o()(i.className,r.className,n.className,c.className),style:{...i.style,...r.style,...n.style,...c.style}}}},5280:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(9307);const o=()=>{const[,e]=(0,n.useState)();return(0,n.useCallback)((t=>{e((()=>{throw t}))}),[])}},3392:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var n=r(6946);const o=e=>{const t=(0,n.isObject)(e.style.typography)?e.style.typography:{},r=(0,n.isString)(t.fontFamily)?t.fontFamily:"";return{className:e.fontFamily?`has-${e.fontFamily}-font-family`:r,style:{fontSize:e.fontSize?`var(--wp--preset--font-size--${e.fontSize})`:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,textDecoration:t.textDecoration,textTransform:t.textTransform}}}},172:(e,t,r)=>{"use strict";r.d(t,{l8:()=>d,su:()=>m,vc:()=>u});var n=r(7608),o=r.n(n),s=r(7427),l=r(2289),a=r(6946);function c(e={}){const t={};return(0,l.getCSSRules)(e,{selector:""}).forEach((e=>{t[e.key]=e.value})),t}function i(e,t){return e&&t?`has-${(0,s.o)(t)}-${e}`:""}function u(e){var t,r,n,s,l,u,d;const{backgroundColor:m,textColor:g,gradient:f,style:p}=e,v=i("background-color",m),y=i("color",g),b=function(e){if(e)return`has-${e}-gradient-background`}(f),_=b||(null==p||null===(t=p.color)||void 0===t?void 0:t.gradient);return{className:o()(y,b,{[v]:!_&&!!v,"has-text-color":g||(null==p||null===(r=p.color)||void 0===r?void 0:r.text),"has-background":m||(null==p||null===(n=p.color)||void 0===n?void 0:n.background)||f||(null==p||null===(s=p.color)||void 0===s?void 0:s.gradient),"has-link-color":(0,a.isObject)(null==p||null===(l=p.elements)||void 0===l?void 0:l.link)?null==p||null===(u=p.elements)||void 0===u||null===(d=u.link)||void 0===d?void 0:d.color:void 0}),style:c({color:(null==p?void 0:p.color)||{}})}}function d(e){var t;const r=(null===(t=e.style)||void 0===t?void 0:t.border)||{};return{className:function(e){var t;const{borderColor:r,style:n}=e,s=r?i("border-color",r):"";return o()({"has-border-color":!!r||!(null==n||null===(t=n.border)||void 0===t||!t.color),[s]:!!s})}(e),style:c({border:r})}}function m(e){var t;return{className:void 0,style:c({spacing:(null===(t=e.style)||void 0===t?void 0:t.spacing)||{}})}}},489:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var n=r(9196),o=r(7608),s=r.n(o),l=r(947),a=r(6946),c=r(5736),i=r(5158),u=r(2911),d=r(7642);r(2198);const m=({className:e,rating:t,ratedProductsCount:r})=>{const o=s()("wc-block-components-product-rating",e),l={width:t/5*100+"%"},a=(0,c.sprintf)(/* translators: %f is referring to the average rating value */ /* translators: %f is referring to the average rating value */
(0,c.__)("Rated %f out of 5","woocommerce"),t),i={__html:(0,c.sprintf)(/* translators: %s is the rating value wrapped in HTML strong tags. */ /* translators: %s is the rating value wrapped in HTML strong tags. */
(0,c.__)("Rated %s out of 5","woocommerce"),(0,c.sprintf)('<strong class="rating">%f</strong>',t))};return(0,n.createElement)("div",{className:o},(0,n.createElement)("div",{className:"wc-block-components-product-rating__stars",role:"img","aria-label":a},(0,n.createElement)("span",{style:l,dangerouslySetInnerHTML:i})),null!==r?(0,n.createElement)("span",{className:"wc-block-components-product-rating-count"},"(",r,")"):null)};var g=r(9530),f=r(8161),p=r(2785),v=r(6621),y=r(4617),b=r(9127),_=r.n(b),h=r(9307),w=r(711),E=r(6977),k=r(390),S=r(2045),C=r(6483),N=r(4534);const R=[{label:(0,n.createElement)(m,{key:5,rating:5,ratedProductsCount:null}),value:"5"},{label:(0,n.createElement)(m,{key:4,rating:4,ratedProductsCount:null}),value:"4"},{label:(0,n.createElement)(m,{key:3,rating:3,ratedProductsCount:null}),value:"3"},{label:(0,n.createElement)(m,{key:2,rating:2,ratedProductsCount:null}),value:"2"},{label:(0,n.createElement)(m,{key:1,rating:1,ratedProductsCount:null}),value:"1"}];r(8409);const T=JSON.parse('{"Y4":{"PW":{"Z":"list"},"lr":{"Z":"multiple"}}}');function P(){return Math.floor(Math.random()*Date.now())}const x=e=>e.trim().replace(/\s/g,"-").replace(/_/g,"-").replace(/-+/g,"-").replace(/[^a-zA-Z0-9-]/g,"");var F=r(9389);const L="rating_filter",A=e=>(0,c.sprintf)(/* translators: %s is referring to the average rating value */ /* translators: %s is referring to the average rating value */
(0,c.__)("Rated %s out of 5 filter added.","woocommerce"),e),O=e=>(0,c.sprintf)(/* translators: %s is referring to the average rating value */ /* translators: %s is referring to the average rating value */
(0,c.__)("Rated %s out of 5 filter added.","woocommerce"),e),j=({attributes:e,isEditor:t,noRatingsNotice:r=null})=>{const o=(0,F.Ah)(),l=(0,y.getSettingWithCoercion)("isRenderingPhpTemplate",!1,a.isBoolean),[b,T]=(0,h.useState)(!1),[j]=(0,p.$p)(),{results:q,isLoading:Z}=(0,v.d)({queryRating:!0,queryState:j,isEditor:t}),[Q,Y]=(0,h.useState)(e.isPreview?R:[]),$=!e.isPreview&&Z&&0===Q.length,B=!e.isPreview&&Z,D=(0,h.useMemo)((()=>((e="filter_rating")=>{const t=(0,N.re)(e);return t?(0,a.isString)(t)?t.split(","):t:[]})("rating_filter")),[]),[H,W]=(0,h.useState)(D),[X,z]=(0,p.kX)("rating",D),[K,I]=(0,h.useState)(P()),[M,V]=(0,h.useState)(!1),U="single"!==e.selectType,J=U?!$&&H.length<Q.length:!$&&0===H.length,G=(0,h.useCallback)((e=>{t||(e&&!l&&z(e),(e=>{if(!window)return;if(0===e.length){const e=(0,C.removeQueryArgs)(window.location.href,L);return void(e!==(0,N.H9)(window.location.href)&&(0,N.X7)(e))}const t=(0,C.addQueryArgs)(window.location.href,{[L]:e.join(",")});t!==(0,N.H9)(window.location.href)&&(0,N.X7)(t)})(e))}),[t,z,l]);(0,h.useEffect)((()=>{e.showFilterButton||G(H)}),[e.showFilterButton,H,G]);const ee=(0,h.useMemo)((()=>X),[X]),te=(0,g.s)(ee),re=(0,f.D)(te);(0,h.useEffect)((()=>{_()(re,te)||_()(H,te)||W(te)}),[H,te,re]),(0,h.useEffect)((()=>{b||(z(D),T(!0))}),[z,b,T,D]),(0,h.useEffect)((()=>{if(Z||e.isPreview)return;const r=!Z&&(0,a.objectHasProp)(q,"rating_counts")&&Array.isArray(q.rating_counts)?[...q.rating_counts].reverse():[];if(t&&0===r.length)return Y(R),void V(!0);const o=r.filter((e=>(0,a.isObject)(e)&&Object.keys(e).length>0)).map((t=>{var r;return{label:(0,n.createElement)(m,{key:null==t?void 0:t.rating,rating:null==t?void 0:t.rating,ratedProductsCount:e.showCounts?null==t?void 0:t.count:null}),value:null==t||null===(r=t.rating)||void 0===r?void 0:r.toString()}}));Y(o),I(P())}),[e.showCounts,e.isPreview,q,Z,X,t]);const ne=(0,h.useCallback)((e=>{const t=H.includes(e);if(!U){const r=t?[]:[e];return(0,i.speak)(t?O(e):A(e)),void W(r)}if(t){const t=H.filter((t=>t!==e));return(0,i.speak)(O(e)),void W(t)}const r=[...H,e].sort(((e,t)=>Number(t)-Number(e)));(0,i.speak)(A(e)),W(r)}),[H,U]);return(Z||0!==Q.length)&&(0,y.getSettingWithCoercion)("hasFilterableProducts",!1,a.isBoolean)?(o(!0),(0,n.createElement)(n.Fragment,null,M&&r,(0,n.createElement)("div",{className:s()("wc-block-rating-filter",`style-${e.displayStyle}`,{"is-loading":$})},"dropdown"===e.displayStyle?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(S.Z,{key:K,className:s()({"single-selection":!U,"is-loading":$}),style:{borderStyle:"none"},suggestions:Q.filter((e=>!H.includes(e.value))).map((e=>e.value)),disabled:$,placeholder:(0,c.__)("Select Rating","woocommerce"),onChange:e=>{!U&&e.length>1&&(e=[e[e.length-1]]);const t=[e=e.map((e=>{const t=Q.find((t=>t.value===e));return t?t.value:e})),H].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));if(1===t.length)return ne(t[0]);const r=[H,e].reduce(((e,t)=>e.filter((e=>!t.includes(e)))));1===r.length&&ne(r[0])},value:H,displayTransform:e=>{const t={value:e,label:(0,n.createElement)(m,{key:Number(e),rating:Number(e),ratedProductsCount:0})},r=Q.find((t=>t.value===e))||t,{label:o,value:s}=r;return Object.assign({},o,{toLocaleLowerCase:()=>s,substring:(e,t)=>0===e&&1===t?o:""})},saveTransform:x,messages:{added:(0,c.__)("Rating filter added.","woocommerce"),removed:(0,c.__)("Rating filter removed.","woocommerce"),remove:(0,c.__)("Remove rating filter.","woocommerce"),__experimentalInvalid:(0,c.__)("Invalid rating filter.","woocommerce")}}),J&&(0,n.createElement)(u.Z,{icon:d.Z,size:30})):(0,n.createElement)(w.CheckboxList,{className:"wc-block-rating-filter-list",options:Q,checked:H,onChange:e=>{ne(e.toString())},isLoading:$,isDisabled:B})),(0,n.createElement)("div",{className:"wc-block-rating-filter__actions"},(H.length>0||t)&&!$&&(0,n.createElement)(k.Z,{onClick:()=>{W([]),z([]),G([])},screenReaderLabel:(0,c.__)("Reset rating filter","woocommerce")}),e.showFilterButton&&(0,n.createElement)(E.Z,{className:"wc-block-rating-filter__button",isLoading:$,disabled:$||B,onClick:()=>G(H)})))):(o(!1),null)},q=e=>{const t=(0,l.F)(e),r={showFilterButton:"true"===(null==(o=e)?void 0:o.showFilterButton),showCounts:"true"===(null==o?void 0:o.showCounts),isPreview:!1,displayStyle:(0,a.isString)(null==o?void 0:o.displayStyle)&&o.displayStyle||T.Y4.PW.Z,selectType:(0,a.isString)(null==o?void 0:o.selectType)&&o.selectType||T.Y4.lr.Z};var o;return(0,n.createElement)("div",{className:s()((0,a.isString)(e.className)?e.className:"",t.className),style:t.style},(0,n.createElement)(j,{isEditor:!1,attributes:r}))}},4534:(e,t,r)=>{"use strict";r.d(t,{H9:()=>d,X7:()=>u,re:()=>i,w8:()=>c,zv:()=>a});var n=r(6483),o=r(4617),s=r(6946);const l=(0,o.getSettingWithCoercion)("isRenderingPhpTemplate",!1,s.isBoolean),a="query_type_",c="filter_";function i(e){return window?(0,n.getQueryArg)(window.location.href,e):null}function u(e){if(l){const t=new URL(e);t.pathname=t.pathname.replace(/\/page\/[0-9]+/i,""),t.searchParams.delete("paged"),t.searchParams.forEach(((e,r)=>{r.match(/^query(?:-[0-9]+)?-page$/)&&t.searchParams.delete(r)})),window.location.href=t.href}else window.history.replaceState({},"",e)}const d=e=>{const t=(0,n.getQueryArgs)(e);return(0,n.addQueryArgs)(e,t)}},2728:()=>{},6099:()=>{},9027:()=>{},2198:()=>{},8409:()=>{}}]);