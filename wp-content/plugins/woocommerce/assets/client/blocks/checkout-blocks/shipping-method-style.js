"use strict";(self.webpackChunkwebpackWcBlocksStylingJsonp=self.webpackChunkwebpackWcBlocksStylingJsonp||[]).push([[9319],{11732:(e,r,o)=>{o.r(r),o.d(r,{default:()=>Z});var t={};o.r(t),o.d(t,{clearAllValidationErrors:()=>K,clearValidationError:()=>W,clearValidationErrors:()=>H,hideValidationError:()=>F,setValidationErrors:()=>D,showAllValidationErrors:()=>q,showValidationError:()=>j});var i={};o.r(i),o.d(i,{getValidationError:()=>B,getValidationErrorId:()=>J,hasValidationErrors:()=>Y});var s=o(51609),c=o(70851),n=o(41616),a=o(14656),l=o(47143),p=o(47594),h=o(65606),d=o(62516),g=o(33588),m=o(27723),u=o(7104),k=o(63705),E=o(11176),_=o(86087),w=o(63835),R=o(15703),A=o(78165),O=o(21985),v=o(39656),C=o(70534);o(93832);var b=o(20923),S=o.n(b),V=o(73993);const T="SET_VALIDATION_ERRORS",y="CLEAR_VALIDATION_ERROR",I="CLEAR_VALIDATION_ERRORS",P="HIDE_VALIDATION_ERROR",x="SHOW_VALIDATION_ERROR",N="SHOW_ALL_VALIDATION_ERRORS";var f=o(64040),L=o.n(f);const D=e=>({type:T,errors:e}),H=e=>({type:I,errors:e}),K=()=>(L()("clearAllValidationErrors",{version:"9.0.0",alternative:"clearValidationErrors",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/7601",hint:"Calling `clearValidationErrors` with no arguments will clear all validation errors."}),H()),W=e=>({type:y,error:e}),F=e=>({type:P,error:e}),j=e=>({type:x,error:e}),q=()=>({type:N}),B=(e,r)=>e[r],J=(e,r)=>{if(e.hasOwnProperty(r)&&!e[r].hidden)return`validate-error-${r}`},Y=e=>Object.keys(e).length>0,$={reducer:(e={},r)=>{const o={...e};switch(r.type){case T:return r.errors&&Object.entries(r.errors).some((([r,o])=>!("string"!=typeof(null==o?void 0:o.message)||e.hasOwnProperty(r)&&S()(e[r],o))))?{...e,...r.errors}:e;case y:return(0,V.isString)(r.error)&&o.hasOwnProperty(r.error)?(delete o[r.error],o):o;case I:const{errors:t}=r;return void 0===t?{}:Array.isArray(t)?(t.forEach((e=>{o.hasOwnProperty(e)&&delete o[e]})),o):o;case P:return(0,V.isString)(r.error)&&o.hasOwnProperty(r.error)?(o[r.error].hidden=!0,o):o;case x:return(0,V.isString)(r.error)&&o.hasOwnProperty(r.error)?(o[r.error].hidden=!1,o):o;case N:return Object.keys(o).forEach((e=>{o[e].hidden&&(o[e].hidden=!1)})),{...o};default:return e}},selectors:i,actions:t},z=(0,l.createReduxStore)("wc/store/validation",$);(0,l.register)(z);const U={hidden:!0,message:(0,m.__)("Shipping options are not available","woocommerce")},G=({checked:e,rate:r,showPrice:o,showIcon:t,toggleText:i,multiple:n,onClick:a})=>(0,s.createElement)(A.$,{render:(0,s.createElement)("div",null),role:"radio",onClick:a,className:(0,c.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"pickup"===e})},!0===t&&(0,s.createElement)(u.A,{icon:k.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-title"},i),!0===o&&(0,s.createElement)(O.e,{multiple:n,minRate:r.min,maxRate:r.max})),M=({checked:e,rate:r,showPrice:o,showIcon:t,toggleText:i,onClick:n,shippingCostRequiresAddress:a=!1})=>{const h=(0,l.useSelect)((e=>e(p.CART_STORE_KEY).getShippingRates().some((({shipping_rates:e})=>!e.every(w.J_))))),d=a&&(()=>{const e=(0,l.select)(z),r=e.getValidationError("shipping_state"),o=e.getValidationError("shipping_address_1"),t=e.getValidationError("shipping_country"),i=e.getValidationError("shipping_postcode");return[e.getValidationError("shipping_city"),r,o,t,i].some((e=>void 0!==e))})()&&!h,g=void 0!==r.min&&void 0!==r.max,{setValidationErrors:k,clearValidationError:R}=(0,l.useDispatch)(p.validationStore);(0,_.useEffect)((()=>{"shipping"!==e||g?R("shipping-rates-error"):k({"shipping-rates-error":U})}),[e,R,g,k]);const v=void 0===r.min||d?(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-price"},(0,m.__)("calculated with an address","woocommerce")):(0,s.createElement)(O.e,{minRate:r.min,maxRate:r.max});return(0,s.createElement)(A.$,{render:(0,s.createElement)("div",null),role:"radio",onClick:n,className:(0,c.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"shipping"===e})},!0===t&&(0,s.createElement)(u.A,{icon:E.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,s.createElement)("span",{className:"wc-block-checkout__shipping-method-option-title"},i),!0===o&&v)},Q=({checked:e,onChange:r,showPrice:o,showIcon:t,localPickupText:i,shippingText:c})=>{var n,a;const{shippingRates:l}=(0,h.m)(),p=(0,R.getSetting)("shippingCostRequiresAddress",!1),d=(0,R.getSetting)("localPickupText",i||C.A);return(0,s.createElement)("div",{id:"shipping-method",className:"components-button-group wc-block-checkout__shipping-method-container",role:"radiogroup"},(0,s.createElement)(M,{checked:e,onClick:()=>{r("shipping")},rate:(0,v.L)(null===(n=l[0])||void 0===n?void 0:n.shipping_rates),showPrice:o,showIcon:t,shippingCostRequiresAddress:p,toggleText:c||C.x}),(0,s.createElement)(G,{checked:e,onClick:()=>{r("pickup")},rate:(0,v._)(null===(a=l[0])||void 0===a?void 0:a.shipping_rates),multiple:l.length>1,showPrice:o,showIcon:t,toggleText:d}))};var X=o(16162);const Z=(0,n.withFilteredAttributes)(X.A)((({title:e,description:r,children:o,className:t,showPrice:i,showIcon:n,shippingText:m,localPickupText:u})=>{const{showFormStepNumbers:k}=(0,g.O)(),{checkoutIsProcessing:E,prefersCollection:_}=(0,l.useSelect)((e=>{const r=e(p.CHECKOUT_STORE_KEY);return{checkoutIsProcessing:r.isProcessing(),prefersCollection:r.prefersCollection()}})),{setPrefersCollection:w}=(0,l.useDispatch)(p.CHECKOUT_STORE_KEY),{shippingRates:R,needsShipping:A,hasCalculatedShipping:O,isCollectable:v}=(0,h.m)();return A&&O&&R&&v&&d.F7&&d.mH?(0,s.createElement)(a.FormStep,{id:"shipping-method",disabled:E,className:(0,c.A)("wc-block-checkout__shipping-method",t),title:e,description:r,showStepNumber:k},(0,s.createElement)(Q,{checked:_?"pickup":"shipping",onChange:e=>{w("pickup"===e)},showPrice:i,showIcon:n,localPickupText:u,shippingText:m}),o):null}))}}]);