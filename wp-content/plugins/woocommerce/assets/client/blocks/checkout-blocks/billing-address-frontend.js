(self.webpackChunkwebpackWcBlocksCartCheckoutFrontendJsonp=self.webpackChunkwebpackWcBlocksCartCheckoutFrontendJsonp||[]).push([[4037],{3127:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(1609),r=s(7723),i=s(3993),a=s(5703),d=s(6398);s(1094);const o=({address:e,onEdit:t,target:s,fieldConfig:o,isExpanded:l})=>{const c=(0,a.getSetting)("countryData",{});let m=(0,a.getSetting)("defaultAddressFormat","{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}");(0,i.objectHasProp)(c,null==e?void 0:e.country)&&(0,i.objectHasProp)(c[e.country],"format")&&(0,i.isString)(c[e.country].format)&&(m=c[e.country].format);const{name:p,address:u}=(0,d.M0)(e,m),h="shipping"===s?(0,r.__)("Edit shipping address","woocommerce"):(0,r.__)("Edit billing address","woocommerce");return(0,n.createElement)("div",{className:"wc-block-components-address-card"},(0,n.createElement)("address",null,(0,n.createElement)("span",{className:"wc-block-components-address-card__address-section"},p),(0,n.createElement)("div",{className:"wc-block-components-address-card__address-section"},u.filter((e=>!!e)).map(((e,t)=>(0,n.createElement)("span",{key:"address-"+t},e)))),e.phone&&!o.phone.hidden?(0,n.createElement)("div",{key:"address-phone",className:"wc-block-components-address-card__address-section"},e.phone):""),t&&(0,n.createElement)("button",{className:"wc-block-components-address-card__edit","aria-controls":s,"aria-expanded":l,"aria-label":h,onClick:e=>{e.preventDefault(),t()},type:"button"},(0,r.__)("Edit","woocommerce")))}},8202:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(1609),r=s(851);s(7259);const i=({isEditing:e=!1,addressCard:t,addressForm:s})=>{const i=(0,r.A)("wc-block-components-address-address-wrapper",{"is-editing":e});return(0,n.createElement)("div",{className:i},(0,n.createElement)("div",{className:"wc-block-components-address-card-wrapper"},t()),(0,n.createElement)("div",{className:"wc-block-components-address-form-wrapper"},s()))}},9017:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(7723);const r=({defaultTitle:e=(0,n.__)("Step","woocommerce"),defaultDescription:t=(0,n.__)("Step description text.","woocommerce"),defaultShowStepNumber:s=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:s}})},9463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var n=s(1609),r=s(851),i=s(1616),a=s(4656),d=s(5251),o=s(7143),l=s(7594),c=s(6087),m=s(4375),p=s(2663),u=s(4958),h=s(2379),g=s(3494),E=s(923),_=s.n(E),b=s(3505),w=s(3603),f=s(812),y=s(8202),A=s(3127);const C=({addressFieldsConfig:e,defaultEditing:t=!1})=>{const{billingAddress:s,setShippingAddress:r,setBillingAddress:i,useBillingAsShipping:a}=(0,d.C)(),{dispatchCheckoutEvent:m}=(0,w.y)(),[p,u]=(0,c.useState)(t),{hasValidationErrors:h,invalidProps:g}=(0,o.useSelect)((e=>{const t=e(l.VALIDATION_STORE_KEY);return{hasValidationErrors:t.hasValidationErrors(),invalidProps:Object.keys(s).filter((e=>"email"!==e&&void 0!==t.getValidationError("billing_"+e))).filter(Boolean)}}));(0,c.useEffect)((()=>{g.length>0&&!1===p&&u(!0)}),[p,h,g.length]);const E=(0,c.useCallback)((e=>{i(e),a&&(r(e),m("set-shipping-address")),m("set-billing-address")}),[m,i,r,a]),_=(0,c.useCallback)((()=>(0,n.createElement)(A.A,{address:s,target:"billing",onEdit:()=>{u(!0)},fieldConfig:e,isExpanded:p})),[s,e,p]),C=(0,c.useCallback)((()=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(b.l,{id:"billing",addressType:"billing",onChange:E,values:s,fields:f.Hw,fieldConfig:e,isEditing:p}))),[e,s,E,p]);return(0,n.createElement)(y.A,{isEditing:p,addressCard:_,addressForm:C})},F=({showCompanyField:e=!1,requireCompanyField:t=!1,showApartmentField:s=!1,requireApartmentField:r=!1,showPhoneField:i=!1,requirePhoneField:E=!1})=>{const{shippingAddress:b,billingAddress:w,setShippingAddress:f,useBillingAsShipping:y}=(0,d.C)(),{isEditor:A}=(0,p.m)(),{needsShipping:F}=(0,u.m)();(0,m.Su)((()=>{if(y){const{email:t,...s}=w,n={...s};i||delete n.phone,e&&delete n.company,f(n)}}));const S=(0,c.useMemo)((()=>({company:{hidden:!e,required:t},address_2:{hidden:!s,required:r},phone:{hidden:!i,required:E}})),[e,t,s,r,i,E]),k=A?g.A:c.Fragment,v=y?[h.tG.BILLING_ADDRESS,h.tG.SHIPPING_ADDRESS]:[h.tG.BILLING_ADDRESS],{cartDataLoaded:N}=(0,o.useSelect)((e=>({cartDataLoaded:e(l.CART_STORE_KEY).hasFinishedResolution("getCartData")}))),D=!(!w.address_1||!w.first_name&&!w.last_name),{email:B,...P}=w,q=_()(P,b),T=A||!D||F&&q;return(0,n.createElement)(c.Fragment,null,(0,n.createElement)(a.StoreNoticesContainer,{context:v}),(0,n.createElement)(k,null,N?(0,n.createElement)(C,{addressFieldsConfig:S,defaultEditing:T}):null))};var S=s(9017),k=s(7723);const v=(0,k.__)("Billing address","woocommerce"),N=(0,k.__)("Enter the billing address that matches your payment method.","woocommerce"),D=(0,k.__)("Billing and shipping address","woocommerce"),B=(0,k.__)("Enter the billing and shipping address that matches your payment method.","woocommerce"),P={...(0,S.A)({defaultTitle:v,defaultDescription:N}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};var q=s(9292);const T=(0,i.withFilteredAttributes)(P)((({title:e,description:t,children:s,className:i})=>{const{showFormStepNumbers:c}=(0,q.Oy)(),m=(0,o.useSelect)((e=>e(l.CHECKOUT_STORE_KEY).isProcessing())),{showCompanyField:p,requireCompanyField:u,showApartmentField:h,requireApartmentField:g,showPhoneField:E,requirePhoneField:_}=(0,q.Oy)(),{showBillingFields:b,forcedBillingAddress:w,useBillingAsShipping:f}=(0,d.C)();return b||f?(e=((e,t)=>t?e===v?D:e:e===D?v:e)(e,w),t=((e,t)=>t?e===N?B:e:e===B?N:e)(t,w),(0,n.createElement)(a.FormStep,{id:"billing-fields",disabled:m,className:(0,r.A)("wc-block-checkout__billing-fields",i),title:e,description:t,showStepNumber:c},(0,n.createElement)(F,{showCompanyField:p,requireCompanyField:u,showApartmentField:h,requireApartmentField:g,showPhoneField:E,requirePhoneField:_}),s)):null}))},1094:()=>{},7259:()=>{}}]);