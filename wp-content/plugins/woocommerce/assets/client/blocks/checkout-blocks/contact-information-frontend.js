(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[3398],{4597:(e,t,o)=>{"use strict";o.d(t,{l:()=>F});var l=o(1609),r=o(4656),s=o(6087),n=o(7723),a=o(8537),i=o(851),c=o(332),d=o(3993),u=o(7143),p=o(7594);o(1707);const m=({id:e,className:t,label:o,onChange:a,options:m,value:g,required:h=!1,errorId:f,autoComplete:E="off",errorMessage:v=(0,n.__)("Please select a valid option","woocommerce")})=>{const C=(0,s.useRef)(null),y=(0,s.useId)(),_=e||"control-"+y,b=f||_,{setValidationErrors:k,clearValidationError:A}=(0,u.useDispatch)(p.VALIDATION_STORE_KEY),{error:S,validationErrorId:w}=(0,u.useSelect)((e=>{const t=e(p.VALIDATION_STORE_KEY);return{error:t.getValidationError(b),validationErrorId:t.getValidationErrorId(b)}}));return(0,s.useEffect)((()=>(!h||g?A(b):k({[b]:{message:v,hidden:!0}}),()=>{A(b)})),[A,g,b,v,h,k]),(0,l.createElement)("div",{id:_,className:(0,i.A)("wc-block-components-combobox",t,{"is-active":g,"has-error":(null==S?void 0:S.message)&&!(null!=S&&S.hidden)}),ref:C},(0,l.createElement)(c.A,{className:"wc-block-components-combobox-control",label:o,onChange:a,onFilterValueChange:e=>{if(e.length){const t=(0,d.isObject)(C.current)?C.current.ownerDocument.activeElement:void 0;if(t&&(0,d.isObject)(C.current)&&C.current.contains(t))return;const o=e.toLocaleUpperCase(),l=m.find((e=>e.value.toLocaleUpperCase()===o));if(l)return void a(l.value);const r=m.find((e=>e.label.toLocaleUpperCase().startsWith(o)));r&&a(r.value)}},options:m,value:g||"",allowReset:!1,autoComplete:E,"aria-invalid":(null==S?void 0:S.message)&&!(null!=S&&S.hidden),"aria-errormessage":w}),(0,l.createElement)(r.ValidationInputError,{propertyName:b}))};o(2931);const g=({className:e,countries:t,id:o,label:r,onChange:c,value:d="",autoComplete:u="off",required:p=!1,errorId:g,errorMessage:h=(0,n.__)("Please select a country","woocommerce")})=>{const f=(0,s.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:(0,a.decodeEntities)(t)})))),[t]);return(0,l.createElement)("div",{className:(0,i.A)(e,"wc-block-components-country-input")},(0,l.createElement)(m,{id:o,label:r,onChange:c,options:f,value:d,errorId:g,errorMessage:h,required:p,autoComplete:u}))};var h=o(812);const f=e=>(0,l.createElement)(g,{countries:h.AG,...e}),E=e=>(0,l.createElement)(g,{countries:h.G3,...e});o(8824);const v=(e,t)=>{const o=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return o?o.value:""},C=({className:e,id:t,states:o,country:c,label:d,onChange:u,autoComplete:p="off",value:g="",required:h=!1,errorId:f=""})=>{const E=o[c],C=(0,s.useMemo)((()=>E?Object.keys(E).map((e=>({value:e,label:(0,a.decodeEntities)(E[e])}))):[]),[E]),y=(0,s.useCallback)((e=>{const t=C.length>0?v(e,C):e;t!==g&&u(t)}),[u,C,g]),_=(0,s.useRef)(g);return(0,s.useEffect)((()=>{_.current!==g&&(_.current=g)}),[g]),(0,s.useEffect)((()=>{if(C.length>0&&_.current){const e=v(_.current,C);e!==_.current&&y(e)}}),[C,y]),C.length>0?(0,l.createElement)(m,{className:(0,i.A)(e,"wc-block-components-state-input"),id:t,label:d,onChange:y,options:C,value:g,errorMessage:(0,n.__)("Please select a state.","woocommerce"),errorId:f,required:h,autoComplete:p}):(0,l.createElement)(r.ValidatedTextInput,{className:e,id:t,label:d,onChange:y,autoComplete:p,value:g,required:h})},y=e=>(0,l.createElement)(C,{states:h.uz,...e}),_=e=>(0,l.createElement)(C,{states:h.SL,...e});var b=o(9491),k=o(1573),A=o(923),S=o.n(A),w=o(8585);var T=o(1e3),I=o(3832);const O=({field:e,props:t,onChange:o,value:a})=>{var i;const c=null!==(i=null==e?void 0:e.required)&&void 0!==i&&i,[d,u]=(0,s.useState)((()=>Boolean(a)||c));return(0,l.createElement)(s.Fragment,null,d?(0,l.createElement)(r.ValidatedTextInput,{...t,type:e.type,label:c?e.label:e.optionalLabel,className:`wc-block-components-address-form__${e.key}`,value:a,onChange:t=>o(e.key,t)}):(0,l.createElement)("button",{className:"wc-block-components-address-form__address_2-toggle",onClick:()=>u(!0)},(0,n.sprintf)(
// translators: %s: address 2 field label.
// translators: %s: address 2 field label.
(0,n.__)("+ Add %s","woocommerce"),e.label.toLowerCase())))},N=(e,t,o)=>({id:`${t}-${null==e?void 0:e.key}`.replaceAll("/","-"),errorId:`${o}_${null==e?void 0:e.key}`,label:null!=e&&e.required?null==e?void 0:e.label:null==e?void 0:e.optionalLabel,autoCapitalize:null==e?void 0:e.autocapitalize,autoComplete:null==e?void 0:e.autocomplete,errorMessage:null==e?void 0:e.errorMessage,required:null==e?void 0:e.required,className:`wc-block-components-address-form__${null==e?void 0:e.key}`.replaceAll("/","-"),...null==e?void 0:e.attributes}),R=(e,t,o)=>({field:t.find((t=>t.key===e)),value:(0,d.objectHasProp)(o,e)?o[e]:void 0}),V=({formId:e,address1:t,address2:o,addressType:s,onChange:n})=>{var a,i,c,d;const u=t?N(t.field,e,s):void 0,p=o?N(o.field,e,s):void 0;return(0,l.createElement)(l.Fragment,null,t&&(0,l.createElement)(r.ValidatedTextInput,{...u,type:null===(a=t.field)||void 0===a?void 0:a.type,label:null===(i=t.field)||void 0===i?void 0:i.label,className:`wc-block-components-address-form__${null===(c=t.field)||void 0===c?void 0:c.key}`,value:t.value,onChange:e=>{var o;return n(null===(o=t.field)||void 0===o?void 0:o.key,e)}}),(null==o?void 0:o.field)&&!(null!=o&&null!==(d=o.field)&&void 0!==d&&d.hidden)&&(0,l.createElement)(O,{field:o.field,props:p,onChange:n,value:null==o?void 0:o.value}))},K=({id:e="",fields:t,fieldConfig:o={},onChange:a,addressType:c="shipping",values:g,children:h})=>{const v=(0,b.useInstanceId)(K),C=(0,k.c)(t),A=(0,k.c)(o),O=(0,k.c)((0,d.objectHasProp)(g,"country")?g.country:""),F=(0,s.useMemo)((()=>{const e=(0,w.A)(C,A,O);return{fields:e,addressType:c,required:e.filter((e=>e.required)),hidden:e.filter((e=>e.hidden))}}),[C,A,O,c]),L=(0,s.useRef)({});return(0,s.useEffect)((()=>{const e={...g,...Object.fromEntries(F.hidden.map((e=>[e.key,""])))};S()(g,e)||a(e)}),[a,F,g]),(0,s.useEffect)((()=>{"shipping"===c&&(0,d.objectHasProp)(g,"country")&&(e=>{const t="shipping_country",o=(0,u.select)(p.VALIDATION_STORE_KEY).getValidationError(t);!e.country&&(e.city||e.state||e.postcode)&&(o?(0,u.dispatch)(p.VALIDATION_STORE_KEY).showValidationError(t):(0,u.dispatch)(p.VALIDATION_STORE_KEY).setValidationErrors({[t]:{message:(0,n.__)("Please select your country","woocommerce"),hidden:!1}})),o&&e.country&&(0,u.dispatch)(p.VALIDATION_STORE_KEY).clearValidationError(t)})(g)}),[g,c]),(0,s.useEffect)((()=>{var e,t;null===(e=L.current)||void 0===e||null===(t=e.postcode)||void 0===t||t.revalidate()}),[O]),e=e||`${v}`,(0,l.createElement)("div",{id:e,className:"wc-block-components-address-form"},F.fields.map((t=>{if(t.hidden)return null;const o=N(t,e,c);if("email"===t.key&&(o.id="email",o.errorId="billing_email"),"checkbox"===t.type)return(0,l.createElement)(r.CheckboxControl,{key:t.key,checked:Boolean(g[t.key]),onChange:e=>{a({...g,[t.key]:e})},...o});if("address_1"===t.key){const o=R("address_1",F.fields,g),r=R("address_2",F.fields,g);return(0,l.createElement)(V,{address1:o,address2:r,addressType:c,formId:e,key:t.key,onChange:(e,t)=>{a({...g,[e]:t})}})}if("address_2"===t.key)return null;if("country"===t.key&&(0,d.objectHasProp)(g,"country")){const e="shipping"===c?E:f;return(0,l.createElement)(e,{key:t.key,...o,value:g.country,onChange:e=>{a({...g,country:e,state:"",postcode:""})}})}if("state"===t.key&&(0,d.objectHasProp)(g,"state")){const e="shipping"===c?_:y;return(0,l.createElement)(e,{key:t.key,...o,country:g.country,value:g.state,onChange:e=>a({...g,state:e})})}return"select"===t.type?void 0===t.options?null:(0,l.createElement)(m,{key:t.key,...o,className:(0,i.A)("wc-block-components-select-input",`wc-block-components-select-input-${t.key}`.replaceAll("/","-")),value:g[t.key],onChange:e=>{a({...g,[t.key]:e})},options:t.options}):(0,l.createElement)(r.ValidatedTextInput,{key:t.key,ref:e=>L.current[t.key]=e,...o,type:t.type,value:g[t.key],onChange:e=>a({...g,[t.key]:e}),customFormatter:e=>"postcode"===t.key?e.trimStart().toUpperCase():e,customValidation:e=>((e,t,o)=>!((e.required||e.value)&&("postcode"===t&&o&&!(0,T.isPostcode)({postcode:e.value,country:o})?(e.setCustomValidity((0,n.__)("Please enter a valid postcode","woocommerce")),1):"email"===t&&!(0,I.isEmail)(e.value)&&(e.setCustomValidity((0,n.__)("Please enter a valid email address","woocommerce")),1))))(e,t.key,(0,d.objectHasProp)(g,"country")?g.country:"")})})),h)},F=K},5251:(e,t,o)=>{"use strict";o.d(t,{C:()=>c});var l=o(5703),r=o(6087),s=o(7143),n=o(7594),a=o(4107),i=o(4958);const c=()=>{const{needsShipping:e}=(0,i.m)(),{useShippingAsBilling:t,prefersCollection:o}=(0,s.useSelect)((e=>({useShippingAsBilling:e(n.CHECKOUT_STORE_KEY).getUseShippingAsBilling(),prefersCollection:e(n.CHECKOUT_STORE_KEY).prefersCollection()}))),{__internalSetUseShippingAsBilling:c}=(0,s.useDispatch)(n.CHECKOUT_STORE_KEY),{billingAddress:d,setBillingAddress:u,shippingAddress:p,setShippingAddress:m}=(0,a.q)(),g=(0,r.useCallback)((e=>{u({email:e})}),[u]),h=(0,l.getSetting)("forcedBillingAddress",!1);return{shippingAddress:p,billingAddress:d,setShippingAddress:m,setBillingAddress:u,setEmail:g,defaultFields:l.defaultFields,useShippingAsBilling:t,setUseShippingAsBilling:c,needsShipping:e,showShippingFields:!h&&e&&!o,showShippingMethods:e&&!o,showBillingFields:!e||!t||!!o,forcedBillingAddress:h,useBillingAsShipping:h||!!o}}},4107:(e,t,o)=>{"use strict";o.d(t,{q:()=>s});var l=o(7143),r=o(7594);const s=()=>{const{customerData:e,isInitialized:t}=(0,l.useSelect)((e=>{const t=e(r.CART_STORE_KEY);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:o,setBillingAddress:s}=(0,l.useDispatch)(r.CART_STORE_KEY);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:s,setShippingAddress:o}}},1573:(e,t,o)=>{"use strict";o.d(t,{c:()=>n});var l=o(6087),r=o(923),s=o.n(r);function n(e){const t=(0,l.useRef)(e);return s()(e,t.current)||(t.current=e),t.current}},9017:(e,t,o)=>{"use strict";o.d(t,{A:()=>r});var l=o(7723);const r=({defaultTitle:e=(0,l.__)("Step","woocommerce"),defaultDescription:t=(0,l.__)("Step description text.","woocommerce"),defaultShowStepNumber:o=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:o}})},6994:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>_});var l=o(1609),r=o(851),s=o(1616),n=o(4656),a=o(7143),i=o(7594),c=o(9292),d=o(7723),u=o(5251),p=o(3603),m=o(2379),g=o(5703),h=o(812),f=o(4597);const E=()=>{const{customerId:e,shouldCreateAccount:t,additionalFields:o}=(0,a.useSelect)((e=>{const t=e(i.CHECKOUT_STORE_KEY);return{customerId:t.getCustomerId(),shouldCreateAccount:t.getShouldCreateAccount(),additionalFields:t.getAdditionalFields()}})),{__internalSetShouldCreateAccount:r,setAdditionalFields:s}=(0,a.useDispatch)(i.CHECKOUT_STORE_KEY),{billingAddress:c,setEmail:E}=(0,u.C)(),{dispatchCheckoutEvent:v}=(0,p.y)(),C=!e&&(0,g.getSetting)("checkoutAllowsGuest",!1)&&(0,g.getSetting)("checkoutAllowsSignup",!1)&&(0,l.createElement)(n.CheckboxControl,{className:"wc-block-checkout__create-account",label:(0,d.__)("Create an account?","woocommerce"),checked:t,onChange:e=>r(e)}),y={email:c.email,...o};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.StoreNoticesContainer,{context:m.tG.CONTACT_INFORMATION}),(0,l.createElement)(f.l,{id:"contact",addressType:"contact",onChange:e=>{const{email:t,...o}=e;E(t),v("set-email-address"),s(o)},values:y,fields:h.fO},C))},v={...(0,o(9017).A)({defaultTitle:(0,d.__)("Contact information","woocommerce"),defaultDescription:(0,d.__)("We'll use this email to send you details and updates about your order.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{remove:!0,move:!0}}},C=`${h.aW}?redirect_to=${encodeURIComponent(window.location.href)}`,y=()=>{const e=(0,a.useSelect)((e=>e(i.CHECKOUT_STORE_KEY).getCustomerId()));return!(0,g.getSetting)("checkoutShowLoginReminder",!0)||e?null:(0,l.createElement)(l.Fragment,null,(0,d.__)("Already have an account? ","woocommerce"),(0,l.createElement)("a",{href:C},(0,d.__)("Log in.","woocommerce")))},_=(0,s.withFilteredAttributes)(v)((({title:e,description:t,children:o,className:s})=>{const d=(0,a.useSelect)((e=>e(i.CHECKOUT_STORE_KEY).isProcessing())),{showFormStepNumbers:u}=(0,c.Oy)();return(0,l.createElement)(n.FormStep,{id:"contact-fields",disabled:d,className:(0,r.A)("wc-block-checkout__contact-fields",s),title:e,description:t,showStepNumber:u,stepHeadingContent:()=>(0,l.createElement)(y,null)},(0,l.createElement)(E,null),o)}))},1707:()=>{},2931:()=>{},8824:()=>{}}]);