(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[3024],{8067:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var a=n(1609),r=n(851),s=n(7723),i=n(8537),l=n(4656),c=n(6087),o=n(4958),p=n(1359),d=n.n(p);const m=["a","b","em","i","strong","p","br"],u=["target","href","rel","name","download"],h=(e,t)=>{const n=(null==t?void 0:t.tags)||m,a=(null==t?void 0:t.attr)||u;return d().sanitize(e,{ALLOWED_TAGS:n,ALLOWED_ATTR:a})};var g=n(7143),k=n(7594),_=n(9095),v=n(8529),f=n(5703);const E=e=>{const t=(0,f.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10);let n=(0,a.createElement)(a.Fragment,null,Number.isFinite(t)&&(0,a.createElement)(l.FormattedMonetaryAmount,{currency:(0,v.getCurrencyFromPriceResponse)(e),value:t}),Number.isFinite(t)&&e.delivery_time?" — ":null,(0,i.decodeEntities)(e.delivery_time));return 0===t&&(n=(0,a.createElement)("span",{className:"wc-block-components-shipping-rates-control__package__description--free"},(0,s.__)("Free","woocommerce"))),{label:(0,i.decodeEntities)(e.name),value:e.rate_id,description:n}},b=({className:e="",noResultsMessage:t,onSelectRate:n,rates:r,renderOption:s=E,selectedRate:i,disabled:o=!1,highlightChecked:p=!1})=>{const d=(null==i?void 0:i.rate_id)||"",m=(0,_.Z)(d),[u,h]=(0,c.useState)((()=>d||(r.length>0?r[0].rate_id:void 0)));return(0,c.useEffect)((()=>{d&&d!==m&&d!==u&&h(d)}),[d,u,m]),(0,c.useEffect)((()=>{!u&&r.length>0&&(h(r[0].rate_id),n(r[0].rate_id))}),[n,r,u]),(0,c.useEffect)((()=>{u&&n(u)}),[n,u]),0===r.length?t:(0,a.createElement)(l.RadioControl,{className:e,onChange:e=>{h(e),n(e)},highlightChecked:p,disabled:o,selected:u,options:r.map(s)})};n(2867);const w=({packageId:e,className:t="",noResultsMessage:n,renderOption:p,packageData:d,collapsible:m,showItems:u,highlightChecked:_=!1})=>{var v;const{selectShippingRate:f,isSelectingRate:E}=(0,o.m)(),w=(0,g.useSelect)((e=>{var t,n,a;return null===(t=e(k.CART_STORE_KEY))||void 0===t||null===(n=t.getCartData())||void 0===n||null===(a=n.shippingRates)||void 0===a?void 0:a.length}))>1||document.querySelectorAll(".wc-block-components-shipping-rates-control__package").length>1,S=null!=u?u:w,C=null!=m?m:w,y=(0,a.createElement)(a.Fragment,null,(C||S)&&(0,a.createElement)("div",{className:"wc-block-components-shipping-rates-control__package-title",dangerouslySetInnerHTML:{__html:h(d.name)}}),S&&(0,a.createElement)("ul",{className:"wc-block-components-shipping-rates-control__package-items"},Object.values(d.items).map((e=>{const t=(0,i.decodeEntities)(e.name),n=e.quantity;return(0,a.createElement)("li",{key:e.key,className:"wc-block-components-shipping-rates-control__package-item"},(0,a.createElement)(l.Label,{label:n>1?`${t} × ${n}`:`${t}`,screenReaderLabel:(0,s.sprintf)(/* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */ /* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */
(0,s._n)("%1$s (%2$d unit)","%1$s (%2$d units)",n,"woocommerce"),t,n)}))})))),x=(0,c.useCallback)((t=>{f(t,e)}),[e,f]),R={className:t,noResultsMessage:n,rates:d.shipping_rates,onSelectRate:x,selectedRate:d.shipping_rates.find((e=>e.selected)),renderOption:p,disabled:E,highlightChecked:_},N=(0,c.useMemo)((()=>{var e;return null==d||null===(e=d.shipping_rates)||void 0===e?void 0:e.findIndex((e=>null==e?void 0:e.selected))}),[null==d?void 0:d.shipping_rates]);return C?(0,a.createElement)(l.Panel,{className:(0,r.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":E}),initialOpen:!1,title:y},(0,a.createElement)(b,{...R})):(0,a.createElement)("div",{className:(0,r.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":E,"wc-block-components-shipping-rates-control__package--first-selected":!E&&0===N,"wc-block-components-shipping-rates-control__package--last-selected":!E&&N===(null==d||null===(v=d.shipping_rates)||void 0===v?void 0:v.length)-1})},y,(0,a.createElement)(b,{...R}))}},9017:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(7723);const r=({defaultTitle:e=(0,a.__)("Step","woocommerce"),defaultDescription:t=(0,a.__)("Step description text.","woocommerce"),defaultShowStepNumber:n=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:n}})},6160:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var a=n(1609),r=n(851),s=n(1616),i=n(4656),l=n(7143),c=n(7594),o=n(812),p=n(9292),d=n(7723),m=n(6087),u=n(4958),h=n(8605),g=n(8529),k=n(8537),_=n(5703),v=n(7104),f=n(601),E=n(8531),b=n(1e3);const w=({title:e,setSelectedOption:t,selectedOption:n,pickupLocations:r,onSelectRate:s,renderPickupLocation:o,packageCount:p})=>{const d=(0,l.useSelect)((e=>{var t,n,a;return null===(t=e(c.CART_STORE_KEY))||void 0===t||null===(n=t.getCartData())||void 0===n||null===(a=n.shippingRates)||void 0===a?void 0:a.length}))>1||document.querySelectorAll(".wc-block-components-local-pickup-select .wc-block-components-radio-control").length>1;return(0,a.createElement)("div",{className:"wc-block-components-local-pickup-select"},!(!d||!e)&&(0,a.createElement)("div",null,e),(0,a.createElement)(i.RadioControl,{onChange:e=>{t(e),s(e)},highlightChecked:!0,selected:n,options:r.map((e=>o(e,p)))}))};var S=n(2294);function C(e){let t,n,a,r=[];for(let s=0;s<e.length;s++)t=e.substring(s),n=t.match(/^&[a-z0-9#]+;/),n?(a=n[0],r.push(a),s+=a.length-1):r.push(e[s]);return r}const y=(e,t,n="...")=>{const a=function(e,t){const n=(t=t||{}).limit||100,a=void 0===t.preserveTags||t.preserveTags,r=void 0!==t.wordBreak&&t.wordBreak,s=t.suffix||"...",i=t.moreLink||"",l=t.moreText||"»",c=t.preserveWhiteSpace||!1,o=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n");let p,d,m,u,h,g,k=0,_=[],v=!1;for(let e=0;e<o.length;e++){if(p=o[e],u=c?p:p.replace(/[ ]+/g," "),!p.length)continue;const t=C(u);if("<"!==p[0])if(k>=n)p="";else if(k+t.length>=n){if(d=n-k," "===t[d-1])for(;d&&(d-=1," "===t[d-1]););else m=t.slice(d).indexOf(" "),r||(-1!==m?d+=m:d=p.length);p=t.slice(0,d).join("")+s,i&&(p+='<a href="'+i+'" style="display:inline">'+l+"</a>"),k=n,v=!0}else k+=t.length;else if(a){if(k>=n)if(h=p.match(/[a-zA-Z]+/),g=h?h[0]:"",g)if("</"!==p.substring(0,2))_.push(g),p="";else{for(;_[_.length-1]!==g&&_.length;)_.pop();_.length&&(p=""),_.pop()}else p=""}else p="";o[e]=p}return{html:o.join("\n").replace(/\n/g,""),more:v}}(e,{suffix:n,limit:t});return a.html},x=(e,t,n)=>(t<=n?e.start=e.middle+1:e.end=e.middle-1,e),R=(e,t,n,a)=>{const r=((e,t,n)=>{let a={start:0,middle:0,end:e.length};for(;a.start<=a.end;)a.middle=Math.floor((a.start+a.end)/2),t.innerHTML=y(e,a.middle),a=x(a,t.clientHeight,n);return a.middle})(e,t,n);return y(e,r-a.length,a)},N={className:"read-more-content",ellipsis:"&hellip;",lessText:(0,d.__)("Read less","woocommerce"),maxLines:3,moreText:(0,d.__)("Read more","woocommerce")};class A extends m.Component{constructor(e){super(e),(0,S.A)(this,"reviewSummary",void 0),(0,S.A)(this,"reviewContent",void 0),this.state={isExpanded:!1,clampEnabled:null,content:e.children,summary:"."},this.reviewContent=(0,m.createRef)(),this.reviewSummary=(0,m.createRef)(),this.getButton=this.getButton.bind(this),this.onClick=this.onClick.bind(this)}componentDidMount(){this.setSummary()}componentDidUpdate(e){e.maxLines===this.props.maxLines&&e.children===this.props.children||this.setState({clampEnabled:null,summary:"."},this.setSummary)}setSummary(){if(this.props.children){const{maxLines:e,ellipsis:t}=this.props;if(!this.reviewSummary.current||!this.reviewContent.current)return;const n=(this.reviewSummary.current.clientHeight+1)*e+1,a=this.reviewContent.current.clientHeight+1>n;this.setState({clampEnabled:a}),a&&this.setState({summary:R(this.reviewContent.current.innerHTML,this.reviewSummary.current,n,t)})}}getButton(){const{isExpanded:e}=this.state,{className:t,lessText:n,moreText:r}=this.props,s=e?n:r;if(s)return(0,a.createElement)("a",{href:"#more",className:t+"__read_more",onClick:this.onClick,"aria-expanded":!e,role:"button"},s)}onClick(e){e.preventDefault();const{isExpanded:t}=this.state;this.setState({isExpanded:!t})}render(){const{className:e}=this.props,{content:t,summary:n,clampEnabled:r,isExpanded:s}=this.state;return t?!1===r?(0,a.createElement)("div",{className:e},(0,a.createElement)("div",{ref:this.reviewContent},t)):(0,a.createElement)("div",{className:e},(!s||null===r)&&(0,a.createElement)("div",{ref:this.reviewSummary,"aria-hidden":s,dangerouslySetInnerHTML:{__html:n}}),(s||null===r)&&(0,a.createElement)("div",{ref:this.reviewContent,"aria-hidden":!s},t),this.getButton()):null}}(0,S.A)(A,"defaultProps",N);const L=A;var T=n(8067);const F=(e,t)=>{const n=(0,_.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):e.price,r=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_location"===e.key));return t?t.value:""}return""})(e),s=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_address"===e.key));return t?t.value:""}return""})(e),l=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_details"===e.key));return t?t.value:""}return""})(e);let c=(0,a.createElement)("em",null,(0,d.__)("free","woocommerce"));return parseInt(n,10)>0&&(c=1===t?(0,a.createElement)(i.FormattedMonetaryAmount,{currency:(0,g.getCurrencyFromPriceResponse)(e),value:n}):(0,m.createInterpolateElement)(/* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */ /* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */
(0,d._n)("<price/> x <packageCount/> package","<price/> x <packageCount/> packages",t,"woocommerce"),{price:(0,a.createElement)(i.FormattedMonetaryAmount,{currency:(0,g.getCurrencyFromPriceResponse)(e),value:n}),packageCount:(0,a.createElement)(a.Fragment,null,t)})),{value:e.rate_id,label:r?(0,k.decodeEntities)(r):(0,k.decodeEntities)(e.name),secondaryLabel:c,description:s?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(v.A,{icon:f.A,className:"wc-block-editor-components-block-icon"}),(0,k.decodeEntities)(s)):void 0,secondaryDescription:(0,a.createElement)(L,{maxLines:2},(0,k.decodeEntities)(l))}},P=()=>{var e;const{shippingRates:t,selectShippingRate:n}=(0,u.m)(),r=((null===(e=t[0])||void 0===e?void 0:e.shipping_rates)||[]).filter(E.J_),[s,i]=(0,m.useState)((()=>{var e;return(null===(e=r.find((e=>e.selected)))||void 0===e?void 0:e.rate_id)||""})),l=(0,m.useCallback)((e=>{n(e)}),[n]),{extensions:c,receiveCart:o,...p}=(0,h.V)(),d={extensions:c,cart:p,components:{ShippingRatesControlPackage:T.A,LocalPickupSelect:w},renderPickupLocation:F};(0,m.useEffect)((()=>{!s&&r[0]&&(i(r[0].rate_id),l(r[0].rate_id))}),[l,r,s]);const g=(0,E.T4)(t);return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(b.ExperimentalOrderLocalPickupPackages.Slot,{...d}),(0,a.createElement)(b.ExperimentalOrderLocalPickupPackages,null,(0,a.createElement)(w,{title:t[0].name,setSelectedOption:i,onSelectRate:l,selectedOption:s,renderPickupLocation:F,pickupLocations:r,packageCount:g})))},O={...(0,n(9017).A)({defaultTitle:(0,d.__)("Pickup locations","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},I=(0,s.withFilteredAttributes)(O)((({title:e,description:t,children:n,className:s})=>{const{checkoutIsProcessing:d,prefersCollection:m}=(0,l.useSelect)((e=>{const t=e(c.CHECKOUT_STORE_KEY);return{checkoutIsProcessing:t.isProcessing(),prefersCollection:t.prefersCollection()}})),{showFormStepNumbers:u}=(0,p.Oy)();return m&&o.F7?(0,a.createElement)(i.FormStep,{id:"pickup-options",disabled:d,className:(0,r.A)("wc-block-checkout__pickup-options",s),title:e,description:t,showStepNumber:u},(0,a.createElement)(P,null),n):null}))},2867:()=>{}}]);