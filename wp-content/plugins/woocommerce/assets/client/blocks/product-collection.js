(()=>{var e,t={2249:(e,t,o)=>{"use strict";o.r(t);const r=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"woocommerce/product-collection","version":"1.0.0","title":"Product Collection (Beta)","description":"Display a collection of products from your store.","category":"woocommerce","keywords":["WooCommerce","Products (Beta)"],"textdomain":"woocommerce","attributes":{"queryId":{"type":"number"},"query":{"type":"object"},"tagName":{"type":"string"},"displayLayout":{"type":"object"},"convertedFromProducts":{"type":"boolean","default":false}},"providesContext":{"queryId":"queryId","query":"query","displayLayout":"displayLayout"},"supports":{"align":["wide","full"],"anchor":true,"html":false,"__experimentalLayout":true}}');var c=o(9196);const a=window.wp.blockEditor;var l=o(4333),s=o(9307),i=o(5736);const m=window.wp.hooks;var u=o(2911),d=o(6554),p=o(5656);o(1612);const _=({text:e,title:t=(0,i.__)("Feedback?","woocommerce"),url:o})=>{const[r,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{n(!0)}),[]),(0,c.createElement)(c.Fragment,null,r&&(0,c.createElement)("div",{className:"wc-block-feedback-prompt"},(0,c.createElement)(u.Z,{icon:d.Z}),(0,c.createElement)("h2",{className:"wc-block-feedback-prompt__title"},t),(0,c.createElement)("p",{className:"wc-block-feedback-prompt__text"},e),(0,c.createElement)("a",{href:o,className:"wc-block-feedback-prompt__link",rel:"noreferrer noopener",target:"_blank"},(0,i.__)("Give us your feedback.","woocommerce"),(0,c.createElement)(u.Z,{icon:p.Z,size:16}))))},w=()=>(0,c.createElement)(_,{text:(0,i.__)("Thanks for trying out the Product Collection block! Help us make it better by sharing your feedback.","woocommerce"),title:(0,i.__)("Share your feedback!","woocommerce"),url:"https://airtable.com/shrqsMSDPvAKoY99u"}),g=window.wp.data,b=window.wc.wcSettings,h="wc-blocks_upgraded-products-to-product-collection",y=()=>({status:"notseen",time:Date.now(),displayCount:0}),E=e=>"woocommerce/product-collection"===e.name&&e.attributes.convertedFromProducts,f=(e,t)=>{let o=[];return e.forEach((e=>{t(e)&&(o=[...o,e.clientId]),o=[...o,...f(e.innerBlocks,t)]})),o},v=(0,b.getSettingWithCoercion)("postTemplateHasSupportForGridView",!1,(e=>"boolean"==typeof e)),k=()=>{const e=window.localStorage.getItem(h);return e?JSON.parse(e):y()},S=e=>{window.localStorage.setItem(h,JSON.stringify(e))};let C=function(e){return e.GRID="flex",e.STACK="list",e}({}),x=function(e){return e.IN="in",e.NOT_IN="not-in",e}({}),I=function(e){return e.SINGLE="single",e.THUMBNAIL="thumbnail",e}({});const N=window.wp.components;var P=o(1191);function T(e,{blockDescription:t,blockIcon:o,blockTitle:n,variationName:c}){(0,r.registerBlockVariation)(e,{description:t,name:c,title:n,isActive:e=>e.__woocommerceNamespace===c,icon:{src:o},attributes:{__woocommerceNamespace:c},scope:["block","inserter"]})}const A=(0,i.__)("Product Title","woocommerce"),O=((0,c.createElement)(u.Z,{icon:P.Z,className:"wc-block-editor-components-block-icon"}),(0,i.__)("Display the title of a product.","woocommerce")),B=`${n.name}/product-title`;function L(e,t){const{query:o}=e.attributes;e.setAttributes({query:{...o,...t}})}function R(){const e=(0,g.select)("core/edit-site"),t=null==e?void 0:e.getEditedPostId();return!!t&&["woocommerce/woocommerce//archive-product","woocommerce/woocommerce//taxonomy-product_cat","woocommerce/woocommerce//taxonomy-product_tag","woocommerce/woocommerce//taxonomy-product_attribute","woocommerce/woocommerce//product-search-results"].includes(t)}const q=(0,b.getSetting)("stockStatusOptions",[]),D=(0,b.getSetting)("hideOutOfStockItems",!1),F=()=>D?Object.keys(function(e,t){const{[t]:o,...r}=e;return r}(q,"outofstock")):Object.keys(q),M={perPage:9,pages:0,offset:0,postType:"product",order:"asc",orderBy:"title",search:"",exclude:[],inherit:null,taxQuery:{},isProductCollectionBlock:!0,featured:!1,woocommerceOnSale:!1,woocommerceStockStatus:F(),woocommerceAttributes:[],woocommerceHandPickedProducts:[],timeFrame:void 0},j={query:M,tagName:"div",displayLayout:{type:C.GRID,columns:3,shrinkColumns:!0}},G=e=>({...e,orderBy:M.orderBy,order:M.order,inherit:R()}),$=()=>j.displayLayout,V={woocommerceOnSale:M.woocommerceOnSale,woocommerceStockStatus:F(),woocommerceAttributes:[],taxQuery:M.taxQuery,woocommerceHandPickedProducts:[],featured:M.featured,timeFrame:void 0},H=[["woocommerce/product-template",{},[["woocommerce/product-image",{imageSizing:I.THUMBNAIL}],["core/post-title",{textAlign:"center",level:3,fontSize:"medium",style:{spacing:{margin:{bottom:"0.75rem",top:"0"}}},isLink:!0,__woocommerceNamespace:B}],["woocommerce/product-price",{textAlign:"center",fontSize:"small"}],["woocommerce/product-button",{textAlign:"center",fontSize:"small"}]]],["core/query-pagination",{layout:{type:"flex",justifyContent:"center"}}],["woocommerce/product-collection-no-results"]];const Q=e=>"flex"===e?"grid":"list"===e?"default":"grid",Z=e=>{const{type:t,columns:o}=e;return{type:Q(t),columnCount:o}},z=(e,t)=>{const o=e.map((e=>{const{name:o,attributes:n}=e,c=z(e.innerBlocks);return(({name:e})=>"woocommerce/product-template"===e)(e)?((e,t,o)=>(0,r.createBlock)("core/post-template",{className:"products-block-post-template",layout:v?Z(o):void 0,__woocommerceNamespace:"woocommerce/product-query/product-template",...e.attributes},t))(e,c,t):(({name:e,attributes:t})=>"core/post-title"===e&&"woocommerce/product-collection/product-title"===t.__woocommerceNamespace)(e)?((e,t)=>{const{__woocommerceNamespace:o,...n}=e.attributes;return(0,r.createBlock)("core/post-title",{__woocommerceNamespace:"woocommerce/product-collection/product-title",...n},t)})(e,c):(({name:e,attributes:t})=>"core/post-excerpt"===e&&"woocommerce/product-collection/product-summary"===t.__woocommerceNamespace)(e)?((e,t)=>{const{__woocommerceNamespace:o,...n}=e.attributes;return(0,r.createBlock)("core/post-excerpt",{__woocommerceNamespace:"woocommerce/product-collection/product-summary",...n},t)})(e,c):(0,r.createBlock)(o,n,c)}));return o},K=e=>{const t=(0,g.select)("core/block-editor").getBlock(e),o=((e,t)=>{const o=(0,g.select)("core/block-editor").getBlockRootClientId(e)||void 0;return(0,g.select)("core/block-editor").canInsertBlockType(t,o)})(e,"core/query");if(t&&o){const{attributes:o={},innerBlocks:n=[]}=t,{displayLayout:c,...a}=o,l=(e=>{const{query:t,...o}=e,{woocommerceAttributes:r,woocommerceStockStatus:n,woocommerceOnSale:c,woocommerceHandPickedProducts:a,taxQuery:l,isProductCollectionBlock:s,...i}=t,m={...i};return a&&(m.include=a),c&&(m.__woocommerceOnSale=c),l&&(m.taxQuery=l),{...o,namespace:"woocommerce/product-query",query:{__woocommerceAttributes:r||[],__woocommerceStockStatus:n||[],...m}}})(v?a:o),s=z(n,c),i=(0,r.createBlock)("core/query",l,s);return(0,g.dispatch)("core/block-editor").replaceBlock(e,i),!0}return!1},J=()=>{var e;S({status:"reverted",time:Date.now()}),(e=(0,g.select)("core/block-editor").getBlocks(),f(e,E)).map(K)},U=(0,s.createInterpolateElement)((0,i.__)("Products (Beta) block was upgraded to <strongText />, an updated version with new features and simplified settings.","woocommerce"),{strongText:(0,c.createElement)("strong",null,(0,i.__)("Product Collection","woocommerce"))}),W=(0,i.__)("Revert to Products (Beta)","woocommerce"),Y=({revertMigration:e})=>{const[t,o]=((e,t)=>{const[o,r]=(0,s.useState)((()=>{const o=window.localStorage.getItem(e);if(o)try{return JSON.parse(o)}catch{console.error(`Value for key '${e}' could not be retrieved from localStorage because it can't be parsed.`)}return t}));return(0,s.useEffect)((()=>{try{window.localStorage.setItem(e,JSON.stringify(o))}catch{console.error(`Value for key '${e}' could not be saved in localStorage because it can't be converted into a string.`)}}),[e,o]),[o,r]})(h,y()),r=(0,s.useRef)(!0),{status:n}=t;return(0,s.useEffect)((()=>()=>{r.current&&((()=>{const e=k(),t="number"==typeof e.displayCount?e.displayCount+1:0;S({...e,displayCount:t})})(),r.current=!1)}),[r]),"notseen"===n?(0,c.createElement)(N.Notice,{onRemove:()=>{o({status:"seen",time:Date.now()})}},(0,c.createElement)(c.Fragment,null,U," "),(0,c.createElement)("br",null),(0,c.createElement)("br",null),(0,c.createElement)(N.Button,{variant:"link",onClick:()=>{e()}},W)):null},X=(0,i.__)("Columns","woocommerce"),ee=(0,i.__)("Responsive","woocommerce"),te=(0,i.__)("Automatically adjust the number of columns to better fit smaller screens.","woocommerce"),oe=e=>{const{type:t,columns:o,shrinkColumns:r}=e.displayLayout,n="flex"===t,a=$(),l=()=>{e.setAttributes({displayLayout:a})};return n?(0,c.createElement)(c.Fragment,null,(0,c.createElement)(N.__experimentalToolsPanelItem,{label:X,hasValue:()=>(null==a?void 0:a.columns)!==o,isShownByDefault:!0,onDeselect:l},(0,c.createElement)(N.RangeControl,{label:X,onChange:t=>e.setAttributes({displayLayout:{...e.displayLayout,columns:t}}),value:o,min:2,max:Math.max(6,o)})),(0,c.createElement)(N.__experimentalToolsPanelItem,{label:ee,hasValue:()=>(null==a?void 0:a.shrinkColumns)!==r,isShownByDefault:!0,onDeselect:l},(0,c.createElement)(N.ToggleControl,{checked:!!r,label:ee,help:te,onChange:t=>{e.setAttributes({displayLayout:{...e.displayLayout,shrinkColumns:t}})}}))):null},re=e=>!(e=>null===e)(e)&&e instanceof Object&&e.constructor===Object;function ne(e,t){return re(e)&&t in e}const ce=(0,i.__)("Inherit query from template","woocommerce"),ae=({setQueryAttribute:e,query:t})=>{const o=null==t?void 0:t.inherit,r=(0,g.select)("core/edit-site"),n=function(e,t){const o=(0,s.useRef)();return(0,s.useEffect)((()=>{o.current===e||t&&!t(e,o.current)||(o.current=e)}),[e,t]),o.current}(t,(e=>!1===(null==e?void 0:e.inherit))),a=(0,s.useMemo)((()=>R()),[]);return(e=>{if(re(e)){const t=e.getEditedPostType();return"wp_template"===t||"wp_template_part"===t}return!1})(r)?(0,c.createElement)(N.__experimentalToolsPanelItem,{label:ce,hasValue:()=>o!==a,isShownByDefault:!0,onDeselect:()=>{e({inherit:a})}},(0,c.createElement)(N.ToggleControl,{className:"wc-block-product-collection__inherit-query-control",label:ce,help:(0,i.__)("Toggle to use the global query context that is set with the current template, such as an archive or search. Disable to customize the settings independently.","woocommerce"),checked:!!o,onChange:t=>{e(t?{...M,inherit:t}:{...M,...n,inherit:t})}})):null},le=[{label:(0,i.__)("A → Z","woocommerce"),value:"title/asc"},{label:(0,i.__)("Z → A","woocommerce"),value:"title/desc"},{label:(0,i.__)("Newest to oldest","woocommerce"),value:"date/desc"},{label:(0,i.__)("Oldest to newest","woocommerce"),value:"date/asc"},{value:"popularity/desc",label:(0,i.__)("Best Selling","woocommerce")},{value:"rating/desc",label:(0,i.__)("Top Rated","woocommerce")}],se=e=>{const{query:t,setQueryAttribute:o}=e,{order:r,orderBy:n}=t,a=G(t);return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Order by","woocommerce"),hasValue:()=>r!==(null==a?void 0:a.order)||n!==(null==a?void 0:a.orderBy),isShownByDefault:!0,onDeselect:()=>{o(a)}},(0,c.createElement)(N.SelectControl,{value:`${n}/${r}`,options:le,label:(0,i.__)("Order by","woocommerce"),onChange:e=>{const[t,r]=e.split("/");o({order:r,orderBy:t})}}))},ie=e=>{const{query:t,setQueryAttribute:o}=e;return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("On Sale","woocommerce"),hasValue:()=>!0===t.woocommerceOnSale,isShownByDefault:!0,onDeselect:()=>{o({woocommerceOnSale:!1})}},(0,c.createElement)(N.ToggleControl,{label:(0,i.__)("Show only products on sale","woocommerce"),checked:t.woocommerceOnSale||!1,onChange:e=>{o({woocommerceOnSale:e})}}))};var me=o(9262),ue=o.n(me);function de(e){var t;const o="string"==typeof e?e:e.value;return null===(t=Object.entries(q).find((([,e])=>e===o)))||void 0===t?void 0:t[0]}const pe=e=>{var t;const{query:o,setQueryAttribute:r}=e;return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Stock status","woocommerce"),hasValue:()=>!ue()(o.woocommerceStockStatus,F()),onDeselect:()=>{r({woocommerceStockStatus:F()})},isShownByDefault:!0},(0,c.createElement)(N.FormTokenField,{label:(0,i.__)("Stock status","woocommerce"),onChange:e=>{const t=e.map(de).filter(Boolean);r({woocommerceStockStatus:t})},suggestions:Object.values(q),validateInput:e=>Object.values(q).includes(e),value:(null==o||null===(t=o.woocommerceStockStatus)||void 0===t?void 0:t.map((e=>q[e])))||[],__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1}))},_e=e=>{const{query:t,setQueryAttribute:o}=e,[r,n]=(0,s.useState)(t.search),a=(0,l.useDebounce)((()=>{t.search!==r&&o({search:r})}),250);return(0,s.useEffect)((()=>(a(),a.cancel)),[r,a]),(0,c.createElement)(N.__experimentalToolsPanelItem,{hasValue:()=>!!r,label:(0,i.__)("Keyword","woocommerce"),onDeselect:()=>n(""),resetAllFilter:()=>n("")},(0,c.createElement)(N.TextControl,{label:(0,i.__)("Keyword","woocommerce"),value:r,onChange:n}))};var we=o(3849),ge=o.n(we);function be(e,t,o){const r=new Set(t.map((e=>e[o])));return e.filter((e=>!r.has(e[o])))}const he=window.wp.htmlEntities,ye={clear:(0,i.__)("Clear all selected items","woocommerce"),noItems:(0,i.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,i.__)("No results for %s","woocommerce"),search:(0,i.__)("Search for items","woocommerce"),selected:e=>(0,i.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,i._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,i.__)("Search results updated.","woocommerce")},Ee=(e,t=e)=>{const o=e.reduce(((e,t)=>{const o=t.parent||0;return e[o]||(e[o]=[]),e[o].push(t),e}),{}),r=("id",t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{}));const n=["0"],c=(e={})=>e.parent?[...c(r[e.parent]),e.name]:e.name?[e.name]:[],a=e=>e.map((e=>{const t=o[e.id];return n.push(""+e.id),{...e,breadcrumbs:c(r[e.parent]),children:t&&t.length?a(t):[]}})),l=a(o[0]||[]);return Object.entries(o).forEach((([e,t])=>{n.includes(e)||l.push(...a(t||[]))})),l},fe=(e,t)=>{if(!t)return e;const o=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(o).map(((e,t)=>o.test(e)?(0,c.createElement)("strong",{key:t},e):(0,c.createElement)(s.Fragment,{key:t},e)))},ve=({label:e})=>(0,c.createElement)("span",{className:"woocommerce-search-list__item-count"},e),ke=e=>{const{item:t,search:o}=e,r=t.breadcrumbs&&t.breadcrumbs.length;return(0,c.createElement)("span",{className:"woocommerce-search-list__item-label"},r?(0,c.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(n=t.breadcrumbs).length?n.slice(0,1).toString():2===n.length?n.slice(0,1).toString()+" › "+n.slice(-1).toString():n.slice(0,1).toString()+" … "+n.slice(-1).toString()):null,(0,c.createElement)("span",{className:"woocommerce-search-list__item-name"},fe((0,he.decodeEntities)(t.name),o)));var n},Se=({countLabel:e,className:t,depth:o=0,controlId:r="",item:n,isSelected:a,isSingle:l,onSelect:i,search:m="",selected:u,useExpandedPanelId:d,...p})=>{var _,w;const[g,b]=d,h=null!=e&&void 0!==n.count&&null!==n.count,y=!(null===(_=n.breadcrumbs)||void 0===_||!_.length),E=!(null===(w=n.children)||void 0===w||!w.length),f=g===n.id,v=ge()(["woocommerce-search-list__item",`depth-${o}`,t],{"has-breadcrumbs":y,"has-children":E,"has-count":h,"is-expanded":f,"is-radio-button":l}),k=p.name||`search-list-item-${r}`,S=`${k}-${n.id}`,C=(0,s.useCallback)((()=>{b(f?-1:Number(n.id))}),[f,n.id,b]);return E?(0,c.createElement)("div",{className:v,onClick:C,onKeyDown:e=>"Enter"===e.key||" "===e.key?C():null,role:"treeitem",tabIndex:0},l?(0,c.createElement)(c.Fragment,null,(0,c.createElement)("input",{type:"radio",id:S,name:k,value:n.value,onChange:i(n),onClick:e=>e.stopPropagation(),checked:a,className:"woocommerce-search-list__item-input",...p}),(0,c.createElement)(ke,{item:n,search:m}),h?(0,c.createElement)(ve,{label:e||n.count}):null):(0,c.createElement)(c.Fragment,null,(0,c.createElement)(N.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:a,...!a&&n.children.some((e=>u.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:fe((0,he.decodeEntities)(n.name),m),onChange:()=>{a?i(be(u,n.children,"id"))():i(function(e,t,o){const r=be(t,e,"id");return[...e,...r]}(u,n.children))()},onClick:e=>e.stopPropagation()}),h?(0,c.createElement)(ve,{label:e||n.count}):null)):(0,c.createElement)("label",{htmlFor:S,className:v},l?(0,c.createElement)(c.Fragment,null,(0,c.createElement)("input",{...p,type:"radio",id:S,name:k,value:n.value,onChange:i(n),checked:a,className:"woocommerce-search-list__item-input"}),(0,c.createElement)(ke,{item:n,search:m})):(0,c.createElement)(N.CheckboxControl,{...p,id:S,name:k,className:"woocommerce-search-list__item-input",value:(0,he.decodeEntities)(n.value),label:fe((0,he.decodeEntities)(n.name),m),onChange:i(n),checked:a}),h?(0,c.createElement)(ve,{label:e||n.count}):null)},Ce=Se;var xe=o(2720),Ie=o(837);o(1058);const Ne=({id:e,label:t,popoverContents:o,remove:r,screenReaderLabel:n,className:a=""})=>{const[m,d]=(0,s.useState)(!1),p=(0,l.useInstanceId)(Ne);if(n=n||t,!t)return null;t=(0,he.decodeEntities)(t);const _=ge()("woocommerce-tag",a,{"has-remove":!!r}),w=`woocommerce-tag__label-${p}`,g=(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"screen-reader-text"},n),(0,c.createElement)("span",{"aria-hidden":"true"},t));return(0,c.createElement)("span",{className:_},o?(0,c.createElement)(N.Button,{className:"woocommerce-tag__text",id:w,onClick:()=>d(!0)},g):(0,c.createElement)("span",{className:"woocommerce-tag__text",id:w},g),o&&m&&(0,c.createElement)(N.Popover,{onClose:()=>d(!1)},o),r&&(0,c.createElement)(N.Button,{className:"woocommerce-tag__remove",onClick:r(e),label:(0,i.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,i.__)("Remove %s","woocommerce"),t),"aria-describedby":w},(0,c.createElement)(u.Z,{icon:Ie.Z,size:20,className:"clear-icon",role:"img"})))},Pe=Ne;o(9658);const Te=e=>(0,c.createElement)(Ce,{...e}),Ae=e=>{const{list:t,selected:o,renderItem:r,depth:n=0,onSelect:a,instanceId:l,isSingle:i,search:m,useExpandedPanelId:u}=e,[d]=u;return t?(0,c.createElement)(s.Fragment,null,t.map((t=>{var p,_;const w=null!==(p=t.children)&&void 0!==p&&p.length&&!i?t.children.every((({id:e})=>o.find((t=>t.id===e)))):!!o.find((({id:e})=>e===t.id)),g=(null===(_=t.children)||void 0===_?void 0:_.length)&&d===t.id;return(0,c.createElement)(s.Fragment,{key:t.id},(0,c.createElement)("li",null,r({item:t,isSelected:w,onSelect:a,isSingle:i,selected:o,search:m,depth:n,useExpandedPanelId:u,controlId:l})),g?(0,c.createElement)(Ae,{...e,list:t.children,depth:n+1}):null)}))):null},Oe=({isLoading:e,isSingle:t,selected:o,messages:r,onChange:n,onRemove:a})=>{if(e||t||!o)return null;const l=o.length;return(0,c.createElement)("div",{className:"woocommerce-search-list__selected"},(0,c.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,c.createElement)("strong",null,r.selected(l)),l>0?(0,c.createElement)(N.Button,{variant:"link",isDestructive:!0,onClick:()=>n([]),"aria-label":r.clear},(0,i.__)("Clear all","woocommerce")):null),l>0?(0,c.createElement)("ul",null,o.map(((e,t)=>(0,c.createElement)("li",{key:t},(0,c.createElement)(Pe,{label:e.name,id:e.id,remove:a}))))):null)},Be=({filteredList:e,search:t,onSelect:o,instanceId:r,useExpandedPanelId:n,...a})=>{const{messages:l,renderItem:s,selected:m,isSingle:d}=a,p=s||Te;return 0===e.length?(0,c.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,c.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,c.createElement)(u.Z,{icon:xe.Z,role:"img"})),(0,c.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,i.sprintf)(l.noResults,t):l.noItems)):(0,c.createElement)("ul",{className:"woocommerce-search-list__list"},(0,c.createElement)(Ae,{useExpandedPanelId:n,list:e,selected:m,renderItem:p,onSelect:o,instanceId:r,isSingle:d,search:t}))},Le=e=>{const{className:t="",isCompact:o,isHierarchical:r,isLoading:n,isSingle:a,list:m,messages:u=ye,onChange:d,onSearch:p,selected:_,type:w="text",debouncedSpeak:g}=e,[b,h]=(0,s.useState)(""),y=(0,s.useState)(-1),E=(0,l.useInstanceId)(Le),f=(0,s.useMemo)((()=>({...ye,...u})),[u]),v=(0,s.useMemo)((()=>((e,t,o)=>{if(!t)return o?Ee(e):e;const r=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),n=e.map((e=>!!r.test(e.name)&&e)).filter(Boolean);return o?Ee(n,e):n})(m,b,r)),[m,b,r]);(0,s.useEffect)((()=>{g&&g(f.updated)}),[g,f]),(0,s.useEffect)((()=>{"function"==typeof p&&p(b)}),[b,p]);const k=(0,s.useCallback)((e=>()=>{a&&d([]);const t=_.findIndex((({id:t})=>t===e));d([..._.slice(0,t),..._.slice(t+1)])}),[a,_,d]),S=(0,s.useCallback)((e=>()=>{Array.isArray(e)?d(e):-1===_.findIndex((({id:t})=>t===e.id))?d(a?[e]:[..._,e]):k(e.id)()}),[a,k,d,_]),C=(0,s.useCallback)((e=>{const[t]=_.filter((t=>!e.find((e=>t.id===e.id))));k(t.id)()}),[k,_]);return(0,c.createElement)("div",{className:ge()("woocommerce-search-list",t,{"is-compact":o,"is-loading":n,"is-token":"token"===w})},"text"===w&&(0,c.createElement)(Oe,{...e,onRemove:k,messages:f}),(0,c.createElement)("div",{className:"woocommerce-search-list__search"},"text"===w?(0,c.createElement)(N.TextControl,{label:f.search,type:"search",value:b,onChange:e=>h(e)}):(0,c.createElement)(N.FormTokenField,{disabled:n,label:f.search,onChange:C,onInputChange:e=>h(e),suggestions:[],__experimentalValidateInput:()=>!1,value:n?[(0,i.__)("Loading…","woocommerce")]:_.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),n?(0,c.createElement)("div",{className:"woocommerce-search-list__list"},(0,c.createElement)(N.Spinner,null)):(0,c.createElement)(Be,{...e,search:b,filteredList:v,messages:f,onSelect:S,instanceId:E,useExpandedPanelId:y}))},Re=((0,N.withSpokenMessages)(Le),window.wp.url),qe=window.wp.apiFetch;var De,Fe,Me,je,Ge,$e,Ve,He,Qe,Ze,ze=o.n(qe);const Ke=(0,b.getSetting)("wcBlocksConfig",{buildPhase:1,pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),Je=(Ke.pluginUrl,Ke.pluginUrl,Ke.buildPhase,null===(De=b.STORE_PAGES.shop)||void 0===De||De.permalink,null===(Fe=b.STORE_PAGES.checkout)||void 0===Fe||Fe.id,null===(Me=b.STORE_PAGES.checkout)||void 0===Me||Me.permalink,null===(je=b.STORE_PAGES.privacy)||void 0===je||je.permalink,null===(Ge=b.STORE_PAGES.privacy)||void 0===Ge||Ge.title,null===($e=b.STORE_PAGES.terms)||void 0===$e||$e.permalink,null===(Ve=b.STORE_PAGES.terms)||void 0===Ve||Ve.title,null===(He=b.STORE_PAGES.cart)||void 0===He||He.id,null===(Qe=b.STORE_PAGES.cart)||void 0===Qe||Qe.permalink,null!==(Ze=b.STORE_PAGES.myaccount)&&void 0!==Ze&&Ze.permalink?b.STORE_PAGES.myaccount.permalink:(0,b.getSetting)("wpLoginUrl","/wp-login.php"),(0,b.getSetting)("localPickupEnabled",!1),(0,b.getSetting)("countries",{})),Ue=(0,b.getSetting)("countryData",{}),We=(Object.fromEntries(Object.keys(Ue).filter((e=>!0===Ue[e].allowBilling)).map((e=>[e,Je[e]||""]))),Object.fromEntries(Object.keys(Ue).filter((e=>!0===Ue[e].allowBilling)).map((e=>[e,Ue[e].states||[]]))),Object.fromEntries(Object.keys(Ue).filter((e=>!0===Ue[e].allowShipping)).map((e=>[e,Je[e]||""]))),Object.fromEntries(Object.keys(Ue).filter((e=>!0===Ue[e].allowShipping)).map((e=>[e,Ue[e].states||[]]))),Object.fromEntries(Object.keys(Ue).map((e=>[e,Ue[e].locale||[]]))),{address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],additional:[]}),Ye=((0,b.getSetting)("addressFieldsLocations",We).address,(0,b.getSetting)("addressFieldsLocations",We).contact,(0,b.getSetting)("addressFieldsLocations",We).additional,(e,t)=>{const o=new Map;return e.filter((e=>{const r=t(e);return!o.has(r)&&(o.set(r,e),!0)}))}),Xe=e=>ze()({path:`wc/store/v1/products/attributes/${e}/terms`});const et=window.wp.escapeHtml,tt=({error:e})=>(0,c.createElement)("div",{className:"wc-block-error-message"},(({message:e,type:t})=>e?"general"===t?(0,c.createElement)("span",null,(0,i.__)("The following error was returned","woocommerce"),(0,c.createElement)("br",null),(0,c.createElement)("code",null,(0,et.escapeHTML)(e))):"api"===t?(0,c.createElement)("span",null,(0,i.__)("The following error was returned from the API","woocommerce"),(0,c.createElement)("br",null),(0,c.createElement)("code",null,(0,et.escapeHTML)(e))):e:(0,i.__)("An error has prevented the block from being updated.","woocommerce"))(e)),ot=({className:e,item:t,isSelected:o,isLoading:r,onSelect:n,disabled:a,...l})=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)(Se,{...l,key:t.id,className:e,isSelected:o,item:t,onSelect:n,disabled:a}),o&&r&&(0,c.createElement)("div",{key:"loading",className:ge()("woocommerce-search-list__item","woocommerce-product-attributes__item","depth-1","is-loading","is-not-active")},(0,c.createElement)(N.Spinner,null))),rt=((0,b.getSetting)("attributes",[]).reduce(((e,t)=>{const o=(r=t)&&r.attribute_name?{id:parseInt(r.attribute_id,10),name:r.attribute_name,taxonomy:"pa_"+r.attribute_name,label:r.attribute_label}:null;var r;return o&&o.id&&e.push(o),e}),[]),e=>{const{count:t,id:o,name:r,parent:n}=e;return{count:t,id:o,name:r,parent:n,breadcrumbs:[],children:[],value:(c=e,ne(c,"count")&&ne(c,"description")&&ne(c,"id")&&ne(c,"name")&&ne(c,"parent")&&ne(c,"slug")&&"number"==typeof c.count&&"string"==typeof c.description&&"number"==typeof c.id&&"string"==typeof c.name&&"number"==typeof c.parent&&"string"==typeof c.slug?e.attr_slug:"")};var c});o(5555);const nt=(0,l.withInstanceId)((({onChange:e,onOperatorChange:t,instanceId:o,isCompact:r=!1,messages:n={},operator:a="any",selected:l,type:m="text"})=>{const{errorLoadingAttributes:u,isLoadingAttributes:d,productsAttributes:p}=function(e){const[t,o]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1),[c,a]=(0,s.useState)([]),l=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{if(e&&!r&&!l.current)return async function(){n(!0);try{const e=await ze()({path:"wc/store/v1/products/attributes"}),t=[];for(const o of e){const e=await Xe(o.id);t.push({...o,parent:0,terms:e.map((e=>({...e,attr_slug:o.taxonomy,parent:o.id})))})}a(t),l.current=!0}catch(e){e instanceof Error&&o(await(async e=>{if(!("json"in e))return{message:e.message,type:e.type||"general"};try{const t=await e.json();return{message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}})(e))}finally{n(!1)}}(),()=>{l.current=!0}}),[r,e]),{errorLoadingAttributes:t,isLoadingAttributes:r,productsAttributes:c}}(!0),_=p.reduce(((e,t)=>{const{terms:o,...r}=t;return[...e,rt(r),...o.map(rt)]}),[]);return n={clear:(0,i.__)("Clear all product attributes","woocommerce"),noItems:(0,i.__)("Your store doesn't have any product attributes.","woocommerce"),search:(0,i.__)("Search for product attributes","woocommerce"),selected:e=>(0,i.sprintf)(/* translators: %d is the count of attributes selected. */ /* translators: %d is the count of attributes selected. */
(0,i._n)("%d attribute selected","%d attributes selected",e,"woocommerce"),e),updated:(0,i.__)("Product attribute search results updated.","woocommerce"),...n},u?(0,c.createElement)(tt,{error:u}):(0,c.createElement)(c.Fragment,null,(0,c.createElement)(Le,{className:"woocommerce-product-attributes",isCompact:r,isHierarchical:!0,isLoading:d,isSingle:!1,list:_,messages:n,onChange:e,renderItem:e=>{const{item:t,search:r,depth:n=0}=e,a=t.count||0,l=["woocommerce-product-attributes__item","woocommerce-search-list__item",{"is-searching":r.length>0,"is-skip-level":0===n&&0!==t.parent}];if(!t.breadcrumbs.length)return(0,c.createElement)(ot,{...e,className:ge()(l),item:t,isLoading:d,disabled:0===t.count,name:`attributes-${o}`,countLabel:(0,i.sprintf)(/* translators: %d is the count of terms. */ /* translators: %d is the count of terms. */
(0,i._n)("%d term","%d terms",a,"woocommerce"),a),"aria-label":(0,i.sprintf)(/* translators: %1$s is the item name, %2$d is the count of terms for the item. */ /* translators: %1$s is the item name, %2$d is the count of terms for the item. */
(0,i._n)("%1$s, has %2$d term","%1$s, has %2$d terms",a,"woocommerce"),t.name,a)});const s=`${t.breadcrumbs[0]}: ${t.name}`;return(0,c.createElement)(Se,{...e,name:`terms-${o}`,className:ge()(...l,"has-count"),countLabel:(0,i.sprintf)(/* translators: %d is the count of products. */ /* translators: %d is the count of products. */
(0,i._n)("%d product","%d products",a,"woocommerce"),a),"aria-label":(0,i.sprintf)(/* translators: %1$s is the attribute name, %2$d is the count of products for that attribute. */ /* translators: %1$s is the attribute name, %2$d is the count of products for that attribute. */
(0,i._n)("%1$s, has %2$d product","%1$s, has %2$d products",a,"woocommerce"),s,a)})},selected:l.map((({id:e})=>_.find((t=>t.id===e)))).filter(Boolean),type:m}),!!t&&(0,c.createElement)("div",{hidden:l.length<2},(0,c.createElement)(N.SelectControl,{className:"woocommerce-product-attributes__operator",label:(0,i.__)("Display products matching","woocommerce"),help:(0,i.__)("Pick at least two attributes to use this setting.","woocommerce"),value:a,onChange:t,options:[{label:(0,i.__)("Any selected attributes","woocommerce"),value:"any"},{label:(0,i.__)("All selected attributes","woocommerce"),value:"all"}]})))})),ct=`${b.ADMIN_URL}edit.php?post_type=product&page=product_attributes`,at=({query:e,setQueryAttribute:t})=>{const o=e.woocommerceAttributes||[],r=null==o?void 0:o.map((({termId:e})=>({id:e})));return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Product Attributes","woocommerce"),hasValue:()=>!(null==o||!o.length)},(0,c.createElement)(nt,{messages:{search:(0,i.__)("Attributes","woocommerce")},selected:r||[],onChange:e=>{const o=e.map((({id:e,value:t})=>({termId:e,taxonomy:t})));t({woocommerceAttributes:o})},operator:"any",isCompact:!0,type:"token"}),(0,c.createElement)(N.ExternalLink,{className:"wc-block-editor-product-collection-panel__manage-attributes-link",href:ct},(0,i.__)("Manage attributes","woocommerce")))},lt=window.wp.coreData,st=[],it={order:"asc",_fields:"id,name,slug",context:"view"},mt=(e,t)=>(null==e?void 0:e.id)||t.get(e)||t.get(e.toLocaleLowerCase()),ut=(e,t,o)=>1===o.get(e)?e:`${e} - ${t}`,dt=({taxonomy:e,termIds:t,onChange:o})=>{const[r,n]=(0,s.useState)(void 0),a=(0,s.useRef)(st),i=(0,s.useRef)(st),m=(0,l.useDebounce)(n,250),{termIdToNameMap:u,termNameToIdMap:d,isResolving:p}=(e=>{const{records:t,isResolving:o}=(0,lt.useEntityRecords)("taxonomy",e.slug,{...it});return(0,s.useMemo)((()=>{const e=new Map,r=new Map;if(!t)return{termIdToNameMap:e,termNameToIdMap:r,isResolving:o};const n=(e=>e.reduce(((e,t)=>{const o=t.name;return e.has(o)?e.set(o,e.get(o)+1):e.set(o,1),e}),new Map))(t);for(const o of t){const t=o.id,c=o.name,a=ut(c,o.slug,n);e.set(t,a),r.set(a,t),r.set(a.toLocaleLowerCase(),t)}return{termIdToNameMap:e,termNameToIdMap:r,isResolving:o}}),[t,o])})(e),{records:_,hasResolved:w}=(0,lt.useEntityRecords)("taxonomy",e.slug,{...it,search:r,orderby:"name",exclude:t,per_page:20},{enabled:void 0!==r});a.current=(0,s.useMemo)((()=>w?_.map((e=>u.get(e.id)||e.name)):a.current),[w,_,u]);const{records:g,hasResolved:b}=(0,lt.useEntityRecords)("taxonomy",e.slug,{...it,include:t},{enabled:(null==t?void 0:t.length)>0});return i.current=(0,s.useMemo)((()=>!1===b?i.current:g&&t.length?g.map((({id:e,name:t})=>({id:e,value:u.get(e)||t}))):st),[g,b,u,t]),(0,c.createElement)("div",{className:"wc-block-editor-product-collection-inspector__taxonomy-control"},(0,c.createElement)(N.FormTokenField,{label:e.name,value:i.current,onInputChange:m,suggestions:a.current,onChange:e=>{const t=[];for(const o of e){const e=mt(o,d);e&&t.push(e)}o(t)},disabled:p,__experimentalShowHowTo:!1,displayTransform:e=>(0,he.decodeEntities)(e)||""}))},pt=function({setQueryAttribute:e,query:t}){const{taxQuery:o}=t,r=(0,g.useSelect)((e=>{const{getTaxonomies:t}=e(lt.store);return t({type:"product",per_page:-1,context:"view"})}),[]);return r&&0!==r.length?(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Taxonomies","woocommerce"),hasValue:()=>Object.values(o||{}).some((e=>!!e.length)),onDeselect:()=>e({taxQuery:{}})},r.map((t=>{const r=(null==o?void 0:o[t.slug])||[];return(0,c.createElement)(dt,{key:t.slug,taxonomy:t,termIds:r,onChange:r=>e({taxQuery:{...o,[t.slug]:r}})})}))):null},_t=({query:e,setQueryAttribute:t})=>{const o=e.woocommerceHandPickedProducts,{productsMap:r,productsList:n}=function(){const[e,t]=(0,s.useState)(new Map),[o,r]=(0,s.useState)([]);return(0,s.useEffect)((()=>{(({selected:e=[],search:t="",queryArgs:o={}})=>{const r=(({selected:e=[],search:t="",queryArgs:o={}})=>{const r=Ke.productCount>100,n={per_page:r?100:0,catalog_visibility:"any",search:t,orderby:"title",order:"asc"},c=[(0,Re.addQueryArgs)("/wc/store/v1/products",{...n,...o})];return r&&e.length&&c.push((0,Re.addQueryArgs)("/wc/store/v1/products",{catalog_visibility:"any",include:e,per_page:0})),c})({selected:e,search:t,queryArgs:o});return Promise.all(r.map((e=>ze()({path:e})))).then((e=>{const t=e.flat(),o=Ye(t,(e=>e.id));return o.map((e=>({...e,parent:0})))})).catch((e=>{throw e}))})({selected:[]}).then((e=>{const o=new Map;e.forEach((e=>{o.set(e.id,e),o.set(e.name,e)})),r(e),t(o)}))}),[]),{productsMap:e,productsList:o}}(),a=(0,s.useCallback)((e=>{const o=e.reduce(((e,t)=>{const o=r.get(t)||r.get(Number(t));return o&&e.add(String(o.id)),e}),new Set);t({woocommerceHandPickedProducts:Array.from(o)})}),[t,r]),l=(0,s.useMemo)((()=>n.filter((e=>!(null!=o&&o.includes(String(e.id))))).map((e=>e.name))),[n,o]);return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Hand-picked Products","woocommerce"),hasValue:()=>!(null==o||!o.length),onDeselect:()=>{t({woocommerceHandPickedProducts:[]})}},(0,c.createElement)(N.FormTokenField,{disabled:!r.size,displayTransform:e=>{const t=Number(e);if(Number.isNaN(t))return(0,he.decodeEntities)(e)||"";const o=r.get(t);return(0,he.decodeEntities)(null==o?void 0:o.name)||""},label:(0,i.__)("Hand-picked Products","woocommerce"),onChange:a,suggestions:l,__experimentalValidateInput:e=>r.has(e),value:r.size?o||[]:[(0,i.__)("Loading…","woocommerce")],__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1}))},wt=e=>{switch(e){case C.GRID:return(0,i.__)("Display products using rows and columns.","woocommerce");case C.STACK:return(0,i.__)("Display products in a single column.","woocommerce");default:return""}},gt=C.GRID,bt=e=>{const{type:t,columns:o,shrinkColumns:r}=e.displayLayout,n=t=>{e.setAttributes({displayLayout:{type:t,columns:o,shrinkColumns:r}})};return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Layout","woocommerce"),hasValue:()=>t!==gt,isShownByDefault:!0,onDeselect:()=>{n(C.GRID)}},(0,c.createElement)(N.__experimentalToggleGroupControl,{label:(0,i.__)("Layout","woocommerce"),isBlock:!0,onChange:e=>{n(e)},help:wt(t),value:t},(0,c.createElement)(N.__experimentalToggleGroupControlOption,{value:C.STACK,label:(0,i.__)("Stack","woocommerce")}),(0,c.createElement)(N.__experimentalToggleGroupControlOption,{value:C.GRID,label:(0,i.__)("Grid","woocommerce")})))},ht=e=>{const{query:t,setQueryAttribute:o}=e;return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Featured","woocommerce"),hasValue:()=>!0===t.featured,onDeselect:()=>{o({featured:!1})}},(0,c.createElement)(N.BaseControl,{id:"product-collection-featured-products-control",label:(0,i.__)("Featured","woocommerce")},(0,c.createElement)(N.ToggleControl,{label:(0,i.__)("Show only featured products","woocommerce"),checked:t.featured||!1,onChange:e=>{o({featured:e})}})))},yt=e=>{const{query:t,setQueryAttribute:o}=e,{timeFrame:r}=t;return(0,c.createElement)(N.__experimentalToolsPanelItem,{label:(0,i.__)("Created","woocommerce"),hasValue:()=>(null==r?void 0:r.operator)&&(null==r?void 0:r.value),onDeselect:()=>{o({timeFrame:void 0})}},(0,c.createElement)(N.Flex,{direction:"column",gap:3},(0,c.createElement)(N.FlexItem,null,(0,c.createElement)(N.__experimentalToggleGroupControl,{label:(0,i.__)("Created","woocommerce"),isBlock:!0,onChange:e=>{o({timeFrame:{...r,operator:e}})},value:(null==r?void 0:r.operator)||x.IN},(0,c.createElement)(N.__experimentalToggleGroupControlOption,{value:x.IN,label:(0,i._x)("Within","Product Collection query operator","woocommerce")}),(0,c.createElement)(N.__experimentalToggleGroupControlOption,{value:x.NOT_IN,label:(0,i._x)("Before","Product Collection query operator","woocommerce")}))),(0,c.createElement)(N.FlexItem,null,(0,c.createElement)(N.RadioControl,{onChange:e=>{o({timeFrame:{operator:x.IN,...r,value:e}})},options:[{label:"last 24 hours",value:"-1 day"},{label:"last 7 days",value:"-7 days"},{label:"last 30 days",value:"-30 days"},{label:"last 3 months",value:"-3 months"}],selected:null==r?void 0:r.value}))))},Et=e=>{const t=e.attributes.query,o=!1===(null==t?void 0:t.inherit),r=(0,s.useMemo)((()=>L.bind(null,e)),[e]),n={setAttributes:e.setAttributes,displayLayout:e.attributes.displayLayout},l={setQueryAttribute:r,query:t};return(0,c.createElement)(a.InspectorControls,null,(0,c.createElement)(N.__experimentalToolsPanel,{label:(0,i.__)("Settings","woocommerce"),resetAll:()=>{const t=(o=e.attributes,{displayLayout:$(),query:G(o.query)});var o;e.setAttributes(t)}},(0,c.createElement)(bt,{...n}),(0,c.createElement)(oe,{...n}),(0,c.createElement)(ae,{...l}),o?(0,c.createElement)(se,{...l}):null),o?(0,c.createElement)(N.__experimentalToolsPanel,{label:(0,i.__)("Filters","woocommerce"),resetAll:t=>{L(e,V),t.forEach((e=>e()))},className:"wc-block-editor-product-collection-inspector-toolspanel__filters"},(0,c.createElement)(ie,{...l}),(0,c.createElement)(pe,{...l}),(0,c.createElement)(_t,{...l}),(0,c.createElement)(_e,{...l}),(0,c.createElement)(at,{...l}),(0,c.createElement)(pt,{...l}),(0,c.createElement)(ht,{...l}),(0,c.createElement)(yt,{...l})):null,(0,c.createElement)(w,null))};(()=>{if((0,b.isWpVersion)("6.1",">=")){const{status:e}=k()}})();const ft=e=>{const t=e+2592e5;return Date.now()<t},vt=(e=0)=>e<=4;(0,m.addFilter)("editor.BlockEdit","woocommerce/product-collection",(e=>t=>{if(!(e=>e===n.name)(t.name))return(0,c.createElement)(e,{...t});const o=(e=>{const{attributes:t}=e,{convertedFromProducts:o}=t,{status:r,time:n,displayCount:c}=k();return o&&"notseen"===r&&ft(n)&&vt(c)})(t),r=(e=>{const{attributes:t}=e,{convertedFromProducts:o}=t,{status:r,time:n,displayCount:c}=k();return o&&("seen"===r||!ft(n)||!vt(c))})(t);return r&&t.setAttributes({convertedFromProducts:!1}),(0,c.createElement)(c.Fragment,null,o&&(0,c.createElement)(a.InspectorControls,null,(0,c.createElement)(Y,{revertMigration:J})),(0,c.createElement)(e,{...t}))})),o(2040);var kt=o(3187);const St=({onToggle:e})=>(0,c.createElement)(N.ToolbarButton,{icon:kt.Z,label:(0,i.__)("Display settings","woocommerce"),onClick:e}),Ct=({query:e,setQueryAttribute:t})=>{const o=e=>{const o=Number(e);!isNaN(o)&&o>=1&&o<=100&&t({perPage:o})},r=e=>{const o=Number(e);!isNaN(o)&&o>=0&&o<=100&&t({offset:o})},n=e=>{const o=Number(e);!isNaN(o)&&o>=0&&t({pages:o})},a={__unstableInputWidth:"60px",labelPosition:"edge",step:"1",isDragEnabled:!1};return(0,c.createElement)(N.ToolbarGroup,null,(0,c.createElement)(N.Dropdown,{contentClassName:"wc-block-editor-product-collection__display-settings",renderToggle:({onToggle:e})=>(0,c.createElement)(St,{onToggle:e}),renderContent:()=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)(N.__experimentalNumberControl,{...a,label:(0,i.__)("Items per Page","woocommerce"),min:1,max:100,onChange:o,value:e.perPage}),(0,c.createElement)(N.__experimentalNumberControl,{...a,label:(0,i.__)("Offset","woocommerce"),min:0,max:100,onChange:r,value:e.offset}),(0,c.createElement)(N.BaseControl,{help:(0,i.__)("Limit the pages you want to show, even if the query has more results. To show all pages use 0 (zero).","woocommerce"),id:"woocommerce-products-block__display-settings-pages"},(0,c.createElement)(N.__experimentalNumberControl,{...a,label:(0,i.__)("Max page to show","woocommerce"),min:0,onChange:n,value:e.pages})))}))};var xt=o(9315),It=o(567);const Nt=e=>{const{type:t,columns:o,shrinkColumns:r}=e.displayLayout,n=t=>{e.setAttributes({displayLayout:t})},a=[{icon:xt.Z,title:(0,i.__)("List view","woocommerce"),onClick:()=>n({type:C.STACK,columns:o,shrinkColumns:r}),isActive:t===C.STACK},{icon:It.Z,title:(0,i.__)("Grid view","woocommerce"),onClick:()=>n({type:C.GRID,columns:o,shrinkColumns:r}),isActive:t===C.GRID}];return(0,c.createElement)(N.ToolbarGroup,{controls:a})},Pt=e=>(0,c.createElement)(N.ToolbarGroup,null,(0,c.createElement)(N.ToolbarButton,{onClick:e.openPatternSelectionModal},(0,i.__)("Choose pattern","woocommerce"))),Tt="woocommerce/product-collection",At=e=>{const{clientId:t,query:o}=e,{replaceBlock:n,selectBlock:l}=(0,g.useDispatch)(a.store),s=e=>{const t=e.innerBlocks.map(s);if(e.name===Tt){const{perPage:n,offset:c,pages:a}=e.attributes.query,l={...o,perPage:n,offset:c,pages:a};return(0,r.cloneBlock)(e,{query:l},t)}return(0,r.cloneBlock)(e,{},t)},m=(0,g.useSelect)((e=>{const{getBlockRootClientId:o,getPatternsByBlockTypes:r}=e(a.store),n=o(t);return r(Tt,n)}),[Tt,t]);return(0,c.createElement)(N.Modal,{overlayClassName:"wc-blocks-product-collection__selection-modal",title:(0,i.__)("Choose a pattern","woocommerce"),onRequestClose:e.closePatternSelectionModal,isFullScreen:!0},(0,c.createElement)("div",{className:"wc-blocks-product-collection__selection-content"},(0,c.createElement)(a.__experimentalBlockPatternsList,{blockPatterns:m,shownPatterns:m,onClickPattern:(e,o)=>{const r=o.map(s);n(t,r),l(r[0].clientId)}})))};function Ot(e){const[t,o]=(0,s.useState)(!1),{attributes:r,clientId:n,setAttributes:l}=e,{query:i,displayLayout:m}=r,u=(0,s.useMemo)((()=>L.bind(null,e)),[e]);return(0,c.createElement)(a.BlockControls,null,(0,c.createElement)(Pt,{openPatternSelectionModal:()=>o(!0)}),!i.inherit&&(0,c.createElement)(c.Fragment,null,(0,c.createElement)(Ct,{query:i,setQueryAttribute:u}),(0,c.createElement)(Nt,{displayLayout:m,setAttributes:l})),t&&(0,c.createElement)(At,{clientId:n,query:i,closePatternSelectionModal:()=>o(!1)}))}const Bt=e=>{var t;const{attributes:o,setAttributes:r}=e,{queryId:n}=o,i=(0,a.useBlockProps)(),m=(0,a.useInnerBlocksProps)(i,{template:H}),u=(0,l.useInstanceId)(Bt);return(0,s.useEffect)((()=>{Number.isFinite(n)||r({queryId:Number(u)})}),[n,u,r]),(0,s.useEffect)((()=>{r({...j,query:{...j.query,inherit:R()},...o})}),[r]),"boolean"!=typeof(null==o||null===(t=o.query)||void 0===t?void 0:t.inherit)?null:(0,c.createElement)("div",{...i},(0,c.createElement)(Et,{...e}),(0,c.createElement)(Ot,{...e}),(0,c.createElement)("div",{...m}))},Lt=Bt;var Rt=o(7255);const qt=(0,i.__)("Product Summary","woocommerce"),Dt=((0,c.createElement)(u.Z,{icon:Rt.Z,className:"wc-block-editor-components-block-icon"}),(0,i.__)("Display a short description about a product.","woocommerce")),Ft=`${n.name}/product-summary`;(0,r.registerBlockType)(n,{icon:()=>(0,c.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,c.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 11H5C4.72386 11 4.5 11.2239 4.5 11.5V17.5C4.5 17.7761 4.72386 18 5 18H19C19.2761 18 19.5 17.7761 19.5 17.5V11.5C19.5 11.2239 19.2761 11 19 11ZM5 9.5H19C20.1046 9.5 21 10.3954 21 11.5V17.5C21 18.6046 20.1046 19.5 19 19.5H5C3.89543 19.5 3 18.6046 3 17.5V11.5C3 10.3954 3.89543 9.5 5 9.5Z",fill:"currentColor"}),(0,c.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 7.5C18 7.77614 17.7761 8 17.5 8L6.5 8C6.22386 8 6 7.77614 6 7.5V7.5C6 7.22386 6.22386 7 6.5 7L17.5 7C17.7761 7 18 7.22386 18 7.5V7.5Z",fill:"currentColor"}),(0,c.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 5C16 5.27614 15.7761 5.5 15.5 5.5L8.5 5.5C8.22386 5.5 8 5.27614 8 5V5C8 4.72386 8.22386 4.5 8.5 4.5L15.5 4.5C15.7761 4.5 16 4.72386 16 5V5Z",fill:"currentColor"})),edit:Lt,save:function({attributes:{tagName:e="div"}}){const t=a.useBlockProps.save(),o=a.useInnerBlocksProps.save(t);return(0,c.createElement)(e,{...o})}}),T("core/post-excerpt",{blockDescription:Dt,blockIcon:(0,c.createElement)(N.Icon,{icon:Rt.Z}),blockTitle:qt,variationName:Ft}),T("core/post-title",{blockDescription:O,blockIcon:(0,c.createElement)(N.Icon,{icon:P.Z}),blockTitle:A,variationName:B})},2040:()=>{},1612:()=>{},5555:()=>{},9658:()=>{},1058:()=>{},9196:e=>{"use strict";e.exports=window.React},4333:e=>{"use strict";e.exports=window.wp.compose},9307:e=>{"use strict";e.exports=window.wp.element},5736:e=>{"use strict";e.exports=window.wp.i18n},444:e=>{"use strict";e.exports=window.wp.primitives}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var c=o[e]={exports:{}};return t[e].call(c.exports,c,c.exports,r),c.exports}r.m=t,e=[],r.O=(t,o,n,c)=>{if(!o){var a=1/0;for(m=0;m<e.length;m++){for(var[o,n,c]=e[m],l=!0,s=0;s<o.length;s++)(!1&c||a>=c)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(l=!1,c<a&&(a=c));if(l){e.splice(m--,1);var i=n();void 0!==i&&(t=i)}}return t}c=c||0;for(var m=e.length;m>0&&e[m-1][2]>c;m--)e[m]=e[m-1];e[m]=[o,n,c]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=4603,(()=>{var e={4603:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,c,[a,l,s]=o,i=0;if(a.some((t=>0!==e[t]))){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(s)var m=s(r)}for(t&&t(o);i<a.length;i++)c=a[i],r.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return r.O(m)},o=self.webpackChunkwebpackWcBlocksJsonp=self.webpackChunkwebpackWcBlocksJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[2869],(()=>r(2249)));n=r.O(n),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-collection"]=n})();