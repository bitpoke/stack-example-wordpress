(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[3470],{9281:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9196);r(1753);const i=({children:e})=>(0,n.createElement)("div",{className:"wc-block-filter-title-placeholder"},e)},390:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(9196),i=r(5736),o=r(7608),c=r.n(o),s=r(711);r(2728);const l=({className:e,
/* translators: Reset button text for filters. */
label:t=(0,i.__)("Reset","woocommerce"),onClick:r,screenReaderLabel:o=(0,i.__)("Reset filter","woocommerce")})=>(0,n.createElement)("button",{className:c()("wc-block-components-filter-reset-button",e),onClick:r},(0,n.createElement)(s.Label,{label:t,screenReaderLabel:o}))},6977:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(9196),i=r(5736),o=r(7608),c=r.n(o),s=r(711);r(6099);const l=({className:e,isLoading:t,disabled:r,
/* translators: Submit button text for filters. */
label:o=(0,i.__)("Apply","woocommerce"),onClick:l,screenReaderLabel:a=(0,i.__)("Apply filter","woocommerce")})=>(0,n.createElement)("button",{type:"submit",className:c()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":t},e),disabled:r,onClick:l},(0,n.createElement)(s.Label,{label:o,screenReaderLabel:a}))},6621:(e,t,r)=>{"use strict";r.d(t,{d:()=>m});var n=r(9307),i=r(2600),o=r(6946),c=r(4167),s=r(9530),l=r(2785),a=r(1720),u=r(7218);const m=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:m,queryState:d,isEditor:p=!1})=>{let b=(0,u.s)();b=`${b}-collection-data`;const[_]=(0,l.$p)(b),[f,g]=(0,l.kX)("calculate_attribute_counts",[],b),[v,y]=(0,l.kX)("calculate_price_range",null,b),[h,w]=(0,l.kX)("calculate_stock_status_counts",null,b),[k,E]=(0,l.kX)("calculate_rating_counts",null,b),N=(0,s.s)(e||{}),S=(0,s.s)(t),F=(0,s.s)(r),x=(0,s.s)(m);(0,n.useEffect)((()=>{"object"==typeof N&&Object.keys(N).length&&(f.find((e=>(0,o.objectHasProp)(N,"taxonomy")&&e.taxonomy===N.taxonomy))||g([...f,N]))}),[N,f,g]),(0,n.useEffect)((()=>{v!==S&&void 0!==S&&y(S)}),[S,y,v]),(0,n.useEffect)((()=>{h!==F&&void 0!==F&&w(F)}),[F,w,h]),(0,n.useEffect)((()=>{k!==x&&void 0!==x&&E(x)}),[x,E,k]);const[C,R]=(0,n.useState)(p),[U]=(0,i.Nr)(C,200);C||R(!0);const L=(0,n.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,c.DY)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(_)),[_]);return(0,a.K)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...d,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...L},shouldSelect:U})}},1720:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});var n=r(4801),i=r(9818),o=r(9307),c=r(9530),s=r(5280),l=r(6946);const a=e=>{const{namespace:t,resourceName:r,resourceValues:a=[],query:u={},shouldSelect:m=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const d=(0,o.useRef)({results:[],isLoading:!0}),p=(0,c.s)(u),b=(0,c.s)(a),_=(0,s._)(),f=(0,i.useSelect)((e=>{if(!m)return null;const i=e(n.COLLECTIONS_STORE_KEY),o=[t,r,p,b],c=i.getCollectionError(...o);if(c){if(!(0,l.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");_(c)}return{results:i.getCollection(...o),isLoading:!i.hasFinishedResolution("getCollection",o)}}),[t,r,b,p,m]);return null!==f&&(d.current=f),d.current}},2785:(e,t,r)=>{"use strict";r.d(t,{$p:()=>s,kX:()=>l});var n=r(4801),i=r(9818),o=r(9307),c=(r(9127),r(7218));const s=e=>{const t=(0,c.s)();e=e||t;const r=(0,i.useSelect)((t=>t(n.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:s}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[r,(0,o.useCallback)((t=>{s(e,t)}),[e,s])]},l=(e,t,r)=>{const s=(0,c.s)();r=r||s;const l=(0,i.useSelect)((i=>i(n.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:a}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[l,(0,o.useCallback)((t=>{a(r,e,t)}),[r,e,a])]}},7218:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var n=r(9307);const i=(0,n.createContext)("page"),o=()=>(0,n.useContext)(i);i.Provider},8161:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(9307);function i(e,t){const r=(0,n.useRef)();return(0,n.useEffect)((()=>{r.current===e||t&&!t(e,r.current)||(r.current=e)}),[e,t]),r.current}},9530:(e,t,r)=>{"use strict";r.d(t,{s:()=>c});var n=r(9307),i=r(9127),o=r.n(i);function c(e){const t=(0,n.useRef)(e);return o()(e,t.current)||(t.current=e),t.current}},947:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var n=r(7608),i=r.n(n),o=r(6946),c=r(3392),s=r(172);const l=e=>{const t=(e=>{const t=(0,o.isObject)(e)?e:{style:{}};let r=t.style;return(0,o.isString)(r)&&(r=JSON.parse(r)||{}),(0,o.isObject)(r)||(r={}),{...t,style:r}})(e),r=(0,s.vc)(t),n=(0,s.l8)(t),l=(0,s.su)(t),a=(0,c.f)(t);return{className:i()(a.className,r.className,n.className,l.className),style:{...a.style,...r.style,...n.style,...l.style}}}},5280:(e,t,r)=>{"use strict";r.d(t,{_:()=>i});var n=r(9307);const i=()=>{const[,e]=(0,n.useState)();return(0,n.useCallback)((t=>{e((()=>{throw t}))}),[])}},3392:(e,t,r)=>{"use strict";r.d(t,{f:()=>i});var n=r(6946);const i=e=>{const t=(0,n.isObject)(e.style.typography)?e.style.typography:{},r=(0,n.isString)(t.fontFamily)?t.fontFamily:"";return{className:e.fontFamily?`has-${e.fontFamily}-font-family`:r,style:{fontSize:e.fontSize?`var(--wp--preset--font-size--${e.fontSize})`:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,textDecoration:t.textDecoration,textTransform:t.textTransform}}}},172:(e,t,r)=>{"use strict";r.d(t,{l8:()=>m,su:()=>d,vc:()=>u});var n=r(7608),i=r.n(n),o=r(7427),c=r(2289),s=r(6946);function l(e={}){const t={};return(0,c.getCSSRules)(e,{selector:""}).forEach((e=>{t[e.key]=e.value})),t}function a(e,t){return e&&t?`has-${(0,o.o)(t)}-${e}`:""}function u(e){var t,r,n,o,c,u,m;const{backgroundColor:d,textColor:p,gradient:b,style:_}=e,f=a("background-color",d),g=a("color",p),v=function(e){if(e)return`has-${e}-gradient-background`}(b),y=v||(null==_||null===(t=_.color)||void 0===t?void 0:t.gradient);return{className:i()(g,v,{[f]:!y&&!!f,"has-text-color":p||(null==_||null===(r=_.color)||void 0===r?void 0:r.text),"has-background":d||(null==_||null===(n=_.color)||void 0===n?void 0:n.background)||b||(null==_||null===(o=_.color)||void 0===o?void 0:o.gradient),"has-link-color":(0,s.isObject)(null==_||null===(c=_.elements)||void 0===c?void 0:c.link)?null==_||null===(u=_.elements)||void 0===u||null===(m=u.link)||void 0===m?void 0:m.color:void 0}),style:l({color:(null==_?void 0:_.color)||{}})}}function m(e){var t;const r=(null===(t=e.style)||void 0===t?void 0:t.border)||{};return{className:function(e){var t;const{borderColor:r,style:n}=e,o=r?a("border-color",r):"";return i()({"has-border-color":!!r||!(null==n||null===(t=n.border)||void 0===t||!t.color),[o]:!!o})}(e),style:l({border:r})}}function d(e){var t;return{className:void 0,style:l({spacing:(null===(t=e.style)||void 0===t?void 0:t.spacing)||{}})}}},4169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(9196),i=r(7608),o=r.n(i),c=r(947),s=r(6946),l=r(8161),a=r(2785),u=r(6621),m=r(9307),d=r(5736),p=r(711),b=r(2600);r(7507);const _=(e,t,r,n=1,i=!1)=>{let[o,c]=e;const s=e=>Number.isFinite(e);return s(o)||(o=t||0),s(c)||(c=r||n),s(t)&&t>o&&(o=t),s(r)&&r<=o&&(o=r-n),s(t)&&t>=c&&(c=t+n),s(r)&&r<c&&(c=r),!i&&o>=c&&(o=c-n),i&&c<=o&&(c=o+n),[o,c]};var f=r(6977);const g=({maxConstraint:e,minorUnit:t})=>({floatValue:r})=>void 0!==r&&r<=e/10**t&&r>0,v=({minConstraint:e,currentMaxValue:t,minorUnit:r})=>({floatValue:n})=>void 0!==n&&n>=e/10**r&&n<t/10**r;var y=r(390);const h=({minPrice:e,maxPrice:t,minConstraint:r,maxConstraint:i,onChange:c,step:l,currency:a,showInputFields:u=!0,showFilterButton:h=!1,inlineInput:w=!0,isLoading:k=!1,isUpdating:E=!1,isEditor:N=!1,onSubmit:S=(()=>{})})=>{const F=(0,m.useRef)(null),x=(0,m.useRef)(null),C=l||10**a.minorUnit,[R,U]=(0,m.useState)(e),[L,P]=(0,m.useState)(t),T=(0,m.useRef)(null),[A,I]=(0,m.useState)(0);(0,m.useEffect)((()=>{U(e)}),[e]),(0,m.useEffect)((()=>{P(t)}),[t]),(0,m.useLayoutEffect)((()=>{var e;w&&T.current&&I(null===(e=T.current)||void 0===e?void 0:e.offsetWidth)}),[w,I]);const O=(0,m.useMemo)((()=>isFinite(r)&&isFinite(i)),[r,i]),j=(0,m.useMemo)((()=>isFinite(e)&&isFinite(t)&&O?{"--low":(e-r)/(i-r)*100+"%","--high":(t-r)/(i-r)*100+"%"}:{"--low":"0%","--high":"100%"}),[e,t,r,i,O]),D=(0,m.useCallback)((e=>{if(k||!O||!F.current||!x.current)return;const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=F.current.offsetWidth,o=+F.current.value,c=x.current.offsetWidth,s=+x.current.value,l=n*(o/i),a=c*(s/i);Math.abs(r-l)>Math.abs(r-a)?(F.current.style.zIndex="20",x.current.style.zIndex="21"):(F.current.style.zIndex="21",x.current.style.zIndex="20")}),[k,i,O]),M=(0,m.useCallback)((n=>{const o=n.target.classList.contains("wc-block-price-filter__range-input--min"),s=+n.target.value,l=o?[Math.round(s/C)*C,t]:[e,Math.round(s/C)*C],a=_(l,r,i,C,o);c(a)}),[c,e,t,r,i,C]),B=(0,m.useCallback)((e=>{if(e.relatedTarget&&e.relatedTarget.classList&&e.relatedTarget.classList.contains("wc-block-price-filter__amount"))return;const t=e.target.classList.contains("wc-block-price-filter__amount--min");if(R>=L){const e=_([0,L],null,null,C,t);return c([parseInt(e[0],10),parseInt(e[1],10)])}const r=_([R,L],null,null,C,t);c(r)}),[c,C,R,L]),q=(0,b.y1)(S,600),Q=o()("wc-block-price-filter","wc-block-components-price-slider",u&&"wc-block-price-filter--has-input-fields",u&&"wc-block-components-price-slider--has-input-fields",h&&"wc-block-price-filter--has-filter-button",h&&"wc-block-components-price-slider--has-filter-button",!O&&"is-disabled",(w||A<=300)&&"wc-block-components-price-slider--is-input-inline"),$=(0,s.isObject)(F.current)?F.current.ownerDocument.activeElement:void 0,Y=$&&$===F.current?C:1,V=$&&$===x.current?C:1,W=String(R/10**a.minorUnit),z=String(L/10**a.minorUnit),X=w&&A>300,H=(0,n.createElement)("div",{className:o()("wc-block-price-filter__range-input-wrapper","wc-block-components-price-slider__range-input-wrapper",{"is-loading":k&&E}),onMouseMove:D,onFocus:D},O&&(0,n.createElement)("div",{"aria-hidden":u},(0,n.createElement)("div",{className:"wc-block-price-filter__range-input-progress wc-block-components-price-slider__range-input-progress",style:j}),(0,n.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--min wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--min","aria-label":(0,d.__)("Filter products by minimum price","woocommerce"),"aria-valuetext":W,value:Number.isFinite(e)?e:r,onChange:M,step:Y,min:r,max:i,ref:F,disabled:k&&!O,tabIndex:u?-1:0}),(0,n.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--max wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--max","aria-label":(0,d.__)("Filter products by maximum price","woocommerce"),"aria-valuetext":z,value:Number.isFinite(t)?t:i,onChange:M,step:V,min:r,max:i,ref:x,disabled:k,tabIndex:u?-1:0}))),K=e=>`wc-block-price-filter__amount wc-block-price-filter__amount--${e} wc-block-form-text-input wc-block-components-price-slider__amount wc-block-components-price-slider__amount--${e}`,Z={currency:a,decimalScale:0},J={...Z,displayType:"input",allowNegative:!1,disabled:k||!O,onBlur:B};return(0,n.createElement)("div",{className:Q,ref:T},(!X||!u)&&H,u&&(0,n.createElement)("div",{className:"wc-block-price-filter__controls wc-block-components-price-slider__controls"},E?(0,n.createElement)("div",{className:"input-loading"}):(0,n.createElement)(p.FormattedMonetaryAmount,{...J,className:K("min"),"aria-label":(0,d.__)("Filter products by minimum price","woocommerce"),isAllowed:v({minConstraint:r,minorUnit:a.minorUnit,currentMaxValue:L}),onValueChange:e=>{e!==R&&U(e)},value:R}),X&&H,E?(0,n.createElement)("div",{className:"input-loading"}):(0,n.createElement)(p.FormattedMonetaryAmount,{...J,className:K("max"),"aria-label":(0,d.__)("Filter products by maximum price","woocommerce"),isAllowed:g({maxConstraint:i,minorUnit:a.minorUnit}),onValueChange:e=>{e!==L&&P(e)},value:L})),!u&&!E&&Number.isFinite(e)&&Number.isFinite(t)&&(0,n.createElement)("div",{className:"wc-block-price-filter__range-text wc-block-components-price-slider__range-text"},(0,n.createElement)(p.FormattedMonetaryAmount,{...Z,value:e}),(0,n.createElement)(p.FormattedMonetaryAmount,{...Z,value:t})),(0,n.createElement)("div",{className:"wc-block-components-price-slider__actions"},(N||!E&&(e!==r||t!==i))&&(0,n.createElement)(y.Z,{onClick:()=>{c([r,i]),q()},screenReaderLabel:(0,d.__)("Reset price filter","woocommerce")}),h&&(0,n.createElement)(f.Z,{className:"wc-block-price-filter__button wc-block-components-price-slider__button",isLoading:E,disabled:k||!O,onClick:S,screenReaderLabel:(0,d.__)("Apply price filter","woocommerce")})))};var w=r(9281),k=r(4293),E=r(4617),N=r(6483),S=r(4534);const F="ROUND_UP",x="ROUND_DOWN",C=(e,t,r)=>{const n=10*10**t;let i=null;const o=parseFloat(e);isNaN(o)||(r===F?i=Math.ceil(o/n)*n:r===x&&(i=Math.floor(o/n)*n));const c=(0,l.D)(i,Number.isFinite);return Number.isFinite(i)?i:c};r(9432);var R=r(9389);function U(e,t){return Number(e)*10**t}const L=({attributes:e,isEditor:t=!1})=>{const r=(0,R.Ah)(),i=(0,E.getSettingWithCoercion)("hasFilterableProducts",!1,s.isBoolean),o=(0,E.getSettingWithCoercion)("isRenderingPhpTemplate",!1,s.isBoolean),[c,d]=(0,m.useState)(!1),p=(0,S.re)("min_price"),_=(0,S.re)("max_price"),[f]=(0,a.$p)(),{results:g,isLoading:v}=(0,u.d)({queryPrices:!0,queryState:f,isEditor:t}),y=(0,k.getCurrencyFromPriceResponse)((0,s.objectHasProp)(g,"price_range")?g.price_range:void 0),[L,P]=(0,a.kX)("min_price"),[T,A]=(0,a.kX)("max_price"),[I,O]=(0,m.useState)(U(p,y.minorUnit)||null),[j,D]=(0,m.useState)(U(_,y.minorUnit)||null),{minConstraint:M,maxConstraint:B}=(({minPrice:e,maxPrice:t,minorUnit:r})=>({minConstraint:C(e||"",r,x),maxConstraint:C(t||"",r,F)}))({minPrice:(0,s.objectHasProp)(g,"price_range")&&(0,s.objectHasProp)(g.price_range,"min_price")&&(0,s.isString)(g.price_range.min_price)?g.price_range.min_price:void 0,maxPrice:(0,s.objectHasProp)(g,"price_range")&&(0,s.objectHasProp)(g.price_range,"max_price")&&(0,s.isString)(g.price_range.max_price)?g.price_range.max_price:void 0,minorUnit:y.minorUnit});(0,m.useEffect)((()=>{c||(P(U(p,y.minorUnit)),A(U(_,y.minorUnit)),d(!0))}),[y.minorUnit,c,_,p,A,P]);const[q,Q]=(0,m.useState)(v),$=(0,m.useCallback)(((e,t)=>{const r=t>=Number(B)?void 0:t,n=e<=Number(M)?void 0:e;if(window){const e=function(e,t){const r={};for(const[e,n]of Object.entries(t))n?r[e]=n.toString():delete r[e];const n=(0,N.removeQueryArgs)(e,...Object.keys(t));return(0,N.addQueryArgs)(n,r)}(window.location.href,{min_price:n/10**y.minorUnit,max_price:r/10**y.minorUnit});window.location.href!==e&&(0,S.X7)(e)}P(n),A(r)}),[M,B,P,A,y.minorUnit]),Y=(0,b.y1)($,500),V=(0,m.useCallback)((t=>{Q(!0),t[0]!==I&&O(t[0]),t[1]!==j&&D(t[1]),o&&c&&!e.showFilterButton&&Y(t[0],t[1])}),[I,j,O,D,o,c,Y,e.showFilterButton]);(0,m.useEffect)((()=>{e.showFilterButton||o||Y(I,j)}),[I,j,e.showFilterButton,Y,o]);const W=(0,l.D)(L),z=(0,l.D)(T),X=(0,l.D)(M),H=(0,l.D)(B);if((0,m.useEffect)((()=>{(!Number.isFinite(I)||L!==W&&L!==I||M!==X&&M!==I)&&O(Number.isFinite(L)?L:M),(!Number.isFinite(j)||T!==z&&T!==j||B!==H&&B!==j)&&D(Number.isFinite(T)?T:B)}),[I,j,L,T,M,B,X,H,W,z]),!i)return r(!1),null;if(!v&&(null===M||null===B||M===B))return r(!1),null;const K=`h${e.headingLevel}`;r(!0),!v&&q&&Q(!1);const Z=(0,n.createElement)(K,{className:"wc-block-price-filter__title"},e.heading),J=v&&q?(0,n.createElement)(w.Z,null,Z):Z;return(0,n.createElement)(n.Fragment,null,!t&&e.heading&&J,(0,n.createElement)("div",{className:"wc-block-price-slider"},(0,n.createElement)(h,{minConstraint:M,maxConstraint:B,minPrice:I,maxPrice:j,currency:y,showInputFields:e.showInputFields,inlineInput:e.inlineInput,showFilterButton:e.showFilterButton,onChange:V,onSubmit:()=>$(I,j),isLoading:v,isUpdating:q,isEditor:t})))},P=JSON.parse('{"Y4":{"D8":{"Z":3}}}'),T=e=>{const t=(0,c.F)(e),r=(i=e,{heading:(0,s.isString)(null==i?void 0:i.heading)?i.heading:"",headingLevel:(0,s.isString)(null==i?void 0:i.headingLevel)&&parseInt(i.headingLevel,10)||P.Y4.D8.Z,showFilterButton:"true"===(null==i?void 0:i.showFilterButton),showInputFields:"false"!==(null==i?void 0:i.showInputFields),inlineInput:"true"===(null==i?void 0:i.inlineInput)});var i;return(0,n.createElement)("div",{className:o()((0,s.isString)(e.className)?e.className:"",t.className),style:t.style},(0,n.createElement)(L,{isEditor:!1,attributes:r}))}},4534:(e,t,r)=>{"use strict";r.d(t,{H9:()=>m,X7:()=>u,re:()=>a,w8:()=>l,zv:()=>s});var n=r(6483),i=r(4617),o=r(6946);const c=(0,i.getSettingWithCoercion)("isRenderingPhpTemplate",!1,o.isBoolean),s="query_type_",l="filter_";function a(e){return window?(0,n.getQueryArg)(window.location.href,e):null}function u(e){if(c){const t=new URL(e);t.pathname=t.pathname.replace(/\/page\/[0-9]+/i,""),t.searchParams.delete("paged"),t.searchParams.forEach(((e,r)=>{r.match(/^query(?:-[0-9]+)?-page$/)&&t.searchParams.delete(r)})),window.location.href=t.href}else window.history.replaceState({},"",e)}const m=e=>{const t=(0,n.getQueryArgs)(e);return(0,n.addQueryArgs)(e,t)}},1753:()=>{},2728:()=>{},6099:()=>{},7507:()=>{},9432:()=>{}}]);