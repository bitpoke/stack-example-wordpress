(()=>{var e,t,o,r={6386:(e,t,o)=>{"use strict";o.r(t);const r=window.wp.blocks,n=window.wc.wcSettings;var l=o(1609),c=o(5573);o(2893);const s=window.wp.blockEditor;var a=o(6087),i=o(4717);const u=window.wc.wcTypes;var d=o(5574),p=o(923),m=o.n(p);function f(e){const t=(0,a.useRef)(e);return m()(e,t.current)||(t.current=e),t.current}const w=window.wc.wcBlocksData,k=window.wp.data,v=(0,a.createContext)("page"),y=()=>(0,a.useContext)(v),g=(v.Provider,e=>{const t=y();e=e||t;const o=(0,k.useSelect)((t=>t(w.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,k.useDispatch)(w.QUERY_STATE_STORE_KEY);return[o,(0,a.useCallback)((t=>{r(e,t)}),[e,r])]}),b=(e,t,o)=>{const r=y();o=o||r;const n=(0,k.useSelect)((r=>r(w.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:l}=(0,k.useDispatch)(w.QUERY_STATE_STORE_KEY);return[n,(0,a.useCallback)((t=>{l(o,e,t)}),[o,e,l])]},_=({queryAttribute:e,queryPrices:t,queryStock:o,queryRating:r,queryState:n,isEditor:l=!1})=>{let c=y();c=`${c}-collection-data`;const[s]=g(c),[p,m]=b("calculate_attribute_counts",[],c),[v,_]=b("calculate_price_range",null,c),[h,E]=b("calculate_stock_status_counts",null,c),[x,B]=b("calculate_rating_counts",null,c),C=f(e||{}),S=f(t),O=f(o),T=f(r);(0,a.useEffect)((()=>{"object"==typeof C&&Object.keys(C).length&&(p.find((e=>(0,u.objectHasProp)(C,"taxonomy")&&e.taxonomy===C.taxonomy))||m([...p,C]))}),[C,p,m]),(0,a.useEffect)((()=>{v!==S&&void 0!==S&&_(S)}),[S,_,v]),(0,a.useEffect)((()=>{h!==O&&void 0!==O&&E(O)}),[O,E,h]),(0,a.useEffect)((()=>{x!==T&&void 0!==T&&B(T)}),[T,B,x]);const[I,P]=(0,a.useState)(l),[j]=(0,i.d7)(I,200);I||P(!0);const q=(0,a.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,d.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(s)),[s]);return(e=>{const{namespace:t,resourceName:o,resourceValues:r=[],query:n={},shouldSelect:l=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const c=(0,a.useRef)({results:[],isLoading:!0}),s=f(n),i=f(r),d=(()=>{const[,e]=(0,a.useState)();return(0,a.useCallback)((t=>{e((()=>{throw t}))}),[])})(),p=(0,k.useSelect)((e=>{if(!l)return null;const r=e(w.COLLECTIONS_STORE_KEY),n=[t,o,s,i],c=r.getCollectionError(...n);if(c){if(!(0,u.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");d(c)}return{results:r.getCollection(...n),isLoading:!r.hasFinishedResolution("getCollection",n)}}),[t,o,i,s,l,d]);return null!==p&&(c.current=p),c.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...q},shouldSelect:j})};var h=o(7723);o(9498);const E=({children:e})=>(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled"},(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e),x=window.wp.components,B=(e,t)=>{if(!e)return null;if(0===e.innerBlocks.length)return null;for(const o of e.innerBlocks){if(t(o))return o;const e=B(o,t);if(e)return e}return null},C=(e,t)=>B(e,(function(e){return e.name===t}));let S=[];const O=({attributes:e,setAttributes:t,clientId:o})=>{const{displayStyle:n,showCounts:c,hideEmpty:i,clearButton:u}=e;0===S.length&&(S=(0,r.getBlockTypes)().filter((e=>{var t;return"woocommerce/product-filter-clear-button"!==e.name&&(null===(t=e.ancestor)||void 0===t?void 0:t.includes("woocommerce/product-filter-status"))})));const{insertBlock:d,replaceBlock:p}=(0,k.dispatch)("core/block-editor"),m=(0,k.useSelect)((e=>e("core/block-editor").getBlock(o)),[o]),[f,w]=(0,a.useState)({});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.InspectorControls,{group:"styles"},(0,l.createElement)(x.PanelBody,{title:(0,h.__)("Display","woocommerce")},(0,l.createElement)(x.__experimentalToggleGroupControl,{value:n,onChange:e=>{if(!m)return;const o=C(m,n);o?(w({...f,[n]:o.attributes}),p(o.clientId,(0,r.createBlock)(e,f[e]||{}))):d((0,r.createBlock)(e),m.innerBlocks.length,m.clientId,!1),t({displayStyle:e})},style:{width:"100%"}},S.map((e=>(0,l.createElement)(x.__experimentalToggleGroupControlOption,{key:e.name,label:e.title,value:e.name})))),(0,l.createElement)(x.ToggleControl,{label:(0,h.__)("Product counts","woocommerce"),checked:c,onChange:e=>t({showCounts:e})}),(0,l.createElement)(x.ToggleControl,{label:(0,h.__)("Empty filter options","woocommerce"),checked:!i,onChange:e=>t({hideEmpty:!e})}),(0,l.createElement)(x.ToggleControl,{label:(0,h.__)("Clear button","woocommerce"),checked:u,onChange:e=>t({clearButton:e})}))))},T=(e,t)=>{if(e){if(e.name===t)return e.clientId;if(e.innerBlocks&&e.innerBlocks.length>0)for(const o of e.innerBlocks){const e=T(o,t);if(e)return e}}},I={lock:{remove:!0,move:!1}},P=JSON.parse('{"name":"woocommerce/product-filter-status","version":"1.0.0","title":"Status (Experimental)","description":"Let shoppers filter products by choosing stock status.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":3,"ancestor":["woocommerce/product-filters"],"supports":{"interactivity":true,"html":false,"color":{"text":true,"background":false,"__experimentalDefaultControls":{"text":false}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontWeight":true,"__experimentalFontFamily":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":false}},"spacing":{"margin":true,"padding":true,"blockGap":true,"__experimentalDefaultControls":{"margin":false,"padding":false,"blockGap":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":false,"radius":false,"style":false,"width":false}}},"attributes":{"showCounts":{"type":"boolean","default":false},"displayStyle":{"type":"string","default":"woocommerce/product-filter-checkbox-list"},"isPreview":{"type":"boolean","default":false},"hideEmpty":{"type":"boolean","default":true},"clearButton":{"type":"boolean","default":true}},"usesContext":["query","filterParams"],"example":{"attributes":{"isPreview":true}}}');(()=>{const{experimentalBlocksEnabled:e}=(0,n.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,r.registerBlockType)(P,{icon:()=>(0,l.createElement)(c.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("line",{x1:"4",y1:"15.25",x2:"20",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,l.createElement)("line",{x1:"4",y1:"19.25",x2:"13",y2:"19.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,l.createElement)(c.Path,{d:"M4.75 4.8999C4.75 4.20955 5.30964 3.6499 6 3.6499H8.34082C8.7889 3.6499 9.20271 3.88974 9.42544 4.27854L9.62184 4.62136C9.84457 5.01016 10.2584 5.25 10.7065 5.25H13C13.6904 5.25 14.25 5.80964 14.25 6.5V10.3999C14.25 11.0903 13.6904 11.6499 13 11.6499H6C5.30964 11.6499 4.75 11.0903 4.75 10.3999V4.8999Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round",fill:"none"})),save:()=>{const e=s.useBlockProps.save(),t=s.useInnerBlocksProps.save(e);return(0,l.createElement)("div",{...t})},edit:e=>{const{showCounts:t,hideEmpty:o,clearButton:c}=e.attributes,{clientId:i}=e,{children:u,...d}=(0,s.useInnerBlocksProps)((0,s.useBlockProps)(),{template:[["core/group",{layout:{type:"flex",flexWrap:"nowrap"},metadata:{name:(0,h.__)("Header","woocommerce")},style:{spacing:{blockGap:"0"}}},[["core/heading",{level:3,content:(0,h.__)("Status","woocommerce")}],["woocommerce/product-filter-clear-button",{lock:{remove:!0,move:!1}}]]],["woocommerce/product-filter-checkbox-list",{lock:{remove:!0}}]]}),p=(0,n.getSetting)("stockStatusOptions",{}),{results:m,isLoading:f}=_({queryStock:!0,queryState:{},isEditor:!0}),w=(0,a.useMemo)((()=>Object.entries(p).map((([e,o])=>{var r,n,l;const c=null!==(r=null==m||null===(n=m.stock_status_counts)||void 0===n||null===(l=n.find((t=>t.status===e)))||void 0===l?void 0:l.count)&&void 0!==r?r:0;return{value:e,label:t?`${o} (${c.toString()})`:o,count:c}})).filter((e=>!o||e.count>0))),[p,m,t,o]);return(({clientId:e,showClearButton:t,positionIndexToInsertBlock:o,parentClientIdToInsertBlock:n})=>{const[l,c]=(0,a.useState)(t),{clearButtonBlock:i}=(e=>{const{getBlock:t}=(0,k.select)(s.store),o=t(e),r=T(o,"woocommerce/product-filter-clear-button");return{clearButtonBlock:r?t(r):void 0}})(e),u=(e=>{if(!e)return;const{getBlock:t,getBlockParents:o,getBlockOrder:r}=(0,k.select)(s.store),n=o(e,!0),l=n.length?t(n[0]):null,c=r(null==l?void 0:l.clientId);return{blockPositionIndex:null==c?void 0:c.findIndex((t=>t===e)),parentBlockId:null==l?void 0:l.clientId}})(null==i?void 0:i.clientId),[d,p]=(0,a.useState)(void 0),{getBlock:m}=(0,k.useSelect)((e=>({getBlock:e(s.store).getBlock}))),{insertBlock:f,removeBlock:w,updateBlockAttributes:v}=(0,k.useDispatch)(s.store);(0,a.useEffect)((()=>{if(t!==l&&(!1===t&&Boolean(null==i?void 0:i.clientId)&&(v(null==i?void 0:i.clientId,{lock:{remove:!1,move:!1}}),w(null==i?void 0:i.clientId,!1),p(u)),!0===t&&!i)){let t=function(){if(d&&m(d.parentBlockId)){const{blockPositionIndex:e,parentBlockId:t}=d;return f((0,r.createBlock)("woocommerce/product-filter-clear-button",I),e,t,!1),p(void 0),!0}return!1}();t||(t=void 0===o&&void 0===n&&!!m(n)&&(f((0,r.createBlock)("woocommerce/product-filter-clear-button",I),o,n,!1),p(void 0),!0)),t||(t=function(){const t=m(e),o=C(t,"core/group");if(!o)return!1;const n=T(o,"core/heading"),l=o.innerBlocks.length;return!!Boolean(n)&&(f((0,r.createBlock)("woocommerce/product-filter-clear-button",I),l,null==o?void 0:o.clientId,!1),!0)}()),t||(f((0,r.createBlock)("woocommerce/product-filter-clear-button",I),0,e,!1),p(void 0),t=!0)}c(t)}),[t,l])})({clientId:i,showClearButton:c}),(0,l.createElement)("div",{...d},(0,l.createElement)(O,{...e}),(0,l.createElement)(E,null,(0,l.createElement)(s.BlockContextProvider,{value:{filterData:{items:w,isLoading:f}}},u)))}})},9498:()=>{},2893:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,l),o.exports}l.m=r,e=[],l.O=(t,o,r,n)=>{if(!o){var c=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],s=!0,a=0;a<o.length;a++)(!1&n||c>=n)&&Object.keys(l.O).every((e=>l.O[e](o[a])))?o.splice(a--,1):(s=!1,n<c&&(c=n));if(s){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var c={};t=t||[null,o({}),o([]),o(o)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,l.d(n,c),n},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=3750,(()=>{var e={3750:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[c,s,a]=o,i=0;if(c.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(a)var u=a(l)}for(t&&t(o);i<c.length;i++)n=c[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},o=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=l.O(void 0,[94],(()=>l(6386)));c=l.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-status"]=c})();