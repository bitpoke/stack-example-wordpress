(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[6088],{8702:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var c=r(1609),a=r(8605),n=r(851),l=r(7723),o=r(6087),s=r(195),i=r(8558),m=r(4717);r(5193);const u=({className:e,quantity:t=1,minimum:r=1,maximum:a,onChange:u=(()=>{}),step:p=1,itemName:d="",disabled:_})=>{const y=(0,n.A)("wc-block-components-quantity-selector",e),b=(0,o.useRef)(null),k=(0,o.useRef)(null),E=(0,o.useRef)(null),f=void 0!==a,w=!_&&t-p>=r,g=!_&&(!f||t+p<=a),N=(0,o.useCallback)((e=>{let t=e;f&&(t=Math.min(t,Math.floor(a/p)*p)),t=Math.max(t,Math.ceil(r/p)*p),t=Math.floor(t/p)*p,t!==e&&u(t)}),[f,a,r,u,p]),v=(0,m.YQ)(N,300);(0,o.useLayoutEffect)((()=>{N(t)}),[t,N]);const h=(0,o.useCallback)((e=>{const r=void 0!==typeof e.key?"ArrowDown"===e.key:e.keyCode===i.DOWN,c=void 0!==typeof e.key?"ArrowUp"===e.key:e.keyCode===i.UP;r&&w&&(e.preventDefault(),u(t-p)),c&&g&&(e.preventDefault(),u(t+p))}),[t,u,g,w,p]);return(0,c.createElement)("div",{className:y},(0,c.createElement)("input",{ref:b,className:"wc-block-components-quantity-selector__input",disabled:_,type:"number",step:p,min:r,max:a,value:t,onKeyDown:h,onChange:e=>{let r=parseInt(e.target.value,10);r=isNaN(r)?t:r,r!==t&&(u(r),v(r))},"aria-label":(0,l.sprintf)(/* translators: %s refers to the item name in the cart. */ /* translators: %s refers to the item name in the cart. */
(0,l.__)("Quantity of %s in your cart.","woocommerce"),d)}),(0,c.createElement)("button",{ref:k,"aria-label":(0,l.sprintf)(/* translators: %s refers to the item name in the cart. */ /* translators: %s refers to the item name in the cart. */
(0,l.__)("Reduce quantity of %s","woocommerce"),d),className:"wc-block-components-quantity-selector__button wc-block-components-quantity-selector__button--minus",disabled:!w,onClick:()=>{const e=t-p;u(e),(0,s.speak)((0,l.sprintf)(/* translators: %s refers to the item's new quantity in the cart. */ /* translators: %s refers to the item's new quantity in the cart. */
(0,l.__)("Quantity reduced to %s.","woocommerce"),e)),N(e)}},"－"),(0,c.createElement)("button",{ref:E,"aria-label":(0,l.sprintf)(/* translators: %s refers to the item's name in the cart. */ /* translators: %s refers to the item's name in the cart. */
(0,l.__)("Increase quantity of %s","woocommerce"),d),disabled:!g,className:"wc-block-components-quantity-selector__button wc-block-components-quantity-selector__button--plus",onClick:()=>{const e=t+p;u(e),(0,s.speak)((0,l.sprintf)(/* translators: %s refers to the item's new quantity in the cart. */ /* translators: %s refers to the item's new quantity in the cart. */
(0,l.__)("Quantity increased to %s.","woocommerce"),e)),N(e)}},"＋"))};var p=r(4656),d=r(8529);r(4567);const _=({currency:e,maxPrice:t,minPrice:r,priceClassName:a,priceStyle:o={}})=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"screen-reader-text"},(0,l.sprintf)(/* translators: %1$s min price, %2$s max price */ /* translators: %1$s min price, %2$s max price */
(0,l.__)("Price between %1$s and %2$s","woocommerce"),(0,d.formatPrice)(r),(0,d.formatPrice)(t))),(0,c.createElement)("span",{"aria-hidden":!0},(0,c.createElement)(p.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",a),currency:e,value:r,style:o})," — ",(0,c.createElement)(p.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",a),currency:e,value:t,style:o}))),y=({currency:e,regularPriceClassName:t,regularPriceStyle:r,regularPrice:a,priceClassName:o,priceStyle:s,price:i})=>(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"screen-reader-text"},(0,l.__)("Previous price:","woocommerce")),(0,c.createElement)(p.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.createElement)("del",{className:(0,n.A)("wc-block-components-product-price__regular",t),style:r},e),value:a}),(0,c.createElement)("span",{className:"screen-reader-text"},(0,l.__)("Discounted price:","woocommerce")),(0,c.createElement)(p.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.createElement)("ins",{className:(0,n.A)("wc-block-components-product-price__value","is-discounted",o),style:s},e),value:i})),b=({align:e,className:t,currency:r,format:a="<price/>",maxPrice:l,minPrice:s,price:i,priceClassName:m,priceStyle:u,regularPrice:d,regularPriceClassName:b,regularPriceStyle:k,style:E})=>{const f=(0,n.A)(t,"price","wc-block-components-product-price",{[`wc-block-components-product-price--align-${e}`]:e});a.includes("<price/>")||(a="<price/>",console.error("Price formats need to include the `<price/>` tag."));const w=d&&i&&i<d;let g=(0,c.createElement)("span",{className:(0,n.A)("wc-block-components-product-price__value",m)});return w?g=(0,c.createElement)(y,{currency:r,price:i,priceClassName:m,priceStyle:u,regularPrice:d,regularPriceClassName:b,regularPriceStyle:k}):void 0!==s&&void 0!==l?g=(0,c.createElement)(_,{currency:r,maxPrice:l,minPrice:s,priceClassName:m,priceStyle:u}):i&&(g=(0,c.createElement)(p.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",m),currency:r,value:i,style:u})),(0,c.createElement)("span",{className:f,style:E},(0,o.createInterpolateElement)(a,{price:g}))};var k=r(8537);r(6625);const E=({className:e="",disabled:t=!1,name:r,permalink:a="",target:l,rel:o,style:s,onClick:i,...m})=>{const u=(0,n.A)("wc-block-components-product-name",e);if(t){const e=m;return(0,c.createElement)("span",{className:u,...e,dangerouslySetInnerHTML:{__html:(0,k.decodeEntities)(r)}})}return(0,c.createElement)("a",{className:u,href:a,target:l,...m,dangerouslySetInnerHTML:{__html:(0,k.decodeEntities)(r)},style:s})};var f=r(7143),w=r(7594),g=r(3993);var N=r(2619),v=r(1e3),h=r(131),C=r(5703);r(9507);const P=({children:e,className:t})=>(0,c.createElement)("div",{className:(0,n.A)("wc-block-components-product-badge",t)},e),A=()=>(0,c.createElement)(P,{className:"wc-block-components-product-backorder-badge"},(0,l.__)("Available on backorder","woocommerce")),x=({image:e={},fallbackAlt:t=""})=>{const r=e.thumbnail?{src:e.thumbnail,alt:(0,k.decodeEntities)(e.alt)||t||"Product Image"}:{src:C.PLACEHOLDER_IMG_SRC,alt:""};return(0,c.createElement)("img",{...r,alt:r.alt})},I=({lowStockRemaining:e})=>e?(0,c.createElement)(P,{className:"wc-block-components-product-low-stock-badge"},(0,l.sprintf)(/* translators: %d stock amount (number of items in stock for product) */ /* translators: %d stock amount (number of items in stock for product) */
(0,l.__)("%d left in stock","woocommerce"),e)):null;var q=r(1194);r(4982);const R=({details:e=[]})=>Array.isArray(e)?0===(e=e.filter((e=>!e.hidden))).length?null:(0,c.createElement)("ul",{className:"wc-block-components-product-details"},e.map((e=>{const t=(null==e?void 0:e.key)||e.name||"",r=(null==e?void 0:e.className)||(t?`wc-block-components-product-details__${(0,q.c)(t)}`:"");return(0,c.createElement)("li",{key:t+(e.display||e.value),className:r},t&&(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"wc-block-components-product-details__name"},(0,k.decodeEntities)(t),":")," "),(0,c.createElement)("span",{className:"wc-block-components-product-details__value"},(0,k.decodeEntities)(e.display||e.value)))}))):null;var D=r(6004);const S=e=>e.replace(/<\/?[a-z][^>]*?>/gi,""),F=(e,t)=>e.replace(/[\s|\.\,]+$/i,"")+t;var M=r(9446);const T=({source:e,maxLength:t=15,countType:r="words",className:a="",style:n={}})=>{const l=(0,o.useMemo)((()=>((e,t=15,r="words")=>{const c=(0,D.autop)(e);if((0,M.count)(c,r)<=t)return c;const a=(e=>{const t=e.indexOf("</p>");return-1===t?e:e.substr(0,t+4)})(c);return(0,M.count)(a,r)<=t?a:"words"===r?((e,t,r="&hellip;",c=!0)=>{const a=S(e),n=a.split(" ").splice(0,t).join(" ");return n===a?c?(0,D.autop)(a):a:c?(0,D.autop)(F(n,r)):F(n,r)})(a,t):((e,t,r=!0,c="&hellip;",a=!0)=>{const n=S(e),l=n.slice(0,t);if(l===n)return a?(0,D.autop)(n):n;if(r)return(0,D.autop)(F(l,c));const o=l.match(/([\s]+)/g),s=o?o.length:0,i=n.slice(0,t+s);return a?(0,D.autop)(F(i,c)):F(i,c)})(a,t,"characters_including_spaces"===r)})(e,t,r)),[e,t,r]);return(0,c.createElement)(o.RawHTML,{style:n,className:a},l)};var L=r(812);const V=({className:e,shortDescription:t="",fullDescription:r=""})=>{const a=t||r;return a?(0,c.createElement)(T,{className:e,source:a,maxLength:15,countType:L.r7.wordCountType||"words"}):null};r(401);const $=({shortDescription:e="",fullDescription:t="",itemData:r=[],variation:a=[]})=>(0,c.createElement)("div",{className:"wc-block-components-product-metadata"},(0,c.createElement)(V,{className:"wc-block-components-product-metadata__description",shortDescription:e,fullDescription:t}),(0,c.createElement)(R,{details:r}),(0,c.createElement)(R,{details:a.map((({attribute:e="",value:t})=>({key:e,value:t})))})),H=({currency:e,saleAmount:t,format:r="<price/>"})=>{if(!t||t<=0)return null;r.includes("<price/>")||(r="<price/>",console.error("Price formats need to include the `<price/>` tag."));const a=(0,l.sprintf)(/* translators: %s will be replaced by the discount amount */ /* translators: %s will be replaced by the discount amount */
(0,l.__)("Save %s","woocommerce"),r);return(0,c.createElement)(P,{className:"wc-block-components-sale-badge"},(0,o.createInterpolateElement)(a,{price:(0,c.createElement)(p.FormattedMonetaryAmount,{currency:e,value:t})}))},Q=(e,t)=>e.convertPrecision(t.minorUnit).getAmount(),O=(0,o.forwardRef)((({lineItem:e,onRemove:t=(()=>{}),tabIndex:r},i)=>{const{name:p="",catalog_visibility:_="visible",short_description:y="",description:k="",low_stock_remaining:P=null,show_backorder_badge:q=!1,quantity_limits:R={minimum:1,maximum:99,multiple_of:1,editable:!0},sold_individually:D=!1,permalink:S="",images:F=[],variation:M=[],item_data:T=[],prices:L={currency_code:"USD",currency_minor_unit:2,currency_symbol:"$",currency_prefix:"$",currency_suffix:"",currency_decimal_separator:".",currency_thousand_separator:",",price:"0",regular_price:"0",sale_price:"0",price_range:null,raw_prices:{precision:6,price:"0",regular_price:"0",sale_price:"0"}},totals:V={currency_code:"USD",currency_minor_unit:2,currency_symbol:"$",currency_prefix:"$",currency_suffix:"",currency_decimal_separator:".",currency_thousand_separator:",",line_subtotal:"0",line_subtotal_tax:"0"},extensions:O}=e,{quantity:U,setItemQuantity:j,removeItem:K,isPendingDelete:Y}=(e=>{const t={key:"",quantity:1};(e=>(0,g.isObject)(e)&&(0,g.objectHasProp)(e,"key")&&(0,g.objectHasProp)(e,"quantity")&&(0,g.isString)(e.key)&&(0,g.isNumber)(e.quantity))(e)&&(t.key=e.key,t.quantity=e.quantity);const{key:r="",quantity:c=1}=t,{cartErrors:n}=(0,a.V)(),{__internalIncrementCalculating:l,__internalDecrementCalculating:s}=(0,f.useDispatch)(w.CHECKOUT_STORE_KEY),[i,u]=(0,o.useState)(c),[p]=(0,m.d7)(i,400),d=function(e,t){const r=(0,o.useRef)();return(0,o.useEffect)((()=>{r.current===e||(r.current=e)}),[e,t]),r.current}(p),{removeItemFromCart:_,changeCartItemQuantity:y}=(0,f.useDispatch)(w.CART_STORE_KEY);(0,o.useEffect)((()=>u(c)),[c]);const b=(0,f.useSelect)((e=>{if(!r)return{quantity:!1,delete:!1};const t=e(w.CART_STORE_KEY);return{quantity:t.isItemPendingQuantity(r),delete:t.isItemPendingDelete(r)}}),[r]),k=(0,o.useCallback)((()=>r?_(r).catch((e=>{(0,w.processErrorResponse)(e)})):Promise.resolve(!1)),[r,_]);return(0,o.useEffect)((()=>{r&&(0,g.isNumber)(d)&&Number.isFinite(d)&&d!==p&&y(r,p).catch((e=>{(0,w.processErrorResponse)(e)}))}),[r,y,p,d]),(0,o.useEffect)((()=>(b.delete?l():s(),()=>{b.delete&&s()})),[s,l,b.delete]),(0,o.useEffect)((()=>(b.quantity||p!==i?l():s(),()=>{(b.quantity||p!==i)&&s()})),[l,s,b.quantity,p,i]),{isPendingDelete:b.delete,quantity:i,setItemQuantity:u,removeItem:k,cartItemQuantityErrors:n}})(e),{dispatchStoreEvent:B}={dispatchStoreEvent:(0,o.useCallback)(((e,t={})=>{try{(0,N.doAction)(`experimental__woocommerce_blocks-${e}`,t)}catch(e){console.error(e)}}),[]),dispatchCheckoutEvent:(0,o.useCallback)(((e,t={})=>{try{(0,N.doAction)(`experimental__woocommerce_blocks-checkout-${e}`,{...t,storeCart:(0,f.select)("wc/store/cart").getCartData()})}catch(e){console.error(e)}}),[])},{receiveCart:W,...J}=(0,a.V)(),z=(0,o.useMemo)((()=>({context:"cart",cartItem:e,cart:J})),[e,J]),G=(0,d.getCurrencyFromPriceResponse)(L),X=(0,v.applyCheckoutFilter)({filterName:"itemName",defaultValue:p,extensions:O,arg:z}),Z=(0,h.A)({amount:parseInt(L.raw_prices.regular_price,10),precision:L.raw_prices.precision}),ee=(0,h.A)({amount:parseInt(L.raw_prices.price,10),precision:L.raw_prices.precision}),te=Z.subtract(ee),re=te.multiply(U),ce=(0,d.getCurrencyFromPriceResponse)(V);let ae=parseInt(V.line_subtotal,10);(0,C.getSetting)("displayCartPricesIncludingTax",!1)&&(ae+=parseInt(V.line_subtotal_tax,10));const ne=(0,h.A)({amount:ae,precision:ce.minorUnit}),le=F.length?F[0]:{},oe="hidden"===_||"search"===_,se=(0,v.applyCheckoutFilter)({filterName:"cartItemClass",defaultValue:"",extensions:O,arg:z}),ie=(0,v.applyCheckoutFilter)({filterName:"cartItemPrice",defaultValue:"<price/>",extensions:O,arg:z,validation:v.productPriceValidation}),me=(0,v.applyCheckoutFilter)({filterName:"subtotalPriceFormat",defaultValue:"<price/>",extensions:O,arg:z,validation:v.productPriceValidation}),ue=(0,v.applyCheckoutFilter)({filterName:"saleBadgePriceFormat",defaultValue:"<price/>",extensions:O,arg:z,validation:v.productPriceValidation}),pe=(0,v.applyCheckoutFilter)({filterName:"showRemoveItemLink",defaultValue:!0,extensions:O,arg:z});return(0,c.createElement)("tr",{className:(0,n.A)("wc-block-cart-items__row",se,{"is-disabled":Y}),ref:i,tabIndex:r},(0,c.createElement)("td",{className:"wc-block-cart-item__image","aria-hidden":!(0,g.objectHasProp)(le,"alt")||!le.alt},oe?(0,c.createElement)(x,{image:le,fallbackAlt:X}):(0,c.createElement)("a",{href:S,tabIndex:-1},(0,c.createElement)(x,{image:le,fallbackAlt:X}))),(0,c.createElement)("td",{className:"wc-block-cart-item__product"},(0,c.createElement)("div",{className:"wc-block-cart-item__wrap"},(0,c.createElement)(E,{disabled:Y||oe,name:X,permalink:S}),q?(0,c.createElement)(A,null):!!P&&(0,c.createElement)(I,{lowStockRemaining:P}),(0,c.createElement)("div",{className:"wc-block-cart-item__prices"},(0,c.createElement)(b,{currency:G,regularPrice:Q(Z,G),price:Q(ee,G),format:me})),(0,c.createElement)(H,{currency:G,saleAmount:Q(te,G),format:ue}),(0,c.createElement)($,{shortDescription:y,fullDescription:k,itemData:T,variation:M}),(0,c.createElement)("div",{className:"wc-block-cart-item__quantity"},!D&&!!R.editable&&(0,c.createElement)(u,{disabled:Y,quantity:U,minimum:R.minimum,maximum:R.maximum,step:R.multiple_of,onChange:t=>{j(t),B("cart-set-item-quantity",{product:e,quantity:t})},itemName:X}),pe&&(0,c.createElement)("button",{className:"wc-block-cart-item__remove-link","aria-label":(0,l.sprintf)(/* translators: %s refers to the item's name in the cart. */ /* translators: %s refers to the item's name in the cart. */
(0,l.__)("Remove %s from cart","woocommerce"),X),onClick:()=>{t(),K(),B("cart-remove-item",{product:e,quantity:U}),(0,s.speak)((0,l.sprintf)(/* translators: %s refers to the item name in the cart. */ /* translators: %s refers to the item name in the cart. */
(0,l.__)("%s has been removed from your cart.","woocommerce"),X))},disabled:Y},(0,l.__)("Remove item","woocommerce"))))),(0,c.createElement)("td",{className:"wc-block-cart-item__total"},(0,c.createElement)("div",{className:"wc-block-cart-item__total-price-and-sale-badge-wrapper"},(0,c.createElement)(b,{currency:ce,format:ie,price:ne.getAmount()}),U>1&&(0,c.createElement)(H,{currency:G,saleAmount:Q(re,G),format:ue}))))}));r(1045);const U=[...Array(3)].map(((_x,e)=>(0,c.createElement)(O,{lineItem:{},key:e}))),j=e=>{const t={};return e.forEach((({key:e})=>{t[e]=(0,o.createRef)()})),t},K=({lineItems:e=[],isLoading:t=!1,className:r})=>{const a=(0,o.useRef)(null),s=(0,o.useRef)(j(e));(0,o.useEffect)((()=>{s.current=j(e)}),[e]);const i=e=>()=>{null!=s&&s.current&&e&&s.current[e].current instanceof HTMLElement?s.current[e].current.focus():a.current instanceof HTMLElement&&a.current.focus()},m=t?U:e.map(((t,r)=>{const a=e.length>r+1?e[r+1].key:null;return(0,c.createElement)(O,{key:t.key,lineItem:t,onRemove:i(a),ref:s.current[t.key],tabIndex:-1})}));return(0,c.createElement)("table",{className:(0,n.A)("wc-block-cart-items",r),ref:a,tabIndex:-1},(0,c.createElement)("thead",null,(0,c.createElement)("tr",{className:"wc-block-cart-items__header"},(0,c.createElement)("th",{className:"wc-block-cart-items__header-image"},(0,c.createElement)("span",null,(0,l.__)("Product","woocommerce"))),(0,c.createElement)("th",{className:"wc-block-cart-items__header-product"},(0,c.createElement)("span",null,(0,l.__)("Details","woocommerce"))),(0,c.createElement)("th",{className:"wc-block-cart-items__header-total"},(0,c.createElement)("span",null,(0,l.__)("Total","woocommerce"))))),(0,c.createElement)("tbody",null,m))},Y=({className:e})=>{const{cartItems:t,cartIsLoading:r}=(0,a.V)();return(0,c.createElement)("div",{className:(0,n.A)(e,"wc-block-mini-cart__products-table")},(0,c.createElement)(K,{lineItems:t,isLoading:r,className:"wc-block-mini-cart-items"}))}},1045:()=>{},9507:()=>{},4982:()=>{},401:()=>{},6625:()=>{},4567:()=>{},5193:()=>{}}]);