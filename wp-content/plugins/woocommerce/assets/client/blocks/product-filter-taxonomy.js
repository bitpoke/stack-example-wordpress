(()=>{var e,t,o,r={3819:(e,t,o)=>{"use strict";var r=o(5573),n=o(790);const l=window.wc.wcSettings,c=window.wp.blocks;var s=o(7723);const a=window.wp.blockEditor,i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-taxonomy","title":"Taxonomy Filter","description":"Enable customers to filter the product collection by selecting one or more taxonomy terms, such as categories, brands, or tags.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":3,"ancestor":["woocommerce/product-filters"],"supports":{"interactivity":true,"color":{"text":true,"background":false,"__experimentalDefaultControls":{"text":false}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontWeight":true,"__experimentalFontFamily":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":false}},"spacing":{"margin":true,"padding":true,"blockGap":true,"__experimentalDefaultControls":{"margin":false,"padding":false,"blockGap":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":false,"radius":false,"style":false,"width":false}}},"usesContext":["query","filterParams"],"attributes":{"taxonomy":{"type":"string","default":"product_cat"},"showCounts":{"type":"boolean","default":false},"displayStyle":{"type":"string","default":"woocommerce/product-filter-checkbox-list"},"isPreview":{"type":"boolean","default":false},"sortOrder":{"type":"string","default":"count-desc"},"hideEmpty":{"type":"boolean","default":true}},"example":{"attributes":{"isPreview":true}}}'),u=window.wp.components;var d=o(6087);const m=window.wp.data,p=window.wp.coreData;var y=o(4347);const f=window.wc.wcTypes;var _=o(9456),h=o(923),w=o.n(h);function b(e){const t=(0,d.useRef)(e);return w()(e,t.current)||(t.current=e),t.current}const x=window.wc.wcBlocksData,g=(0,d.createContext)("page"),v=()=>(0,d.useContext)(g),k=(g.Provider,e=>{const t=v();e=e||t;const o=(0,m.useSelect)((t=>t(x.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,m.useDispatch)(x.QUERY_STATE_STORE_KEY);return[o,(0,d.useCallback)((t=>{r(e,t)}),[e,r])]}),S=(e,t,o)=>{const r=v();o=o||r;const n=(0,m.useSelect)((r=>r(x.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:l}=(0,m.useDispatch)(x.QUERY_STATE_STORE_KEY);return[n,(0,d.useCallback)((t=>{l(o,e,t)}),[o,e,l])]},C=({queryAttribute:e,queryTaxonomy:t,queryPrices:o,queryStock:r,queryRating:n,queryState:l,isEditor:c=!1})=>{let s=v();s=`${s}-collection-data`;const[a]=k(s),[i,u]=S("calculate_attribute_counts",[],s),[p,h]=S("calculate_taxonomy_counts",[],s),[w,g]=S("calculate_price_range",null,s),[C,T]=S("calculate_stock_status_counts",null,s),[j,E]=S("calculate_rating_counts",null,s),O=b(e||{}),B=b(t),P=b(o),L=b(r),D=b(n);(0,d.useEffect)((()=>{"object"==typeof O&&Object.keys(O).length&&(i.find((e=>(0,f.objectHasProp)(O,"taxonomy")&&e.taxonomy===O.taxonomy))||u([...i,O]))}),[O,i,u]),(0,d.useEffect)((()=>{B&&!p.includes(B)&&h([...p,B])}),[B,p,h]),(0,d.useEffect)((()=>{w!==P&&void 0!==P&&g(P)}),[P,g,w]),(0,d.useEffect)((()=>{C!==L&&void 0!==L&&T(L)}),[L,T,C]),(0,d.useEffect)((()=>{j!==D&&void 0!==D&&E(D)}),[D,E,j]);const[I,R]=(0,d.useState)(c),[V]=(0,y.d7)(I,200);I||R(!0);const A=(0,d.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,_.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),Array.isArray(e.calculate_taxonomy_counts)&&(t.calculate_taxonomy_counts=e.calculate_taxonomy_counts),t})(a)),[a]),{results:q,isLoading:N}=(e=>{const{namespace:t,resourceName:o,resourceValues:r=[],query:n={},shouldSelect:l=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const c=(0,d.useRef)({results:[],isLoading:!0}),s=b(n),a=b(r),i=(()=>{const[,e]=(0,d.useState)();return(0,d.useCallback)((t=>{e((()=>{throw t}))}),[])})(),u=(0,m.useSelect)((e=>{if(!l)return null;const r=e(x.COLLECTIONS_STORE_KEY),n=[t,o,s,a],c=r.getCollectionError(...n);if(c){if(!(0,f.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");i(c)}return{results:r.getCollection(...n),isLoading:!r.hasFinishedResolution("getCollection",n)}}),[t,o,a,s,l,i]);return null!==u&&(c.current=u),c.current})({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...l,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...A},shouldSelect:V});return{data:q,isLoading:N}},T=(e,t)=>{if(!e)return null;if(0===e.innerBlocks.length)return null;for(const o of e.innerBlocks){if(t(o))return o;const e=T(o,t);if(e)return e}return null},j=(e,t)=>T(e,(function(e){return e.name===t})),E=({clientId:e,currentStyle:t,onChange:o,parentBlockName:r})=>{const l=(0,c.getBlockTypes)().filter((e=>e.ancestor?.includes(r))),{insertBlock:s,replaceBlock:a}=(0,m.useDispatch)("core/block-editor"),[i,p]=(0,d.useState)({});return(0,n.jsx)(u.__experimentalToggleGroupControl,{value:t,isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:"",hideLabelFromVision:!0,onChange:r=>{if(!r||"string"!=typeof r)return;const n=(0,m.select)("core/block-editor").getBlock(e);if(!n)return;const l=j(n,t);l?(p({...i,[t]:l.attributes}),a(l.clientId,(0,c.createBlock)(r,i[r]||{}))):s((0,c.createBlock)(r),n.innerBlocks.length,n.clientId,!1),o(r)},style:{width:"100%"},children:l.map((e=>(0,n.jsx)(u.__experimentalToggleGroupControlOption,{label:e.title,value:e.name},e.name)))})};function O(e,t,o){const r=(0,m.select)("core/block-editor").getBlock(e);if(!r)return;const n=(0,c.getBlockTypes)().filter((e=>e.ancestor?.includes(o))).find((e=>j(r,e.name))),l=n?j(r,n.name):null,{insertBlock:s,replaceBlock:a}=(0,m.dispatch)("core/block-editor");l?a(l.clientId,(0,c.createBlock)(t)):s((0,c.createBlock)(t),r.innerBlocks.length,r.clientId,!1)}const B=(0,l.getSetting)("filterableProductTaxonomies",[]);function P(e){const t=B.find((t=>t.name===e));return t?t.label:(0,s.__)("Taxonomy","woocommerce")}const L=(0,l.getSetting)("filterableProductTaxonomies",[]).map((e=>({label:e.label,value:e.name}))),D=({attributes:e,setAttributes:t,clientId:o})=>{const{taxonomy:r,showCounts:l,sortOrder:c,hideEmpty:d,displayStyle:p}=e;return(0,n.jsx)(a.InspectorControls,{children:(0,n.jsxs)(u.__experimentalToolsPanel,{label:(0,s.__)("Taxonomy Filter Settings","woocommerce"),resetAll:()=>{t({taxonomy:i.attributes.taxonomy.default,sortOrder:i.attributes.sortOrder.default,displayStyle:i.attributes.displayStyle.default,showCounts:i.attributes.showCounts.default,hideEmpty:i.attributes.hideEmpty.default}),O(o,i.attributes.displayStyle.default,i.name)},children:[(0,n.jsx)(u.__experimentalToolsPanelItem,{label:(0,s.__)("Taxonomy","woocommerce"),hasValue:()=>!!r,onDeselect:()=>t({taxonomy:i.attributes.taxonomy.default}),isShownByDefault:!0,children:(0,n.jsx)(u.SelectControl,{label:(0,s.__)("Taxonomy","woocommerce"),help:(0,s.__)("Select a taxonomy to filter by.","woocommerce"),value:r,options:[{label:(0,s.__)("Select a taxonomy","woocommerce"),value:""},...L],onChange:e=>{t({taxonomy:e}),((e,t)=>{const{getBlock:o}=(0,m.select)("core/block-editor"),r=o(e);if(!r)return;const{updateBlockAttributes:n}=(0,m.dispatch)("core/block-editor"),l=j(r,"core/heading");l&&n(l.clientId,{content:t})})(o,P(e))}})}),(0,n.jsx)(u.__experimentalToolsPanelItem,{label:(0,s.__)("Sort Order","woocommerce"),hasValue:()=>"count-desc"!==c,onDeselect:()=>t({sortOrder:i.attributes.sortOrder.default}),children:(0,n.jsx)(u.SelectControl,{label:(0,s.__)("Sort Order","woocommerce"),value:c,options:[{label:(0,s.__)("Count (High to Low)","woocommerce"),value:"count-desc"},{label:(0,s.__)("Count (Low to High)","woocommerce"),value:"count-asc"},{label:(0,s.__)("Name (A to Z)","woocommerce"),value:"name-asc"},{label:(0,s.__)("Name (Z to A)","woocommerce"),value:"name-desc"}],onChange:e=>t({sortOrder:e})})}),(0,n.jsx)(u.__experimentalToolsPanelItem,{label:(0,s.__)("Display Style","woocommerce"),hasValue:()=>"woocommerce/product-filter-checkbox-list"!==p,isShownByDefault:!0,onDeselect:()=>{t({displayStyle:i.attributes.displayStyle.default}),O(o,i.attributes.displayStyle.default,i.name)},children:(0,n.jsx)(E,{clientId:o,currentStyle:p,onChange:e=>t({displayStyle:e}),parentBlockName:i.name})}),(0,n.jsx)(u.__experimentalToolsPanelItem,{label:(0,s.__)("Product counts","woocommerce"),hasValue:()=>l,onDeselect:()=>t({showCounts:i.attributes.showCounts.default}),isShownByDefault:!0,children:(0,n.jsx)(u.ToggleControl,{label:(0,s.__)("Product counts","woocommerce"),checked:l,onChange:e=>t({showCounts:e})})}),(0,n.jsx)(u.__experimentalToolsPanelItem,{label:(0,s.__)("Hide items with no products","woocommerce"),hasValue:()=>!d,onDeselect:()=>t({hideEmpty:i.attributes.hideEmpty.default}),children:(0,n.jsx)(u.ToggleControl,{label:(0,s.__)("Hide items with no products","woocommerce"),checked:d,onChange:e=>t({hideEmpty:e})})})]})})},I=[{label:"Sample Item 1",value:"sample-item-1",selected:!1,count:10},{label:"Sample Item 2",value:"sample-item-2",selected:!0,count:12},{label:"Sample Item 3",value:"sample-item-3",selected:!1,count:5}],R=(e=[])=>(0,c.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),V=["woocommerce/product-filters","woocommerce/product-filter-attribute","woocommerce/product-filter-active","woocommerce/product-filter-price","woocommerce/product-filter-status","woocommerce/product-collection","core/query"];o(1652);const A=({children:e})=>(0,n.jsxs)("div",{className:"wc-block-product-filter-components-initial-disabled",children:[(0,n.jsx)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e]});var q=o(2624);o(1007);const N=({children:e})=>(0,n.jsxs)("div",{className:"wc-block-product-filter-components-notice",children:[(0,n.jsx)(u.Icon,{className:"wc-block-product-filter-components-notice__icon",icon:q.A}),(0,n.jsx)("div",{className:"wc-block-product-filter-components-notice__content",children:e})]});function F(e,t){return e.sort(((e,o)=>{switch(t){case"name-asc":return e.label.localeCompare(o.label);case"name-desc":return o.label.localeCompare(e.label);case"count-asc":return e.count-o.count;default:return o.count-e.count}}))}const M=(0,u.withSpokenMessages)((e=>{const{attributes:t}=e,{taxonomy:o,isPreview:r,displayStyle:l,showCounts:c,sortOrder:i,hideEmpty:u}=t,[y,_]=(0,d.useState)(r?F([...I],i):[]),[h,w]=(0,d.useState)(!r),{taxonomyTerms:b,isTermsLoading:x}=(0,m.useSelect)((e=>{if(r||!o)return{taxonomyTerms:[],isTermsLoading:!1};const{getEntityRecords:t,hasFinishedResolution:n}=e(p.store),l=["taxonomy",o,{per_page:15,hide_empty:u,orderby:"name",order:"asc"}];return{taxonomyTerms:t(...l)||[],isTermsLoading:!n("getEntityRecords",l)}}),[o,u,r]),{data:g,isLoading:v}=C({queryTaxonomy:r?void 0:o,queryState:{},isEditor:!0});(0,d.useEffect)((()=>{if(r)return void _(F([...I],i));if(x||v)return void w(!0);if(!b.length)return _([]),void w(!1);const e=(0,f.objectHasProp)(g,"taxonomy_counts")&&Array.isArray(g.taxonomy_counts)?g.taxonomy_counts:[],t=b.reduce(((t,o)=>{const r=e.find((e=>e.term===o.id))?.count||0;return u&&0===r||t.push({label:o.name,value:o.slug,selected:!1,count:r}),t}),[]);_(F(t,i)),w(!1)}),[o,b,g,i,u,r,x,v]);const{children:k,...S}=(0,a.useInnerBlocksProps)((0,a.useBlockProps)(),{allowedBlocks:R(V),template:[["core/heading",{level:3,content:P(o),style:{spacing:{margin:{bottom:"0.625rem",top:"0"}}}}],[l]]}),T=x||v||h;return o?T||r||0!==b.length?(0,n.jsxs)("div",{...S,children:[(0,n.jsx)(D,{...e}),(0,n.jsx)(A,{children:(0,n.jsx)(a.BlockContextProvider,{value:{filterData:{items:0===y.length&&r?I:y,isLoading:T,showCounts:c}},children:k})})]}):(0,n.jsxs)("div",{...S,children:[(0,n.jsx)(D,{...e}),(0,n.jsx)(N,{children:(0,n.jsx)("p",{children:(0,s.sprintf)(
// translators: %s: Taxonomy label.
// translators: %s: Taxonomy label.
(0,s.__)("There are no products associated with %s.","woocommerce"),P(o))})})]}):(0,n.jsxs)("div",{...S,children:[(0,n.jsx)(D,{...e}),(0,n.jsx)(N,{children:(0,n.jsx)("p",{children:(0,s.__)("Please select a taxonomy to use this filter!","woocommerce")})})]})})),H=(0,l.getSetting)("filterableProductTaxonomies",[]);(0,c.registerBlockType)(i,{edit:M,icon:()=>(0,n.jsx)(r.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M4.25 4C4.25 3.58579 4.58579 3.25 5 3.25L9.17284 3.25C9.37179 3.25 9.56258 3.32904 9.70324 3.46974L13.2877 7.05515L13.2893 7.05673C13.5844 7.35367 13.75 7.75532 13.75 8.17393C13.75 8.59255 13.5844 8.99419 13.2893 9.29114L12.7573 8.76246L13.2877 9.29272L10.2961 12.2851C10.1489 12.4325 9.97417 12.5494 9.78179 12.6292C9.58941 12.7089 9.38319 12.75 9.17493 12.75C8.96667 12.75 8.76045 12.7089 8.56807 12.6292C8.37575 12.5494 8.20104 12.4326 8.05392 12.2853L8.05378 12.2851L4.46991 8.7045C4.32911 8.56383 4.25 8.37296 4.25 8.17393V4ZM12.2253 8.23378L12.2257 8.23341C12.2412 8.21758 12.25 8.19622 12.25 8.17393C12.25 8.15164 12.2412 8.13029 12.2257 8.11446L12.2253 8.11409L8.86212 4.75H5.75V7.86307L9.11456 11.2246L9.11517 11.2252C9.12303 11.2331 9.13236 11.2393 9.14261 11.2436C9.15286 11.2478 9.16384 11.25 9.17493 11.25C9.18602 11.25 9.197 11.2478 9.20725 11.2436C9.2175 11.2393 9.22683 11.2331 9.23469 11.2252L9.23499 11.2249L12.2253 8.23378ZM12.9999 20H3.99988V18.5H12.9999V20ZM3.99988 16L19.9999 16V14.5L3.99988 14.5V16Z",fill:"currentColor"})}),save:()=>(0,n.jsx)("div",{...a.useBlockProps.save(),...a.useInnerBlocksProps.save()}),variations:H.map(((e,t)=>({name:`product-filter-taxonomy-${e.name}`,title:(0,s.sprintf)(
// translators: %s is the taxonomy label.
// translators: %s is the taxonomy label.
(0,s.__)("%s Filter","woocommerce"),e.label),description:(0,s.sprintf)(
// translators: %s is the taxonomy label.
// translators: %s is the taxonomy label.
(0,s.__)("Enable customers to filter the product collection by selecting one or more %s terms.","woocommerce"),e.labels.singular_name||e.label),attributes:{taxonomy:e.name},isActive:["taxonomy"],isDefault:0===t})))})},1652:()=>{},1007:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function l(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,l),o.exports}l.m=r,e=[],l.O=(t,o,r,n)=>{if(!o){var c=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],s=!0,a=0;a<o.length;a++)(!1&n||c>=n)&&Object.keys(l.O).every((e=>l.O[e](o[a])))?o.splice(a--,1):(s=!1,n<c&&(c=n));if(s){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);l.r(n);var c={};t=t||[null,o({}),o([]),o(o)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,l.d(n,c),n},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=121,(()=>{var e={121:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[c,s,a]=o,i=0;if(c.some((t=>0!==e[t]))){for(r in s)l.o(s,r)&&(l.m[r]=s[r]);if(a)var u=a(l)}for(t&&t(o);i<c.length;i++)n=c[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(u)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=l.O(void 0,[94],(()=>l(3819)));c=l.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-taxonomy"]=c})();