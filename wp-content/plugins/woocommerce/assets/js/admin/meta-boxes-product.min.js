jQuery(function(s){let d=!1;function l(){var t=s("select#product-type").val();s(".enable_if_simple").each(function(){s(this).addClass("disabled"),s(this).is("input")&&s(this).prop("disabled",!0)}),s(".enable_if_external").each(function(){s(this).addClass("disabled"),s(this).is("input")&&s(this).prop("disabled",!0)}),s(".enable_if_variable").each(function(){s(this).addClass("disabled"),s(this).is("input")&&s(this).prop("disabled",!0)}),s(".enable_if_"+t).each(function(){s(this).removeClass("disabled"),s(this).is("input")&&s(this).prop("disabled",!1)})}function u(t){var e=s("select#product-type").val(),a=s("input#_virtual:checked").length,i=s("input#_downloadable:checked").length,o=".hide_if_downloadable, .hide_if_virtual",r=".show_if_downloadable, .show_if_virtual";s.each(woocommerce_admin_meta_boxes.product_types,function(t,e){o=o+", .hide_if_"+e,r=r+", .show_if_"+e}),s(o,t).show(),s(r,t).hide(),i&&s(".show_if_downloadable",t).show(),a&&s(".show_if_virtual",t).show(),s(".show_if_"+e,t).show(),i&&s(".hide_if_downloadable",t).hide(),a&&s(".hide_if_virtual",t).hide(),s(".hide_if_"+e,t).hide()}function i(){u(),s("input#_manage_stock").trigger("change"),s(".woocommerce_options_panel").each(function(){var t=s(this).children(".options_group");0!==t.length&&t.filter(function(){return"none"===s(this).css("display")}).length===t.length&&(t=s(this).prop("id"),s(".product_data_tabs").find('li a[href="#'+t+'"]').parent().hide())})}function t(t){var e=s(t).next().is(".hasDatepicker")?"minDate":"maxDate",a="minDate"==e?s(t).next():s(t).prev(),i=s(t).datepicker("getDate");s(a).datepicker("option",e,i),s(t).trigger("change")}s(window).on("beforeunload",function(){d=!0}),s(function(){s('[id$="-all"] > ul.categorychecklist').each(function(){var t,e=s(this),a=e.find(":checked").first();a.length&&(t=e.find("input").position().top,a=a.position().top,e.closest(".tabs-panel").scrollTop(a-t+5))})}),s("#upsell_product_data").on("keypress",function(t){if(13===t.keyCode)return!1}),s("body").hasClass("wc-wp-version-gte-55")?s(".type_box").appendTo("#woocommerce-product-data .hndle"):s(".type_box").appendTo("#woocommerce-product-data .hndle span"),s(function(){var e=s("#woocommerce-product-data");e.find(".hndle").off("click.postboxes"),e.on("click",".hndle",function(t){s(t.target).filter("input, option, label, select").length||(e.hasClass("closed")?e.removeClass("closed"):e.addClass("closed"))})}),s("#catalog-visibility").find(".edit-catalog-visibility").on("click",function(){return s("#catalog-visibility-select").is(":hidden")&&(s("#catalog-visibility-select").slideDown("fast"),s(this).hide()),!1}),s("#catalog-visibility").find(".save-post-visibility").on("click",function(){s("#catalog-visibility-select").slideUp("fast"),s("#catalog-visibility").find(".edit-catalog-visibility").show();var t=s("input[name=_visibility]:checked").attr("data-label");return s("input[name=_featured]").is(":checked")&&(t=t+", "+woocommerce_admin_meta_boxes.featured_label,s("input[name=_featured]").attr("checked","checked")),s("#catalog-visibility-display").text(t),!1}),s("#catalog-visibility").find(".cancel-post-visibility").on("click",function(){s("#catalog-visibility-select").slideUp("fast"),s("#catalog-visibility").find(".edit-catalog-visibility").show();var t=s("#current_visibility").val(),e=s("#current_featured").val(),t=(s("input[name=_visibility]").prop("checked",!1),s("input[name=_visibility][value="+t+"]").attr("checked","checked"),s("input[name=_visibility]:checked").attr("data-label"));return"yes"===e?(t=t+", "+woocommerce_admin_meta_boxes.featured_label,s("input[name=_featured]").attr("checked","checked")):s("input[name=_featured]").prop("checked",!1),s("#catalog-visibility-display").text(t),!1}),s("select#product-type").on("change",function(){var t,e=s(this).val();"variable"===e?(s("input#_manage_stock").trigger("change"),s("input#_downloadable").prop("checked",!1),s("input#_virtual").prop("checked",!1)):"grouped"!==e&&"external"!==e||(s("input#_downloadable").prop("checked",!1),s("input#_virtual").prop("checked",!1)),i(),l(),t=function(t){switch(t){case"simple":return woocommerce_admin_meta_boxes.i18n_product_simple_tip;case"grouped":return woocommerce_admin_meta_boxes.i18n_product_grouped_tip;case"external":return woocommerce_admin_meta_boxes.i18n_product_external_tip;case"variable":return woocommerce_admin_meta_boxes.i18n_product_variable_tip;default:return woocommerce_admin_meta_boxes.i18n_product_other_tip}}(e),s("#tiptip_holder").removeAttr("style"),s("#tiptip_arrow").removeAttr("style"),s(".woocommerce-product-type-tip").tipTip({attribute:"data-tip",content:t,fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}),s("ul.wc-tabs li:visible").eq(0).find("a").trigger("click"),s(document.body).trigger("woocommerce-product-type-change",e,s(this))}).trigger("change"),s("input#_downloadable").on("change",function(){i()}),s("input#_virtual").on("change",function(){i(),s(this).is(":checked")&&s(".shipping_options.shipping_tab").hasClass("active")&&s(".general_options.general_tab > a").trigger("click")}),s(".sale_price_dates_fields").each(function(){var t=s(this),e=!1,a=t.closest("div, table");t.find("input").each(function(){""!==s(this).val()&&(e=!0)}),e?(a.find(".sale_schedule").hide(),a.find(".sale_price_dates_fields").show()):(a.find(".sale_schedule").show(),a.find(".sale_price_dates_fields").hide())}),s("#woocommerce-product-data").on("click",".sale_schedule",function(){var t=s(this).closest("div, table");return s(this).hide(),t.find(".cancel_sale_schedule").show(),t.find(".sale_price_dates_fields").show(),!1}),s("#woocommerce-product-data").on("click",".cancel_sale_schedule",function(){var t=s(this).closest("div, table");return s(this).hide(),t.find(".sale_schedule").show(),t.find(".sale_price_dates_fields").hide(),t.find(".sale_price_dates_fields").find("input").val(""),!1}),s("#woocommerce-product-data").on("click",".downloadable_files a.insert",function(){return s(this).closest(".downloadable_files").find("tbody").append(s(this).data("row")),!1}),s("#woocommerce-product-data").on("click",".downloadable_files a.delete",function(){return s(this).closest("tr").remove(),!1}),s("input#_manage_stock").on("change",function(){var t,e,a=s(this).is(":checked"),i=s("select#product-type").val();a=a,i=i,t=s(".stock_fields"),e=s(".stock_status_field"),t.toggle(a),e.toggle(!a&&!e.is(".hide_if_"+i)),s("input.variable_manage_stock").trigger("change")}).trigger("change"),s(".sale_price_dates_fields").each(function(){s(this).find("input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,onSelect:function(){t(s(this))}}),s(this).find("input").each(function(){t(s(this))})});const a=s(".product_attributes");function _(){s(".product_attributes .woocommerce_attribute").each(function(t,e){s(".attribute_position",e).val(parseInt(s(e).index(".product_attributes .woocommerce_attribute"),10))})}1===a.length&&(0===(h=a.find(".woocommerce_attribute").get()).length&&p(),h.sort(function(t,e){t=parseInt(s(t).attr("rel"),10),e=parseInt(s(e).attr("rel"),10);return t<e?-1:e<t?1:0}),s(h).each(function(t,e){a.append(e)}));var o,r,e,c=[];async function n(t){try{s("#product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=s(".product_attributes .woocommerce_attribute").length,a=(r=e,c=t,await new Promise(function(e,i){s.post({url:woocommerce_admin_meta_boxes.ajax_url,data:{action:"woocommerce_add_attribute",taxonomy:c??"",i:r,security:woocommerce_admin_meta_boxes.add_attribute_nonce},success:function(t){e(t)},error:function(t,e,a){i({jqXHR:t,textStatus:e,errorThrown:a})}})})),i=s("#product_attributes .product_attributes"),o=s(a).appendTo(i);u(o),s(document.body).trigger("wc-enhanced-select-init"),_(),o.find("h3").trigger("click"),l(),jQuery.maybe_disable_save_button()}catch(n){if(!d)throw alert(woocommerce_admin_meta_boxes.i18n_add_attribute_error_notice),n}finally{s("#product_attributes").unblock()}var r,c}function p(){n()}s(".product_attributes .woocommerce_attribute").each(function(t,e){"none"!==s(e).css("display")&&s(e).is(".taxonomy")&&(c.push(s(e).data("taxonomy")),s("select.attribute_taxonomy").find('option[value="'+s(e).data("taxonomy")+'"]').attr("disabled","disabled"))}),s("select.wc-attribute-search").data("disabled-items",c),s("select.wc-attribute-search").on("select2:select",function(t){var e,a,i,t=t?.params?.data?.id;return t&&(1===(i=s(".product_attributes .woocommerce_attribute")).length&&(e=(i=i.first()).find('input[name="attribute_names[0]"]'),a=i.find('input[name="attribute_values[0]"]'),e.val()||a.val()||i.remove()),n(t),e=t,c=(a=c).includes(e)?attr:[...a,e],i=c,s("select.wc-attribute-search").data("disabled-items",i)),s(this).val(null),s(this).trigger("change"),!1}),s("button.add_custom_attribute").on("click",function(){return p(),!1}),s(".product_attributes").on("blur","input.attribute_name",function(){var t=s(this),e=t.val(),t=t.closest(".woocommerce_attribute").find("strong.attribute_name");""===e?t.addClass("placeholder").text(woocommerce_admin_meta_boxes.i18n_attribute_name_placeholder):t.removeClass("placeholder").text(e)}),s(".product_attributes").on("click","button.select_all_attributes",function(){s(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a=s(this).closest(".woocommerce_attribute"),t={action:"woocommerce_json_search_taxonomy_terms",taxonomy:a.data("taxonomy"),security:wc_enhanced_select_params.search_taxonomy_terms_nonce};return s.get(woocommerce_admin_meta_boxes.ajax_url,t,function(t){t.errors?window.alert(t.errors):t&&0<t.length&&(t.forEach(function(t){var e=a.find('select.attribute_values option[value="'+t.term_id+'"]');e&&0<e.length?e.prop("selected","selected"):a.find("select.attribute_values").append('<option value="'+t.term_id+'" selected="selected">'+t.name+"</option>")}),a.find("select.attribute_values").trigger("change")),s(".product_attributes").unblock()}),!1}),s(".product_attributes").on("click","button.select_no_attributes",function(){return s(this).closest("td").find("select option").prop("selected",!1),s(this).closest("td").find("select").trigger("change"),!1}),s("#product_attributes").on("click",".product_attributes .remove_row",function(){var e=s(this).parent().parent();return e.find('input[name^="attribute_variation"]').is(":visible:checked")&&!window.confirm(woocommerce_admin_meta_boxes.i18n_remove_used_attribute_confirmation_message)||(e.is(".taxonomy")?(e.find("select, input[type=text]").val(""),e.hide(),s("select.attribute_taxonomy").find('option[value="'+e.data("taxonomy")+'"]').prop("disabled",!1),c=c.filter(t=>t!==e.data("taxonomy")),s("select.wc-attribute-search").data("disabled-items",c)):(e.find("select, input[type=text]").val(""),e.hide(),_()),e.remove(),window.wcTracks.recordEvent("product_attributes_buttons",{action:"remove_attribute"}),jQuery.maybe_disable_save_button()),!1}),s(".product_attributes").sortable({items:".woocommerce_attribute",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style"),_()}}),s(".product_attributes").on("click","button.add_new_attribute",function(t){t.preventDefault(),s(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=s(this).closest(".woocommerce_attribute"),t=e.data("taxonomy"),a=window.prompt(woocommerce_admin_meta_boxes.new_attribute_prompt);a?(t={action:"woocommerce_add_new_attribute",taxonomy:t,term:a,security:woocommerce_admin_meta_boxes.add_attribute_nonce},s.post(woocommerce_admin_meta_boxes.ajax_url,t,function(t){t.error?window.alert(t.error):t.slug&&(e.find("select.attribute_values").append('<option value="'+t.term_id+'" selected="selected">'+t.name+"</option>"),e.find("select.attribute_values").trigger("change")),s(".product_attributes").unblock()})):s(".product_attributes").unblock()}),s(".save_attributes").on("click",function(t){s(this).hasClass("disabled")?t.preventDefault():(s(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t=s(".product_attributes").find("input, select, textarea"),t={post_id:woocommerce_admin_meta_boxes.post_id,product_type:s("#product-type").val(),data:t.serialize(),action:"woocommerce_save_attributes",security:woocommerce_admin_meta_boxes.save_attributes_nonce},s.post(woocommerce_admin_meta_boxes.ajax_url,t,function(t){var a;t.error?window.alert(t.error):t.data&&(s(".product_attributes").html(t.data.html),s(".product_attributes").unblock(),i(),l(),s("select.attribute_taxonomy").find("option").prop("disabled",!1),a=[],s(".product_attributes .woocommerce_attribute").each(function(t,e){"none"!==s(e).css("display")&&s(e).is(".taxonomy")&&(a.push(s(e).data("taxonomy")),s("select.attribute_taxonomy").find('option[value="'+s(e).data("taxonomy")+'"]').prop("disabled",!0))}),c=a,s("select.wc-attribute-search").data("disabled-items",a),t=(t=window.location.toString()).replace("post-new.php?","post.php?post="+woocommerce_admin_meta_boxes.post_id+"&action=edit&"),s("#variable_product_options").load(t+" #variable_product_options_inner",function(){s("#variable_product_options").trigger("reload")}),s(document.body).trigger("woocommerce_attributes_saved"))}))}),s(document.body).on("click",'#variable_product_options .add-attributes-message a[href="#product_attributes"]',function(){return s('#woocommerce-product-data .attribute_tab a[href="#product_attributes"]').trigger("click"),!1}),s(document.body).on("click",".upload_file_button",function(t){var e=s(this);r=e.closest("tr").find("td.file_url input"),t.preventDefault(),o||(t=[new wp.media.controller.Library({library:wp.media.query(),multiple:!0,title:e.data("choose"),priority:20,filterable:"uploaded"})],(o=wp.media.frames.downloadable_file=wp.media({title:e.data("choose"),library:{type:""},button:{text:e.data("update")},multiple:!0,states:t})).on("select",function(){var e="";o.state().get("selection").map(function(t){(t=t.toJSON()).url&&(e=t.url)}),r.val(e).trigger("change")}),o.on("ready",function(){o.uploader.options.uploader.params={type:"downloadable_product"}})),o.open()}),s(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65});var m=s("#product_image_gallery"),b=s("#product_images_container").find("ul.product_images"),h=(s(".add_product_images").on("click","a",function(t){var i=s(this);t.preventDefault(),e||(e=wp.media.frames.product_gallery=wp.media({title:i.data("choose"),button:{text:i.data("update")},states:[new wp.media.controller.Library({title:i.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var t=e.state().get("selection"),a=m.val();t.map(function(t){var e;(t=t.toJSON()).id&&(a=a?a+","+t.id:t.id,e=(t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail:t).url,b.append('<li class="image" data-attachment_id="'+t.id+'"><img src="'+e+'" /><ul class="actions"><li><a href="#" class="delete" title="'+i.data("delete")+'">'+i.data("text")+"</a></li></ul></li>"))}),m.val(a)}),e.open()}),b.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){var e="";s("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var t=s(this).attr("data-attachment_id");e=e+t+","}),m.val(e)}}),s("#product_images_container").on("click","a.delete",function(){s(this).closest("li.image").remove();var e="";return s("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var t=s(this).attr("data-attachment_id");e=e+t+","}),m.val(e),s("#tiptip_holder").removeAttr("style"),s("#tiptip_arrow").removeAttr("style"),!1}),s("#wp-content-media-buttons").append('<span class="woocommerce-help-tip" tabindex="0"></span>').find(".woocommerce-help-tip").attr("tabindex","0").attr("for","content").attr("aria-label",woocommerce_admin_meta_boxes.i18n_product_description_tip).tipTip({attribute:"data-tip",content:woocommerce_admin_meta_boxes.i18n_product_description_tip,fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}),s("#postexcerpt > .postbox-header > .hndle").append('<span class="woocommerce-help-tip"></span>').find(".woocommerce-help-tip").attr("tabindex","0").attr("aria-label",woocommerce_admin_meta_boxes.i18n_product_short_description_tip).tipTip({attribute:"data-tip",content:woocommerce_admin_meta_boxes.i18n_product_short_description_tip,fadeIn:50,fadeOut:50,delay:200,keepAlive:!0}),s("#set-post-thumbnail")),f=`<span class="woocommerce-help-tip" tabindex="0" aria-label="${woocommerce_admin_meta_boxes.i18n_product_image_tip}"></span>`,v={attribute:"data-tip",content:woocommerce_admin_meta_boxes.i18n_product_image_tip,fadeIn:50,fadeOut:50,delay:200,keepAlive:!0},h=(h&&s(f).insertAfter(h).tipTip(v),s(".add_product_images > a"));h&&s(f).insertAfter(h).tipTip(v)});